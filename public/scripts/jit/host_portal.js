// generated by JITBrowserify on 5/26/2021, 4:04:41 PM
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';

module.exports = {
    prefix: "data-nidget",
    elementAttribute: "data-nidget-element",
    srcAttribute: "src",
    templateSrcAttribute: "template-src",
    nameAttribute: "name",
    interfaceAttribute: "interfaces",
    templateAttribute: "template-id",
    interfaceDataField: "interfaceData",
    modelDataField: "modelData",
    styleAttribute: "nidget-style"
};
},{}],2:[function(require,module,exports){
'use strict';
const NidgetElement = require("./NidgetElement");

/* global Utility */
class FileOperations {
    /**
     * Create a new dom element from a file (url).  Map variables (${...}) to 
     * a value.
     * @param {type} url
     * @param {type} map
     * @returns {node|FileOperations.loadDOMElement.domElement}
     */
    static async loadNidget(url, map){        
        let element = await FileOperations.loadDOMElement(url, map);
        return new NidgetElement(element);
    }    
    
    /**
     * Create a new dom element from a file (url).  Map variables (${...}) to 
     * a value.
     * @param {type} url
     * @param {type} map
     * @returns {node|FileOperations.loadDOMElement.domElement}
     */
    static async loadDOMElement(url, map = new Map()){        
        if (map instanceof Map === false) map = FileOperations.objectToMap(map);       
        let text = await FileOperations.getURL(url);
        return FileOperations.stringToDOMElement(text, map);
    }

    /**
     * Create a new dom element from text.
     * @param {type} text
     * @param {type} map
     * @returns {node|FileOperations.loadDOMElement.domElement}
     */
    static stringToDOMElement(text, map = new Map()){
        /* replace variables with values */
        for (let key of map.keys()){                  
            let value = map.get(key);
            let regex = new RegExp(`[$][{]?${key}[}]`, `g`);
            text = text.replace(regex, value);    
        }

        /* replace unfilled variables with empty */
        let regex = new RegExp(`[$][{][^}]*[}]`, `g`);
        text = text.replace(regex, ""); 

        let element = document.createElement('div');
        element.innerHTML = text;
        let domElement = null;
        console.log(element);

        return element;
    }

    static objectToMap(object){
        let map = new Map();
        for (let field in object){            
            if (typeof object[field] === "string" || typeof object[field] === "number"){
                map.set(field, object[field]);
            }
        }
        return map;
    }

    

    /*
     * Transfer contents of 'filename' from server to client.
     * @param {String} filename
     * @param {Function} successCallback
     * @param {Function} errorCallback
     * @returns {String} contents of file
     */
    static getURL(url) {
        let callback = function (resolve, reject) {
            var xhttp = new XMLHttpRequest();

            xhttp.onreadystatechange = function () {
                if (xhttp.readyState === 4) {
                    if (xhttp.status === 200) {
                        resolve(xhttp.responseText);
                    } else {
                        reject({
                            xhttp : xhttp,
                            status : xhttp.status, 
                            text : xhttp.responseText,
                            url : url
                        });
                    }
                }
            };
            
            xhttp.open("GET", url, true);
            xhttp.send(null);
        };

        return new Promise(callback);
    }

    /**
     * Create a new dom element from text.
     * @param {type} text
     * @param {type} map
     * @returns {node|FileOperations.loadDOMElement.domElement}
     */
    static async getFile(url, map = new Map()){
        let text = await FileOperations.getURL(url);

        /* replace variables with values */
        for (let key of map.keys()){
            let value = map.get(key);
            let regex = new RegExp(`[$][{]?${key}[}]`, `g`);
            text = text.replace(regex, value);
        }

        /* replace unfilled variables with empty */
        let regex = new RegExp(`[$][{][^}]*[}]`, `g`);
        text = text.replace(regex, "");

        return text;
    }

    /*
     * Transfer contents of 'filename' from server to client using current window location.
     * @param {String} filename
     * @param {Function} successCallback
     * @param {Function} errorCallback
     * @returns {undefined}
     */
    static getLocal(filename) {
        let callback = function (resolve, reject) {
            var xhttp = new XMLHttpRequest();
            var data = {};
            var url = window.location.href + "/" + filename;

            xhttp.onreadystatechange = function () {
                if (xhttp.readyState === 4) {
                    if (xhttp.status === 200) {
                        resolve(xhttp.responseText);
                    } else {
                        reject(xhttp.status, xhttp.responseText);
                    }
                }
            };

            xhttp.open("GET", url, true);
            xhttp.send(JSON.stringify(data));
        };

        return new Promise(callback);
    }
    
    /**
     * Cause 'text' to be saved as 'filename' client side.
     * @param {type} filename The default filename to save the text as.
     * @param {type} text The text to save to filename.
     * @returns {undefined}
     */
    static saveToFile(text, filename) {
        let anchor = document.createElement('a');
        let data = "text;charset=utf-8," + encodeURIComponent(text);
        anchor.setAttribute("href", "data:" + data);
        anchor.setAttribute("download", filename);
        anchor.click();
    }
}

FileOperations.NodeType = {
    ELEMENT : 1,
    ATTRIBUTE : 2,
    TEXT : 3, 
    CDATASECTION : 4,
    ENTITYREFERNCE : 5,
    ENTITY : 6,
    PROCESSINGINSTRUCTION : 7,
    COMMENT : 8,
    DOCUMENT : 9,
    DOCUMENTTYPE : 10,
    DOCUMENTFRAGMENT : 11,
    NOTATION : 12
};

module.exports = FileOperations;
},{"./NidgetElement":3}],3:[function(require,module,exports){
"use strict";
const FileOperations = require("./FileOperations");
const Nidget = require("./Constants");

/**
 * Calling methods on the nidget will treat shadow contents as regular contents.
 */
class NidgetElement extends HTMLElement {
    /**
     * Create a new Nidget associated with 'element'.  An error will be thrown
     * if the 'element' is already associated with a Nidget.
     * 
     * Disabled class indicates this nidget will ignore mouse events.
     * 
     * @param {type} element JQuery selector
     * @return {nm$_Nidget.NidgetElement}
     */
    constructor(templateId) {
        super();
        this.observers = {};

        if (templateId){
            this.applyTemplate(templateId);
        }
    }
    /**
        connectedCallback is invoked each time the custom element is appended into a document-connected element
     */
    async connectedCallback() {
        this.shadowContents = this;

        if (this.hasAttribute(Nidget.templateAttribute)){
            await this.applyTemplate(this.getAttribute(Nidget.templateAttribute));
        }

        this.detectDOM();
        this.ready();
    }

    detectDOM(){
        this.DOM = {};
        for (const element of this.querySelectorAll("[id]")){
            this.DOM[toCamelCase(element.id)] = element;
        }
    }

    /**
     * Retrieve a map of all data attributes
     * @returns {Map<any, any>}
     */
    dataAttributes() {
        let map = new Map();
        for (let attr of this.attributes) {
            if (attr.name.startsWith("data-")) {
                let name = attr.name.substr(5);
                map[name] = attr.value;
            }
        }
        return map;
    }

    /**
     * Attach a shadow element with the contents of the template named (templateID).
     * @return {undefined}
     */
    async applyTemplate(templateId) {
        if (this.shadowRoot !== null) return;
        let template = document.getElementById(templateId);

        if (!template){
            throw new Error(
                "Template '" + templateId + "' not found\n" +
                "Has the .ejs directive been added to the source file?\n" +
                "<%- include('../partials/nidget-templates'); %>"
            );
        }
        if (template.tagName.toUpperCase() !== "TEMPLATE") throw new Error("Element with id '" + templateId + "' is not a template.");

        this.attachShadow({mode: 'open'}).appendChild(template.content.cloneNode(true));
    }

    async ready(){}

    /**
     * Load contents of file into this element.
     * Replace all ${} variables with contents of 'map'.
     */
    async retrieveSource(map){
        let src = this.getAttribute(Nidget.srcAttribute);
        let text = await FileOperations.getFile(src, map);
        this.innerHTML = text;
    }

    static async loadTemplateSnippet(filename, tagname){
        let id = filename.replace(/[\// .-]+/g, "_");

        if (!document.querySelector(`#${id}`)){
            let text = await FileOperations.getFile(filename);
            let template = document.createElement("template");
            template.innerHTML = text;
            template.setAttribute("id", id);
            if (tagname) template.setAttribute("data-nidget", tagname);
            document.body.append(template);
        }

        let template = document.querySelector(`#${id}`);

        for (let ele of document.querySelectorAll(tagname)){
            await ele.injectTemplate(template);
        }
    }

    /**
     * Remove 'hidden' class.
     */
    show() {
        this.classList.remove("hidden");
        this.classList.add("shown");
    }

    /**
     * Add 'hidden' class.
     */
    hide() {
        this.classList.remove("shown");
        this.classList.add("hidden");
    }

    /**
     * Set the disabled flag that is read by nidget mouse functions.
     * @param value
     */
    set disabled(value){
        this.setAttribute(NidgetElement.DISABLED_ATTRIBUTE, value);
    }

    /**
     * Get the disabled flag that is read by nidget mouse functions.
     * @param value
     */
    get disabled(){
        if (!this.hasAttribute(NidgetElement.DISABLED_ATTRIBUTE)) return false;
        return this.getAttribute(NidgetElement.DISABLED_ATTRIBUTE);
    }

    /**
     * Return true if this element was under the mouse for the event.
     * @param {type} event
     * @param {type} element
     * @return {Boolean}
     */
    isUnderMouse(event) {
        let x = event.clientX;
        let y = event.clientY;
        let current = document.elementFromPoint(x, y);

        while (current) {
            if (current === this) return true;
            current = current.parentElement;
        }
        return false;
    }

    /**
     * Perform a query selection on the element, not the shadow root.
     */
    outerSelector(selectors){
        return super.querySelector(selectors);
    }

    /**
     * Perform a query select all on the element, not the shadow root.
     */
    outerSelectorAll(selectors){
        return super.querySelectorAll(selectors);
    }

    /**
     * Run the query selector on this element.
     * If this element has a shadow, run it on that instead.
     * @param selectors
     * @returns {HTMLElementTagNameMap[K]}
     */
   querySelector(selectors) {
        if (this.shadowRoot){
            return this.shadowRoot.querySelector(selectors);
        } else {
            return super.querySelector(selectors);
        }
    }

    /**
     * Run the query selector on this element.
     * If this element has a shadow, run it on that instead.
     * @param selectors
     * @returns {HTMLElementTagNameMap[K]}
     */
    querySelectorAll(selectors) {
        if (this.shadowRoot){
            return this.shadowRoot.querySelectorAll(selectors);
        } else {
            return super.querySelectorAll(selectors);
        }
    }

    /**
     * Remove this element from it's parent.
     */
    detach(){
        this.parentNode.removeChild(this);
    }

    /**
     * Index within the parent element.
     */
    index(){
        return Array.from(this.parentElement.children).indexOf(this);
    }
}

function toCamelCase(input){
    const split = input.split("-");
    for (let i = 1; i < split.length; i++) {
        split[i] = split[i].charAt(0).toUpperCase() + split[i].slice(1);
    }
    return split.join('');
}

NidgetElement.DISABLED_ATTRIBUTE = "nidget-disabled";
if (!window.customElements.get('nidget-element')) {
    window.customElements.define('nidget-element', NidgetElement);
}

module.exports = NidgetElement;
},{"./Constants":1,"./FileOperations":2}],4:[function(require,module,exports){
(function (setImmediate){(function (){
"use strict";
const NidgetElement = require("../NidgetElement");

/**
 * Set the font-size as a multiple of the css variable --fit-text-unit.
 * Style example: calc(45 * var(--fit-text-unit))
 */
class FitText {
    constructor(nidget){
        this.nidget = nidget;
        this.parseArguments();
        this.coefficient = this.extractUnits();
        this.lastCoefficient = 0;

        this.last = {
            hDiff: this.nidget.parentElement.offsetHeight - this.nidget.scrollHeight,
            wDiff: this.nidget.parentElement.offsetWidth - this.nidget.scrollWidth
        };
    }

    extractUnits(){
        const fontSize = this.nidget.style.fontSize;
        if (fontSize === "") return 1;
        if (!fontSize.endsWith(" * var(--fit-text-unit))")) return 1;
        if (!fontSize.startsWith("calc(")) return 1;
        const value = parseInt(fontSize.substr("calc(".length));
        if (!value || value < 1) return 1;
        return value;
    }

    notify(cb){
        this.direction = 0;
        setImmediate(()=>this.onResize(cb));
    }

    /**
     * Retrieve the settings from css
     */
    parseArguments(){
        let args = getComputedStyle(this.nidget).getPropertyValue("--nidget-fit-text");

        if (!args || args === false){
            this.hValue = 1;
            this.wValue = 1;
            return;
        }

        if (typeof(args) == "string"){
            if (args.search("height") !== -1) this.hValue = 1;
            if (args.search("width") !== -1) this.wValue = 1;
        }
    }

    /**
     * Fit the text element to it's parent element.
     * @param hValue true, fit the height
     * @param wValue true, fit the width
     */
    onResize(cb){
        delete this.timeout;
        cb = cb ?? function(){};

        if (this.nidget.textContent === "") return;
        if (this.nidget.parentElement.offsetHeight === 0) return;
        if (this.nidget.parentElement.offsetWidth === 0) return;
        if (this.nidget.style.display === "none") return;
        if (!this.hValue && !this.wValue) return;

        // hDiff growth direction due to height
        // wDiff growth direction due to width
        let hDiff = this.nidget.parentElement.offsetHeight - this.nidget.scrollHeight;
        let wDiff = this.nidget.parentElement.offsetWidth - this.nidget.scrollWidth;

        if (this.last.hDiff === hDiff && this.last.wDiff === wDiff) {
            cb(this.nidget.style.fontSize);
            return;
        }

        if (!this.hValue) hDiff = 0;
        if (!this.wValue) wDiff = 0;

        let dir = Math.sign(hDiff | wDiff); // will prefer to shrink
        const newCoefficient = this.coefficient + dir;

        const fontSize = `calc(${newCoefficient} * var(--fit-text-unit))`;
        if (newCoefficient !== this.coefficient && newCoefficient !== this.lastCoefficient) {
            this.nidget.style.opacity = 0.0;
            this.nidget.style.fontSize = fontSize;
            this.lastCoefficient = this.coefficient;
            this.coefficient = newCoefficient;
            this.timeout = setImmediate(()=>this.onResize(cb));
        } else {
            this.nidget.style.opacity = 1.0;
            this.lastCoefficient = 0;
            this.last = {hDiff: hDiff, wDiff: wDiff};
            cb(fontSize);
        }
    }
}

/**
 * A nidget element for displaying text.
 * put '--nidget-fit-text: 1.0;' into css for this element to enable scaling.
 * see: NidgetStyle.js
 */
class NidgetText extends NidgetElement {

    constructor() {
        super();
    }

    remove(){
        super.remove();
    }

    get fitText(){
        if (!this._fitText) this._fitText = new FitText(this);
        return this._fitText;
    }

    connectedCallback() {
        super.connectedCallback();
    }

    set text(value){
        this.innerText = value;
    }

    get text(){
        return this.innerText;
    }
}
;

if (!window.customElements.get('nidget-text')) {
    window.customElements.define('nidget-text', NidgetText);
}
module.exports = NidgetText;
}).call(this)}).call(this,require("timers").setImmediate)

},{"../NidgetElement":3,"timers":25}],5:[function(require,module,exports){
'use strict';
module.exports = {
    NidgetElement : require("./NidgetElement"),
    NidgetText : require("./nidget-components/NidgetText"),
    Constants: require("./Constants"),
};
},{"./Constants":1,"./NidgetElement":3,"./nidget-components/NidgetText":4}],6:[function(require,module,exports){
function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

module.exports = _assertThisInitialized;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],7:[function(require,module,exports){
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

module.exports = _asyncToGenerator;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],8:[function(require,module,exports){
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

module.exports = _classCallCheck;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],9:[function(require,module,exports){
var setPrototypeOf = require("./setPrototypeOf.js");

var isNativeReflectConstruct = require("./isNativeReflectConstruct.js");

function _construct(Parent, args, Class) {
  if (isNativeReflectConstruct()) {
    module.exports = _construct = Reflect.construct;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  } else {
    module.exports = _construct = function _construct(Parent, args, Class) {
      var a = [null];
      a.push.apply(a, args);
      var Constructor = Function.bind.apply(Parent, a);
      var instance = new Constructor();
      if (Class) setPrototypeOf(instance, Class.prototype);
      return instance;
    };

    module.exports["default"] = module.exports, module.exports.__esModule = true;
  }

  return _construct.apply(null, arguments);
}

module.exports = _construct;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{"./isNativeReflectConstruct.js":16,"./setPrototypeOf.js":18}],10:[function(require,module,exports){
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

module.exports = _createClass;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],11:[function(require,module,exports){
var superPropBase = require("./superPropBase.js");

function _get(target, property, receiver) {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    module.exports = _get = Reflect.get;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  } else {
    module.exports = _get = function _get(target, property, receiver) {
      var base = superPropBase(target, property);
      if (!base) return;
      var desc = Object.getOwnPropertyDescriptor(base, property);

      if (desc.get) {
        return desc.get.call(receiver);
      }

      return desc.value;
    };

    module.exports["default"] = module.exports, module.exports.__esModule = true;
  }

  return _get(target, property, receiver || target);
}

module.exports = _get;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{"./superPropBase.js":19}],12:[function(require,module,exports){
function _getPrototypeOf(o) {
  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  module.exports["default"] = module.exports, module.exports.__esModule = true;
  return _getPrototypeOf(o);
}

module.exports = _getPrototypeOf;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],13:[function(require,module,exports){
var setPrototypeOf = require("./setPrototypeOf.js");

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) setPrototypeOf(subClass, superClass);
}

module.exports = _inherits;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{"./setPrototypeOf.js":18}],14:[function(require,module,exports){
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

module.exports = _interopRequireDefault;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],15:[function(require,module,exports){
function _isNativeFunction(fn) {
  return Function.toString.call(fn).indexOf("[native code]") !== -1;
}

module.exports = _isNativeFunction;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],16:[function(require,module,exports){
function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

module.exports = _isNativeReflectConstruct;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],17:[function(require,module,exports){
var _typeof = require("@babel/runtime/helpers/typeof")["default"];

var assertThisInitialized = require("./assertThisInitialized.js");

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return assertThisInitialized(self);
}

module.exports = _possibleConstructorReturn;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{"./assertThisInitialized.js":6,"@babel/runtime/helpers/typeof":20}],18:[function(require,module,exports){
function _setPrototypeOf(o, p) {
  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  module.exports["default"] = module.exports, module.exports.__esModule = true;
  return _setPrototypeOf(o, p);
}

module.exports = _setPrototypeOf;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],19:[function(require,module,exports){
var getPrototypeOf = require("./getPrototypeOf.js");

function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = getPrototypeOf(object);
    if (object === null) break;
  }

  return object;
}

module.exports = _superPropBase;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{"./getPrototypeOf.js":12}],20:[function(require,module,exports){
function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    module.exports = _typeof = function _typeof(obj) {
      return typeof obj;
    };

    module.exports["default"] = module.exports, module.exports.__esModule = true;
  } else {
    module.exports = _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };

    module.exports["default"] = module.exports, module.exports.__esModule = true;
  }

  return _typeof(obj);
}

module.exports = _typeof;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],21:[function(require,module,exports){
var getPrototypeOf = require("./getPrototypeOf.js");

var setPrototypeOf = require("./setPrototypeOf.js");

var isNativeFunction = require("./isNativeFunction.js");

var construct = require("./construct.js");

function _wrapNativeSuper(Class) {
  var _cache = typeof Map === "function" ? new Map() : undefined;

  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {
    if (Class === null || !isNativeFunction(Class)) return Class;

    if (typeof Class !== "function") {
      throw new TypeError("Super expression must either be null or a function");
    }

    if (typeof _cache !== "undefined") {
      if (_cache.has(Class)) return _cache.get(Class);

      _cache.set(Class, Wrapper);
    }

    function Wrapper() {
      return construct(Class, arguments, getPrototypeOf(this).constructor);
    }

    Wrapper.prototype = Object.create(Class.prototype, {
      constructor: {
        value: Wrapper,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
    return setPrototypeOf(Wrapper, Class);
  };

  module.exports["default"] = module.exports, module.exports.__esModule = true;
  return _wrapNativeSuper(Class);
}

module.exports = _wrapNativeSuper;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{"./construct.js":9,"./getPrototypeOf.js":12,"./isNativeFunction.js":15,"./setPrototypeOf.js":18}],22:[function(require,module,exports){
module.exports = require("regenerator-runtime");

},{"regenerator-runtime":24}],23:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],24:[function(require,module,exports){
/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var runtime = (function (exports) {
  "use strict";

  var Op = Object.prototype;
  var hasOwn = Op.hasOwnProperty;
  var undefined; // More compressible than void 0.
  var $Symbol = typeof Symbol === "function" ? Symbol : {};
  var iteratorSymbol = $Symbol.iterator || "@@iterator";
  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";

  function define(obj, key, value) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
    return obj[key];
  }
  try {
    // IE 8 has a broken Object.defineProperty that only works on DOM objects.
    define({}, "");
  } catch (err) {
    define = function(obj, key, value) {
      return obj[key] = value;
    };
  }

  function wrap(innerFn, outerFn, self, tryLocsList) {
    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
    var generator = Object.create(protoGenerator.prototype);
    var context = new Context(tryLocsList || []);

    // The ._invoke method unifies the implementations of the .next,
    // .throw, and .return methods.
    generator._invoke = makeInvokeMethod(innerFn, self, context);

    return generator;
  }
  exports.wrap = wrap;

  // Try/catch helper to minimize deoptimizations. Returns a completion
  // record like context.tryEntries[i].completion. This interface could
  // have been (and was previously) designed to take a closure to be
  // invoked without arguments, but in all the cases we care about we
  // already have an existing method we want to call, so there's no need
  // to create a new function object. We can even get away with assuming
  // the method takes exactly one argument, since that happens to be true
  // in every case, so we don't have to touch the arguments object. The
  // only additional allocation required is the completion record, which
  // has a stable shape and so hopefully should be cheap to allocate.
  function tryCatch(fn, obj, arg) {
    try {
      return { type: "normal", arg: fn.call(obj, arg) };
    } catch (err) {
      return { type: "throw", arg: err };
    }
  }

  var GenStateSuspendedStart = "suspendedStart";
  var GenStateSuspendedYield = "suspendedYield";
  var GenStateExecuting = "executing";
  var GenStateCompleted = "completed";

  // Returning this object from the innerFn has the same effect as
  // breaking out of the dispatch switch statement.
  var ContinueSentinel = {};

  // Dummy constructor functions that we use as the .constructor and
  // .constructor.prototype properties for functions that return Generator
  // objects. For full spec compliance, you may wish to configure your
  // minifier not to mangle the names of these two functions.
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}

  // This is a polyfill for %IteratorPrototype% for environments that
  // don't natively support it.
  var IteratorPrototype = {};
  IteratorPrototype[iteratorSymbol] = function () {
    return this;
  };

  var getProto = Object.getPrototypeOf;
  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  if (NativeIteratorPrototype &&
      NativeIteratorPrototype !== Op &&
      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
    // This environment has a native %IteratorPrototype%; use it instead
    // of the polyfill.
    IteratorPrototype = NativeIteratorPrototype;
  }

  var Gp = GeneratorFunctionPrototype.prototype =
    Generator.prototype = Object.create(IteratorPrototype);
  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;
  GeneratorFunctionPrototype.constructor = GeneratorFunction;
  GeneratorFunction.displayName = define(
    GeneratorFunctionPrototype,
    toStringTagSymbol,
    "GeneratorFunction"
  );

  // Helper for defining the .next, .throw, and .return methods of the
  // Iterator interface in terms of a single ._invoke method.
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function(method) {
      define(prototype, method, function(arg) {
        return this._invoke(method, arg);
      });
    });
  }

  exports.isGeneratorFunction = function(genFun) {
    var ctor = typeof genFun === "function" && genFun.constructor;
    return ctor
      ? ctor === GeneratorFunction ||
        // For the native GeneratorFunction constructor, the best we can
        // do is to check its .name property.
        (ctor.displayName || ctor.name) === "GeneratorFunction"
      : false;
  };

  exports.mark = function(genFun) {
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
    } else {
      genFun.__proto__ = GeneratorFunctionPrototype;
      define(genFun, toStringTagSymbol, "GeneratorFunction");
    }
    genFun.prototype = Object.create(Gp);
    return genFun;
  };

  // Within the body of any async function, `await x` is transformed to
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
  // `hasOwn.call(value, "__await")` to determine if the yielded value is
  // meant to be awaited.
  exports.awrap = function(arg) {
    return { __await: arg };
  };

  function AsyncIterator(generator, PromiseImpl) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);
      if (record.type === "throw") {
        reject(record.arg);
      } else {
        var result = record.arg;
        var value = result.value;
        if (value &&
            typeof value === "object" &&
            hasOwn.call(value, "__await")) {
          return PromiseImpl.resolve(value.__await).then(function(value) {
            invoke("next", value, resolve, reject);
          }, function(err) {
            invoke("throw", err, resolve, reject);
          });
        }

        return PromiseImpl.resolve(value).then(function(unwrapped) {
          // When a yielded Promise is resolved, its final value becomes
          // the .value of the Promise<{value,done}> result for the
          // current iteration.
          result.value = unwrapped;
          resolve(result);
        }, function(error) {
          // If a rejected Promise was yielded, throw the rejection back
          // into the async generator function so it can be handled there.
          return invoke("throw", error, resolve, reject);
        });
      }
    }

    var previousPromise;

    function enqueue(method, arg) {
      function callInvokeWithMethodAndArg() {
        return new PromiseImpl(function(resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      }

      return previousPromise =
        // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : callInvokeWithMethodAndArg();
    }

    // Define the unified helper method that is used to implement .next,
    // .throw, and .return (see defineIteratorMethods).
    this._invoke = enqueue;
  }

  defineIteratorMethods(AsyncIterator.prototype);
  AsyncIterator.prototype[asyncIteratorSymbol] = function () {
    return this;
  };
  exports.AsyncIterator = AsyncIterator;

  // Note that simple async functions are implemented on top of
  // AsyncIterator objects; they just return a Promise for the value of
  // the final result produced by the iterator.
  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {
    if (PromiseImpl === void 0) PromiseImpl = Promise;

    var iter = new AsyncIterator(
      wrap(innerFn, outerFn, self, tryLocsList),
      PromiseImpl
    );

    return exports.isGeneratorFunction(outerFn)
      ? iter // If outerFn is a generator, return the full iterator.
      : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
  };

  function makeInvokeMethod(innerFn, self, context) {
    var state = GenStateSuspendedStart;

    return function invoke(method, arg) {
      if (state === GenStateExecuting) {
        throw new Error("Generator is already running");
      }

      if (state === GenStateCompleted) {
        if (method === "throw") {
          throw arg;
        }

        // Be forgiving, per 25.3.3.3.3 of the spec:
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
        return doneResult();
      }

      context.method = method;
      context.arg = arg;

      while (true) {
        var delegate = context.delegate;
        if (delegate) {
          var delegateResult = maybeInvokeDelegate(delegate, context);
          if (delegateResult) {
            if (delegateResult === ContinueSentinel) continue;
            return delegateResult;
          }
        }

        if (context.method === "next") {
          // Setting context._sent for legacy support of Babel's
          // function.sent implementation.
          context.sent = context._sent = context.arg;

        } else if (context.method === "throw") {
          if (state === GenStateSuspendedStart) {
            state = GenStateCompleted;
            throw context.arg;
          }

          context.dispatchException(context.arg);

        } else if (context.method === "return") {
          context.abrupt("return", context.arg);
        }

        state = GenStateExecuting;

        var record = tryCatch(innerFn, self, context);
        if (record.type === "normal") {
          // If an exception is thrown from innerFn, we leave state ===
          // GenStateExecuting and loop back for another invocation.
          state = context.done
            ? GenStateCompleted
            : GenStateSuspendedYield;

          if (record.arg === ContinueSentinel) {
            continue;
          }

          return {
            value: record.arg,
            done: context.done
          };

        } else if (record.type === "throw") {
          state = GenStateCompleted;
          // Dispatch the exception by looping back around to the
          // context.dispatchException(context.arg) call above.
          context.method = "throw";
          context.arg = record.arg;
        }
      }
    };
  }

  // Call delegate.iterator[context.method](context.arg) and handle the
  // result, either by returning a { value, done } result from the
  // delegate iterator, or by modifying context.method and context.arg,
  // setting context.delegate to null, and returning the ContinueSentinel.
  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];
    if (method === undefined) {
      // A .throw or .return when the delegate iterator has no .throw
      // method always terminates the yield* loop.
      context.delegate = null;

      if (context.method === "throw") {
        // Note: ["return"] must be used for ES3 parsing compatibility.
        if (delegate.iterator["return"]) {
          // If the delegate iterator has a return method, give it a
          // chance to clean up.
          context.method = "return";
          context.arg = undefined;
          maybeInvokeDelegate(delegate, context);

          if (context.method === "throw") {
            // If maybeInvokeDelegate(context) changed context.method from
            // "return" to "throw", let that override the TypeError below.
            return ContinueSentinel;
          }
        }

        context.method = "throw";
        context.arg = new TypeError(
          "The iterator does not provide a 'throw' method");
      }

      return ContinueSentinel;
    }

    var record = tryCatch(method, delegate.iterator, context.arg);

    if (record.type === "throw") {
      context.method = "throw";
      context.arg = record.arg;
      context.delegate = null;
      return ContinueSentinel;
    }

    var info = record.arg;

    if (! info) {
      context.method = "throw";
      context.arg = new TypeError("iterator result is not an object");
      context.delegate = null;
      return ContinueSentinel;
    }

    if (info.done) {
      // Assign the result of the finished delegate to the temporary
      // variable specified by delegate.resultName (see delegateYield).
      context[delegate.resultName] = info.value;

      // Resume execution at the desired location (see delegateYield).
      context.next = delegate.nextLoc;

      // If context.method was "throw" but the delegate handled the
      // exception, let the outer generator proceed normally. If
      // context.method was "next", forget context.arg since it has been
      // "consumed" by the delegate iterator. If context.method was
      // "return", allow the original .return call to continue in the
      // outer generator.
      if (context.method !== "return") {
        context.method = "next";
        context.arg = undefined;
      }

    } else {
      // Re-yield the result returned by the delegate method.
      return info;
    }

    // The delegate iterator is finished, so forget it and continue with
    // the outer generator.
    context.delegate = null;
    return ContinueSentinel;
  }

  // Define Generator.prototype.{next,throw,return} in terms of the
  // unified ._invoke helper method.
  defineIteratorMethods(Gp);

  define(Gp, toStringTagSymbol, "Generator");

  // A Generator should always return itself as the iterator object when the
  // @@iterator function is called on it. Some browsers' implementations of the
  // iterator prototype chain incorrectly implement this, causing the Generator
  // object to not be returned from this call. This ensures that doesn't happen.
  // See https://github.com/facebook/regenerator/issues/274 for more details.
  Gp[iteratorSymbol] = function() {
    return this;
  };

  Gp.toString = function() {
    return "[object Generator]";
  };

  function pushTryEntry(locs) {
    var entry = { tryLoc: locs[0] };

    if (1 in locs) {
      entry.catchLoc = locs[1];
    }

    if (2 in locs) {
      entry.finallyLoc = locs[2];
      entry.afterLoc = locs[3];
    }

    this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal";
    delete record.arg;
    entry.completion = record;
  }

  function Context(tryLocsList) {
    // The root entry object (effectively a try statement without a catch
    // or a finally block) gives us a place to store values thrown from
    // locations where there is no enclosing try statement.
    this.tryEntries = [{ tryLoc: "root" }];
    tryLocsList.forEach(pushTryEntry, this);
    this.reset(true);
  }

  exports.keys = function(object) {
    var keys = [];
    for (var key in object) {
      keys.push(key);
    }
    keys.reverse();

    // Rather than returning an object with a next method, we keep
    // things simple and return the next function itself.
    return function next() {
      while (keys.length) {
        var key = keys.pop();
        if (key in object) {
          next.value = key;
          next.done = false;
          return next;
        }
      }

      // To avoid creating an additional object, we just hang the .value
      // and .done properties off the next function object itself. This
      // also ensures that the minifier will not anonymize the function.
      next.done = true;
      return next;
    };
  };

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) {
        return iteratorMethod.call(iterable);
      }

      if (typeof iterable.next === "function") {
        return iterable;
      }

      if (!isNaN(iterable.length)) {
        var i = -1, next = function next() {
          while (++i < iterable.length) {
            if (hasOwn.call(iterable, i)) {
              next.value = iterable[i];
              next.done = false;
              return next;
            }
          }

          next.value = undefined;
          next.done = true;

          return next;
        };

        return next.next = next;
      }
    }

    // Return an iterator with no values.
    return { next: doneResult };
  }
  exports.values = values;

  function doneResult() {
    return { value: undefined, done: true };
  }

  Context.prototype = {
    constructor: Context,

    reset: function(skipTempReset) {
      this.prev = 0;
      this.next = 0;
      // Resetting context._sent for legacy support of Babel's
      // function.sent implementation.
      this.sent = this._sent = undefined;
      this.done = false;
      this.delegate = null;

      this.method = "next";
      this.arg = undefined;

      this.tryEntries.forEach(resetTryEntry);

      if (!skipTempReset) {
        for (var name in this) {
          // Not sure about the optimal order of these conditions:
          if (name.charAt(0) === "t" &&
              hasOwn.call(this, name) &&
              !isNaN(+name.slice(1))) {
            this[name] = undefined;
          }
        }
      }
    },

    stop: function() {
      this.done = true;

      var rootEntry = this.tryEntries[0];
      var rootRecord = rootEntry.completion;
      if (rootRecord.type === "throw") {
        throw rootRecord.arg;
      }

      return this.rval;
    },

    dispatchException: function(exception) {
      if (this.done) {
        throw exception;
      }

      var context = this;
      function handle(loc, caught) {
        record.type = "throw";
        record.arg = exception;
        context.next = loc;

        if (caught) {
          // If the dispatched exception was caught by a catch block,
          // then let that catch block handle the exception normally.
          context.method = "next";
          context.arg = undefined;
        }

        return !! caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        var record = entry.completion;

        if (entry.tryLoc === "root") {
          // Exception thrown outside of any try block that could handle
          // it, so set the completion value of the entire function to
          // throw the exception.
          return handle("end");
        }

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc");
          var hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            } else if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            }

          } else if (hasFinally) {
            if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else {
            throw new Error("try statement without catch or finally");
          }
        }
      }
    },

    abrupt: function(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev &&
            hasOwn.call(entry, "finallyLoc") &&
            this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      if (finallyEntry &&
          (type === "break" ||
           type === "continue") &&
          finallyEntry.tryLoc <= arg &&
          arg <= finallyEntry.finallyLoc) {
        // Ignore the finally entry if control is not jumping to a
        // location outside the try/catch block.
        finallyEntry = null;
      }

      var record = finallyEntry ? finallyEntry.completion : {};
      record.type = type;
      record.arg = arg;

      if (finallyEntry) {
        this.method = "next";
        this.next = finallyEntry.finallyLoc;
        return ContinueSentinel;
      }

      return this.complete(record);
    },

    complete: function(record, afterLoc) {
      if (record.type === "throw") {
        throw record.arg;
      }

      if (record.type === "break" ||
          record.type === "continue") {
        this.next = record.arg;
      } else if (record.type === "return") {
        this.rval = this.arg = record.arg;
        this.method = "return";
        this.next = "end";
      } else if (record.type === "normal" && afterLoc) {
        this.next = afterLoc;
      }

      return ContinueSentinel;
    },

    finish: function(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) {
          this.complete(entry.completion, entry.afterLoc);
          resetTryEntry(entry);
          return ContinueSentinel;
        }
      }
    },

    "catch": function(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if (record.type === "throw") {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }

      // The context.catch method must only be called with a location
      // argument that corresponds to a known catch block.
      throw new Error("illegal catch attempt");
    },

    delegateYield: function(iterable, resultName, nextLoc) {
      this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      };

      if (this.method === "next") {
        // Deliberately forget the last sent value so that we don't
        // accidentally pass it on to the delegate.
        this.arg = undefined;
      }

      return ContinueSentinel;
    }
  };

  // Regardless of whether this script is executing as a CommonJS module
  // or not, return the runtime object so that we can declare the variable
  // regeneratorRuntime in the outer scope, which allows this module to be
  // injected easily by `bin/regenerator --include-runtime script.js`.
  return exports;

}(
  // If this script is executing as a CommonJS module, use module.exports
  // as the regeneratorRuntime namespace. Otherwise create a new empty
  // object. Either way, the resulting object will be used to initialize
  // the regeneratorRuntime variable at the top of this file.
  typeof module === "object" ? module.exports : {}
));

try {
  regeneratorRuntime = runtime;
} catch (accidentalStrictMode) {
  // This module should not be running in strict mode, so the above
  // assignment should always work unless something is misconfigured. Just
  // in case runtime.js accidentally runs in strict mode, we can escape
  // strict mode using a global Function call. This could conceivably fail
  // if a Content Security Policy forbids using Function, but in that case
  // the proper solution is to fix the accidental strict mode problem. If
  // you've misconfigured your bundler to force strict mode and applied a
  // CSP to forbid Function, and you're not willing to fix either of those
  // problems, please detail your unique predicament in a GitHub issue.
  Function("r", "regeneratorRuntime = r")(runtime);
}

},{}],25:[function(require,module,exports){
(function (setImmediate,clearImmediate){(function (){
var nextTick = require('process/browser.js').nextTick;
var apply = Function.prototype.apply;
var slice = Array.prototype.slice;
var immediateIds = {};
var nextImmediateId = 0;

// DOM APIs, for completeness

exports.setTimeout = function() {
  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);
};
exports.setInterval = function() {
  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);
};
exports.clearTimeout =
exports.clearInterval = function(timeout) { timeout.close(); };

function Timeout(id, clearFn) {
  this._id = id;
  this._clearFn = clearFn;
}
Timeout.prototype.unref = Timeout.prototype.ref = function() {};
Timeout.prototype.close = function() {
  this._clearFn.call(window, this._id);
};

// Does not start the time, just sets up the members needed.
exports.enroll = function(item, msecs) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = msecs;
};

exports.unenroll = function(item) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = -1;
};

exports._unrefActive = exports.active = function(item) {
  clearTimeout(item._idleTimeoutId);

  var msecs = item._idleTimeout;
  if (msecs >= 0) {
    item._idleTimeoutId = setTimeout(function onTimeout() {
      if (item._onTimeout)
        item._onTimeout();
    }, msecs);
  }
};

// That's not how node.js implements it but the exposed api is the same.
exports.setImmediate = typeof setImmediate === "function" ? setImmediate : function(fn) {
  var id = nextImmediateId++;
  var args = arguments.length < 2 ? false : slice.call(arguments, 1);

  immediateIds[id] = true;

  nextTick(function onNextTick() {
    if (immediateIds[id]) {
      // fn.call() is faster so we optimize for the common use-case
      // @see http://jsperf.com/call-apply-segu
      if (args) {
        fn.apply(null, args);
      } else {
        fn.call(null);
      }
      // Prevent ids from leaking
      exports.clearImmediate(id);
    }
  });

  return id;
};

exports.clearImmediate = typeof clearImmediate === "function" ? clearImmediate : function(id) {
  delete immediateIds[id];
};
}).call(this)}).call(this,require("timers").setImmediate,require("timers").clearImmediate)

},{"process/browser.js":23,"timers":25}],26:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AbstractView = /*#__PURE__*/function (_EventTarget) {
  (0, _inherits2["default"])(AbstractView, _EventTarget);

  var _super = _createSuper(AbstractView);

  function AbstractView() {
    var _this;

    (0, _classCallCheck2["default"])(this, AbstractView);
    _this = _super.call(this);
    _this.DOM = {};
    _this.DOM.gameBoard = document.querySelector("game-board");
    _this.DOM.questionPane = document.querySelector("#question-pane");
    _this.DOM.multipleChoice = document.querySelector("#multiple-choice-present");
    _this.DOM.playing_indicator = document.querySelector("#playing");
    _this.DOM.timer = document.querySelector("trivia-timer");
    _this.DOM.menuIndicator = document.querySelector("#menu-indicator");
    _this.DOM.menuArea = document.querySelector("#menu-area");
    _this.DOM.menuLogout = document.querySelector("#menu-logout");
    _this.DOM.playerContainer = document.querySelector("#player-container-left");
    return _this;
  }

  (0, _createClass2["default"])(AbstractView, [{
    key: "startTimer",
    value: function startTimer(update) {
      this.DOM.timer.show(update.time);
    }
  }, {
    key: "updateTimer",
    value: function updateTimer(update) {
      if (this.lastUpdate.model.players.length <= 0) return;
      this.DOM.timer.show();
      this.DOM.timer.set(update.time);

      if (this.lastUpdate.state === 6 || this.lastUpdate.state === 8) {
        var currentName = this.lastUpdate.model.players[0].name;
        var currentPanel = this.DOM.playerContainer.topPlayer();
        currentPanel.setTimer(update.progress);
      }
    }
  }, {
    key: "updateModel",
    value: function updateModel(update) {
      this.fillPlayers(update);
      this.lastUpdate = update;
      this.DOM.multipleChoice.hide();

      switch (update.state) {
        case 0:
          break;

        case 1:
          this.DOM.multipleChoice.hide();
          this.DOM.gameBoard.hide();
          this.DOM.questionPane.show();
          this.DOM.questionPane.setText(update.model.round.question);
          this.DOM.timer.hide();
          break;

        case 2:
          this.DOM.questionPane.hide();
          this.DOM.multipleChoice.show();
          this.DOM.multipleChoice.setMode("show");
          this.DOM.multipleChoice.querySelector(".inner.total").hide();
          this.DOM.multipleChoice.querySelector(".inner.bonus > .amount").text = update.model.round.bonus;

          for (var i = 0; i < 6; i++) {
            this.DOM.multipleChoice.querySelector("[data-index=\"".concat(i, "\"] check-box")).checked = false;
            this.DOM.multipleChoice.setAnswerText(i, update.model.round.answers[i]);
            this.DOM.multipleChoice.querySelector("[data-index=\"".concat(i, "\"] check-box")).locked = false;
          }

          break;

        case 3:
          this.DOM.questionPane.hide();
          this.DOM.multipleChoice.show();
          this.DOM.multipleChoice.setMode("show");

          for (var _i = 0; _i < 6; _i++) {
            this.DOM.multipleChoice.setAnswerText(_i, update.model.round.answers[_i]);
            this.DOM.multipleChoice.querySelector("[data-index=\"".concat(_i, "\"] check-box")).checked = update.model.round.values[_i];
            this.DOM.multipleChoice.querySelector("[data-index=\"".concat(_i, "\"] check-box")).locked = true;
          }

          break;

        case 4:
          this.DOM.gameBoard.show();
          this.fillJeopardyCategories(update);
          this.fillJeopardyCells(update);
          this.DOM.timer.hide();
          break;

        case 5:
          this.DOM.gameBoard.hide();
          this.DOM.questionPane.show();
          this.DOM.questionPane.setText(update.model.round.question);
          this.DOM.timer.hide();
          break;

        case 6:
          this.DOM.gameBoard.hide();
          this.DOM.questionPane.show();
          this.DOM.questionPane.setText(update.model.round.question);
          this.DOM.playerContainer.moveToTop(update.model.round.current_player);
          break;

        case 7:
          this.DOM.gameBoard.hide();
          this.DOM.questionPane.show();
          this.DOM.questionPane.setText(update.model.round.question);
          break;

        case 8:
          this.DOM.gameBoard.hide();
          this.DOM.questionPane.show();
          this.DOM.questionPane.setText(update.model.round.question);
          this.DOM.playerContainer.moveToTop(update.model.round.current_player);
          break;

        case 9:
          this.DOM.gameBoard.hide();
          this.DOM.questionPane.show();
          this.DOM.questionPane.setText(update.model.round.answer);
          this.DOM.timer.hide();
          break;

        case 10:
          this.DOM.gameBoard.hide();
          this.DOM.questionPane.show();
          this.DOM.questionPane.setText("GAME OVER");
          this.DOM.timer.hide();
          break;

        default:
          break;
      }
    }
  }, {
    key: "fillPlayers",
    value: function fillPlayers(update) {
      this.DOM.playerContainer.clear();
      if (update.model.players.length <= 0) return;

      var _iterator = _createForOfIteratorHelper(update.model.players),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var player = _step.value;
          this.DOM.playerContainer.addPlayer(player.name, player.score);

          if (update.model.round && update.model.round.style === 'j') {
            // TODO remove magic string
            if (update.model.round.current_player === player.name) {
              this.DOM.playerContainer.getPlayer(player.name).highlight = true;
              this.DOM.playerContainer.getPlayer(player.name).active = true;
            } else if (update.model.round.spentPlayers.indexOf(player.name) !== -1) {
              this.DOM.playerContainer.getPlayer(player.name).dim = true;
              window.x = this.DOM.playerContainer.getPlayer(player.name);
            }
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }, {
    key: "fillJeopardyCategories",
    value: function fillJeopardyCategories(update) {
      for (var i = 0; i < 6; i++) {
        var category = update.model.round.categories[i];
        this.DOM.gameBoard.setHeader(i, category["text"], category["font-size"], true);
      }
    }
  }, {
    key: "fillJeopardyCells",
    value: function fillJeopardyCells(update) {
      var round = update.model.round;

      for (var c = 0; c < 6; c++) {
        for (var r = 0; r < 5; r++) {
          if (round.spent[c][r]) {
            this.DOM.gameBoard.setCell(r, c, "");
          } else {
            this.DOM.gameBoard.setCell(r, c, round.values[c][r]);
          }
        }
      }
    }
  }]);
  return AbstractView;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(EventTarget));

module.exports = AbstractView;

},{"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/helpers/wrapNativeSuper":21}],27:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AbstractView2 = _interopRequireDefault(require("./AbstractView.js"));

var _ViewEvent = _interopRequireDefault(require("./ViewEvent.js"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * HostPortalView has methods to control the visibility/details of DOM objects.
 * This class will fire "click" events when buttons are clicked, with the data
 * in the format that will get sent to the server.  The HostPortalController
 * takes care of the communication details.
 *
 * The cell-select event is caught and re-dispatched.
 */
var HostPortalView = /*#__PURE__*/function (_AbstractView) {
  (0, _inherits2["default"])(HostPortalView, _AbstractView);

  var _super = _createSuper(HostPortalView);

  function HostPortalView() {
    var _this;

    (0, _classCallCheck2["default"])(this, HostPortalView);
    _this = _super.call(this);
    _this.DOM.acceptButton = document.querySelector("#accept");
    _this.DOM.rejectButton = document.querySelector("#reject");
    _this.DOM.backButton = document.querySelector("#back");
    _this.DOM.continueButton = document.querySelector("#continue");
    _this.DOM.nextButton = document.querySelector("#next");
    _this.DOM.startButton = document.querySelector("#start");
    _this.DOM.answer = document.querySelector("#answer");

    _this.DOM.acceptButton.addEventListener("click", function (e) {
      return _this.dispatchEvent(new _ViewEvent["default"]("accept"));
    });

    _this.DOM.rejectButton.addEventListener("click", function (e) {
      return _this.dispatchEvent(new _ViewEvent["default"]("reject"));
    });

    _this.DOM.backButton.addEventListener("click", function (e) {
      return _this.dispatchEvent(new _ViewEvent["default"]("back"));
    });

    _this.DOM.continueButton.addEventListener("click", function (e) {
      return _this.dispatchEvent(new _ViewEvent["default"]("continue"));
    });

    _this.DOM.nextButton.addEventListener("click", function (e) {
      return _this.dispatchEvent(new _ViewEvent["default"]("next"));
    });

    _this.DOM.startButton.addEventListener("click", function (e) {
      return _this.dispatchEvent(new _ViewEvent["default"]("start"));
    });

    _this.DOM.gameBoard.addEventListener("cell-select", function (e) {
      return _this.dispatchEvent(new _ViewEvent["default"]("select", e.detail));
    });

    return _this;
  }

  (0, _createClass2["default"])(HostPortalView, [{
    key: "updateModel",
    value: function updateModel(update) {
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(HostPortalView.prototype), "updateModel", this).call(this, update);
      this.DOM.acceptButton.hide();
      this.DOM.rejectButton.hide();
      this.DOM.backButton.hide();
      this.DOM.continueButton.hide();
      this.DOM.nextButton.hide();
      this.DOM.startButton.hide();
      this.DOM.answer.hide();
      this.DOM.continueButton.classList.remove("center");
      this.DOM.continueButton.classList.add("right");

      switch (update.state) {
        case 0:
          this.DOM.startButton.show();
          break;

        case 1:
          this.DOM.continueButton.show();
          this.DOM.continueButton.classList.add("center");
          this.DOM.continueButton.classList.remove("right");
          break;

        case 2:
          this.DOM.continueButton.show(); // todo remove

          break;

        case 3:
          this.DOM.continueButton.show();
          this.DOM.continueButton.classList.add("center");
          this.DOM.continueButton.classList.remove("right");
          break;

        case 4:
          break;

        case 5:
          this.DOM.backButton.show();
          this.DOM.continueButton.show();
          this.DOM.continueButton.classList.add("right");
          this.DOM.continueButton.classList.remove("center");
          this.DOM.answer.show();
          break;

        case 6:
          this.DOM.acceptButton.show();
          this.DOM.rejectButton.show();
          this.DOM.timer.show();
          this.DOM.answer.show();
          break;

        case 7:
          break;

        case 8:
          this.DOM.acceptButton.show();
          this.DOM.rejectButton.show();
          this.DOM.answer.show();
          break;

        case 9:
          this.DOM.continueButton.show();
          this.DOM.continueButton.classList.remove("right");
          this.DOM.continueButton.classList.add("center");
          break;

        default:
          break;
      }
    }
  }, {
    key: "updateAnswer",
    value: function updateAnswer(answer) {
      this.DOM.answer.text = answer;
    }
  }]);
  return HostPortalView;
}(_AbstractView2["default"]);

var _default = HostPortalView;
exports["default"] = _default;

},{"./AbstractView.js":26,"./ViewEvent.js":29,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17}],28:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var PortalController = /*#__PURE__*/function () {
  function PortalController(ws, view) {
    var _this = this;

    (0, _classCallCheck2["default"])(this, PortalController);
    this.ws = ws;
    this.view = view;
    this.name = "";
    this.ws.addEventListener('message', function (event) {
      return _this.process(JSON.parse(event.data));
    });
    this.ws.addEventListener('close', function (event) {
      return _this.onClose(event);
    });
    this.view.addEventListener('click', function (event) {
      return _this.send(event.detail);
    });
    this.view.addEventListener('cell-select', function (event) {
      return _this.send(event.detail);
    });
  }
  /**
   * Incoming messages get processed here.
   * @param message
   */


  (0, _createClass2["default"])(PortalController, [{
    key: "process",
    value: function process(message) {
      if (message.action !== "ping" && message.action !== "update_timer") {
        console.log(message);
        window.lastMessage = message;
      }

      switch (message.action) {
        case "connection_established":
          this.name = message.data.name;
          if (this.view.setName) this.view.setName(message.data.name);
          break;

        case "provide_answer":
          this.view.updateAnswer(message.data.answer);
          break;

        case "update_model":
          this.view.updateModel(message.data);
          break;

        case "start_timer":
          this.view.startTimer(message.data);
          break;

        case "update_timer":
          this.view.updateTimer(message.data);
          break;

        case "stop_timer":
          break;
      }
    }
  }, {
    key: "onClose",
    value: function onClose(event) {
      if (this.name === "@HOST") {
        window.location = "host.ejs";
      } else {
        window.location = "contestant_join.ejs";
      }
    }
  }, {
    key: "send",
    value: function send(msg) {
      console.log("send: ".concat(JSON.stringify(msg)));
      this.ws.send(JSON.stringify(msg));
    }
  }]);
  return PortalController;
}();

var _default = PortalController;
exports["default"] = _default;

},{"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/interopRequireDefault":14}],29:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ViewEvent = /*#__PURE__*/function (_CustomEvent) {
  (0, _inherits2["default"])(ViewEvent, _CustomEvent);

  var _super = _createSuper(ViewEvent);

  function ViewEvent(action) {
    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    (0, _classCallCheck2["default"])(this, ViewEvent);
    return _super.call(this, 'click', {
      detail: {
        action: action,
        data: data
      }
    });
  }

  return ViewEvent;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(CustomEvent));

var _default = ViewEvent;
exports["default"] = _default;

},{"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/helpers/wrapNativeSuper":21}],30:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

function connectWebsocket() {
  var url = window.origin;

  if (url.startsWith("http:")) {
    url = "ws" + url.substr(4) + "/game-service.ws";
  } else {
    url = "wss" + url.substr(5) + "/game-service.ws";
  }

  return new Promise(function (resolve, reject) {
    var socket = new WebSocket(url);
    socket.addEventListener('error', function (event) {
      return reject(event);
    });
    socket.addEventListener('open', function (event) {
      return resolve(socket);
    });
  });
}

var _default = connectWebsocket;
exports["default"] = _default;

},{}],31:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _FileOps = _interopRequireDefault(require("./modules/FileOps.js"));

var _Authenticate = _interopRequireDefault(require("./modules/Authenticate.js"));

var _HostPortalView = _interopRequireDefault(require("./HostPortalView.js"));

var _PortalController = _interopRequireDefault(require("./PortalController"));

var _connectWebsocket = _interopRequireDefault(require("./connectWebsocket.js"));

var _GameManagerService = _interopRequireDefault(require("./services/GameManagerService"));

var _constants = _interopRequireDefault(require("../server/constants.js"));

var _SetupSizeListener = _interopRequireDefault(require("./modules/SetupSizeListener"));

// noinspection SpellCheckingInspection
var gameManagerService = new _GameManagerService["default"]();
var fileOps = new _FileOps["default"]();
var model = null;
var questionPane = null;
var editorPane = null;
window.onload = /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
  var start, hostView, ws, end, time;
  return _regenerator["default"].wrap(function _callee$(_context) {
    while (1) {
      switch (_context.prev = _context.next) {
        case 0:
          start = new Date();
          hostView = new _HostPortalView["default"]();
          (0, _SetupSizeListener["default"])();
          _context.prev = 3;
          _context.next = 6;
          return new _Authenticate["default"]().loadClient();

        case 6:
          _context.next = 8;
          return fileOps.loadClient();

        case 8:
          _context.next = 10;
          return sendTokenToServer();

        case 10:
          _context.next = 12;
          return (0, _connectWebsocket["default"])();

        case 12:
          ws = _context.sent;
          new _PortalController["default"](ws, hostView);
          document.querySelector("menu-container").addEventListener("add-players", function () {
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Adam"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Bert"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Carol"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Dave"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Edith"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Fran"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Garth"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Herbert"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Ira"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Jill"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Keith"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Lisa"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Matt"
              }
            }));
          });
          document.querySelector("menu-container").addEventListener("next", function () {
            ws.send(JSON.stringify({
              action: "next_round"
            }));
          });
          document.querySelector("menu-container").addEventListener("prev", function () {
            ws.send(JSON.stringify({
              action: "prev_round"
            }));
          });
          document.querySelector("menu-container").addEventListener("terminate", function () {
            var token = gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token;
            gameManagerService.terminate(token);
            window.location = _constants["default"].locations.HOST;
          });

          window.addPlayers = function () {
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Adam"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Bert"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Carol"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Dave"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Edith"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Fran"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Garth"
              }
            }));
            ws.send(JSON.stringify({
              action: "join",
              data: {
                name: "Herbert"
              }
            }));
          };

          _context.next = 24;
          break;

        case 21:
          _context.prev = 21;
          _context.t0 = _context["catch"](3);
          console.log(_context.t0);

        case 24:
          end = new Date();
          time = end - start;
          console.log("Load Time " + time + " ms");

        case 27:
        case "end":
          return _context.stop();
      }
    }
  }, _callee, null, [[3, 21]]);
}));

function sendTokenToServer() {
  return new Promise(function (resolve, reject) {
    var token = gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token;
    var xhttp = new XMLHttpRequest();
    xhttp.addEventListener("load", function (event) {
      var response = JSON.parse(xhttp.responseText);
      if (response.result === "success") resolve();else reject(new Error("token rejected"));
    });
    xhttp.open("POST", "connect-host");
    xhttp.setRequestHeader("Content-type", "application/json");
    xhttp.send(JSON.stringify({
      token: token
    }));
  });
}

},{"../server/constants.js":47,"./HostPortalView.js":27,"./PortalController":28,"./connectWebsocket.js":30,"./modules/Authenticate.js":32,"./modules/FileOps.js":33,"./modules/SetupSizeListener":34,"./services/GameManagerService":46,"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/regenerator":22}],32:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

// see https://developers.google.com/drive/api/v3/quickstart/js?hl=en
var Authenticate = /*#__PURE__*/function () {
  function Authenticate() {
    (0, _classCallCheck2["default"])(this, Authenticate);
    Object.assign(this, require("./googleFields.js"));
  }

  (0, _createClass2["default"])(Authenticate, [{
    key: "loadClient",
    value: function loadClient() {
      var _this = this;

      return new Promise(function (resolve, reject) {
        gapi.load('client:auth2', function () {
          return _this.__initClient(resolve, reject);
        });
      });
    }
  }, {
    key: "__initClient",
    value: function __initClient(resolve, reject) {
      gapi.client.init({
        apiKey: this.developerKey,
        clientId: this.clientId,
        discoveryDocs: this.discoveryDocs,
        scope: this.scope
      }).then(function (result) {
        resolve();
      }, function (error) {
        console.log("ERROR INIT");
        console.log(error);
        reject(error);
      });
    }
  }, {
    key: "isAuthorized",
    value: function isAuthorized() {
      var user = gapi.auth2.getAuthInstance().currentUser.get();
      return user.hasGrantedScopes(this.scope);
    }
  }, {
    key: "signIn",
    value: function signIn() {
      gapi.auth2.getAuthInstance().signIn();
    }
  }, {
    key: "signOut",
    value: function signOut() {
      gapi.auth2.getAuthInstance().signOut();
    }
  }]);
  return Authenticate;
}();

module.exports = Authenticate;

},{"./googleFields.js":35,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/interopRequireDefault":14}],33:[function(require,module,exports){
"use strict"; // see https://developers.google.com/drive/api/v3/quickstart/js?hl=en

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var FileOps = /*#__PURE__*/function () {
  function FileOps() {
    (0, _classCallCheck2["default"])(this, FileOps);
  }

  (0, _createClass2["default"])(FileOps, [{
    key: "load",
    value: function () {
      var _load = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return this.loadClient();

              case 2:
                _context.next = 4;
                return this.loadDrive();

              case 4:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function load() {
        return _load.apply(this, arguments);
      }

      return load;
    }()
  }, {
    key: "loadClient",
    value: function loadClient() {
      return new Promise(function (resolve, reject) {
        gapi.load('client', function () {
          return resolve();
        });
      });
    }
  }, {
    key: "loadDrive",
    value: function loadDrive() {
      return new Promise(function (resolve, reject) {
        gapi.client.load('drive', 'v3', resolve());
      });
    }
  }, {
    key: "create",
    value: function () {
      var _create = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2() {
        var filename,
            _args2 = arguments;
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                filename = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : "Game Name.json";
                return _context2.abrupt("return", new Promise(function (resolve, reject) {
                  gapi.client.drive.files.create({
                    name: filename,
                    parents: ['appDataFolder'],
                    fields: "id"
                  }).then(function (res) {
                    resolve(res.result.id);
                  }, function (error) {
                    reject(error);
                  });
                }));

              case 2:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2);
      }));

      function create() {
        return _create.apply(this, arguments);
      }

      return create;
    }()
  }, {
    key: "delete",
    value: function () {
      var _delete2 = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee3(fileId) {
        return _regenerator["default"].wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                return _context3.abrupt("return", new Promise(function (resolve, reject) {
                  gapi.client.drive.files["delete"]({
                    fileId: fileId
                  }).then(function (res) {
                    resolve(res.result);
                  }, function (error) {
                    reject(error);
                  });
                }));

              case 1:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3);
      }));

      function _delete(_x) {
        return _delete2.apply(this, arguments);
      }

      return _delete;
    }()
  }, {
    key: "list",
    value: function () {
      var _list = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee4() {
        return _regenerator["default"].wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                return _context4.abrupt("return", new Promise(function (resolve, reject) {
                  gapi.client.drive.files.list({
                    // q: `name contains '.json'`,
                    spaces: 'appDataFolder',
                    fields: 'files/name,files/id,files/modifiedTime'
                  }).then(function (res) {
                    resolve(res.result.files);
                  }, function (error) {
                    reject(error);
                  });
                }));

              case 1:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4);
      }));

      function list() {
        return _list.apply(this, arguments);
      }

      return list;
    }()
  }, {
    key: "get",
    value: function () {
      var _get = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee5(fileId) {
        return _regenerator["default"].wrap(function _callee5$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                return _context5.abrupt("return", new Promise(function (resolve, reject) {
                  gapi.client.drive.files.get({
                    fileId: fileId,
                    alt: 'media'
                  }).then(function (res) {
                    resolve(res);
                  }, function (error) {
                    console.log(error);
                    reject(error.message);
                  });
                }));

              case 1:
              case "end":
                return _context5.stop();
            }
          }
        }, _callee5);
      }));

      function get(_x2) {
        return _get.apply(this, arguments);
      }

      return get;
    }()
  }, {
    key: "setBody",
    value: function () {
      var _setBody = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee6(fileId, body) {
        return _regenerator["default"].wrap(function _callee6$(_context6) {
          while (1) {
            switch (_context6.prev = _context6.next) {
              case 0:
                return _context6.abrupt("return", new Promise(function (resolve, reject) {
                  gapi.client.request({
                    path: "upload/drive/v3/files/" + fileId,
                    method: "PATCH",
                    params: {
                      uploadType: "media"
                    },
                    headers: {
                      "Content-Type": "application/json"
                    },
                    body: body
                  }).then(function (res) {
                    resolve(JSON.parse(res.body));
                  }, function (error) {
                    console.log(error);
                    reject(error.message);
                  });
                }));

              case 1:
              case "end":
                return _context6.stop();
            }
          }
        }, _callee6);
      }));

      function setBody(_x3, _x4) {
        return _setBody.apply(this, arguments);
      }

      return setBody;
    }()
  }, {
    key: "rename",
    value: function () {
      var _rename = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee7(fileId, filename) {
        return _regenerator["default"].wrap(function _callee7$(_context7) {
          while (1) {
            switch (_context7.prev = _context7.next) {
              case 0:
                return _context7.abrupt("return", new Promise(function (resolve, reject) {
                  gapi.client.drive.files.update({
                    fileId: fileId,
                    name: filename
                  }).then(function (res) {
                    resolve(JSON.parse(res.body));
                  }, function (error) {
                    console.log(error);
                    reject(error.message);
                  });
                }));

              case 1:
              case "end":
                return _context7.stop();
            }
          }
        }, _callee7);
      }));

      function rename(_x5, _x6) {
        return _rename.apply(this, arguments);
      }

      return rename;
    }()
  }]);
  return FileOps;
}();

var _default = FileOps;
exports["default"] = _default;

},{"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/regenerator":22}],34:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

function setupSizeListener() {
  function reportWindowSize() {
    var pageContainer = document.querySelector("#page-container");
    var ratio = window.innerWidth / window.innerHeight;

    if (ratio >= 16 / 9) {
      pageContainer.classList.add("aspect-fit");
      pageContainer.classList.remove("shrink-horz");
    } else {
      pageContainer.classList.remove("aspect-fit");
      pageContainer.classList.add("shrink-horz");
    }
  }

  window.addEventListener("resize", function (e) {
    return reportWindowSize();
  });
  reportWindowSize();
}

var _default = setupSizeListener;
exports["default"] = _default;

},{}],35:[function(require,module,exports){
"use strict";

module.exports = {
  // The Browser API key obtained from the Google API Console.
  developerKey: 'AIzaSyABcdLmT6HH_7Go82q_IBGI3jm6UL4w4Q0',
  // The Client ID obtained from the Google API Console. Replace with your own Client ID.
  clientId: "158823134681-98bgkangoltk636ukf8pofeis7pa7jbk.apps.googleusercontent.com",
  // Replace with your own project number from console.developers.google.com.
  appId: "158823134681",
  // Array of API discovery doc URLs for APIs used by the quickstart
  discoveryDocs: ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],
  // Scope to use to access user's Drive items.
  scope: "https://www.googleapis.com/auth/drive.file"
};

},{}],36:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var ValueUpdate = /*#__PURE__*/function (_CustomEvent) {
  (0, _inherits2["default"])(ValueUpdate, _CustomEvent);

  var _super = _createSuper(ValueUpdate);

  function ValueUpdate(value) {
    (0, _classCallCheck2["default"])(this, ValueUpdate);
    return _super.call(this, 'value-update', {
      detail: {
        value: value
      }
    });
  }

  return ValueUpdate;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(CustomEvent));

var CheckBox = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(CheckBox, _NidgetElement);

  var _super2 = _createSuper(CheckBox);

  function CheckBox() {
    (0, _classCallCheck2["default"])(this, CheckBox);
    return _super2.apply(this, arguments);
  }

  (0, _createClass2["default"])(CheckBox, [{
    key: "connectedCallback",
    value: function () {
      var _connectedCallback = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        var _this = this;

        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(CheckBox.prototype), "connectedCallback", this).call(this);

              case 2:
                this.addEventListener("click", function () {
                  console.log((0, _typeof2["default"])(_this.locked));
                  if (_this.locked) return;

                  _this.toggle();
                });

              case 3:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function connectedCallback() {
        return _connectedCallback.apply(this, arguments);
      }

      return connectedCallback;
    }()
  }, {
    key: "toggle",
    value: function toggle() {
      var dispatch = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      if (this.checked === 'true') this.setChecked('false', dispatch);else this.setChecked('true', dispatch);
    }
  }, {
    key: "checked",
    get: function get() {
      if (!this.hasAttribute(CheckBox.CHECKED_ATTRIBUTE)) {
        this.setAttribute(CheckBox.CHECKED_ATTRIBUTE, 'false');
      }

      return this.getAttribute(CheckBox.CHECKED_ATTRIBUTE);
    },
    set: function set(value) {
      if (value === this.checked) return;
      this.setAttribute(CheckBox.CHECKED_ATTRIBUTE, value);
      this.dispatchEvent(new ValueUpdate(value));
    }
  }, {
    key: "setChecked",
    value: function setChecked(value) {
      var dispatch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      if (value === this.checked) return;
      this.setAttribute(CheckBox.CHECKED_ATTRIBUTE, value);
      if (dispatch) this.dispatchEvent(new ValueUpdate(value));
    }
    /**
     * Set the locked attribute.
     * If true prevents changing value.
     * @param value
     */

  }, {
    key: "locked",
    get:
    /**
     * Retrieve the locked attribute.
     */
    function get() {
      return this.getAttribute(CheckBox.LOCKED_ATTRIBUTE) === "true";
    },
    set: function set(value) {
      this.setAttribute(CheckBox.LOCKED_ATTRIBUTE, value);
    }
  }]);
  return CheckBox;
}(NidgetElement);

CheckBox.CHECKED_ATTRIBUTE = "checked";
CheckBox.LOCKED_ATTRIBUTE = "locked";
window.customElements.define('check-box', CheckBox);
module.exports = CheckBox;

},{"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/helpers/typeof":20,"@babel/runtime/helpers/wrapNativeSuper":21,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],37:[function(require,module,exports){
"use strict";
/** View-Controller for the HTML game board element
    This is the classical "Jeopardy" type board
    This is model agnostic, see EditorPane.js for model methods
    generates the following events:
        cell-select (row, col): when a user clicks a cell
        header-update (value, col, fontsize) : when the header text changes (and blurs)
 **/

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var CellSelectEvent = /*#__PURE__*/function (_CustomEvent) {
  (0, _inherits2["default"])(CellSelectEvent, _CustomEvent);

  var _super = _createSuper(CellSelectEvent);

  function CellSelectEvent(row, col) {
    (0, _classCallCheck2["default"])(this, CellSelectEvent);
    return _super.call(this, 'cell-select', {
      detail: {
        row: row,
        col: col
      }
    });
  }

  return CellSelectEvent;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(CustomEvent));

var HeaderUpdateEvent = /*#__PURE__*/function (_CustomEvent2) {
  (0, _inherits2["default"])(HeaderUpdateEvent, _CustomEvent2);

  var _super2 = _createSuper(HeaderUpdateEvent);

  function HeaderUpdateEvent(col, value, fontSize) {
    (0, _classCallCheck2["default"])(this, HeaderUpdateEvent);
    return _super2.call(this, 'header-update', {
      detail: {
        value: value,
        col: col,
        fontSize: fontSize
      }
    });
  }

  return HeaderUpdateEvent;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(CustomEvent));

var GameBoard = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(GameBoard, _NidgetElement);

  var _super3 = _createSuper(GameBoard);

  function GameBoard() {
    (0, _classCallCheck2["default"])(this, GameBoard);
    return _super3.call(this, "game-board-template");
  }

  (0, _createClass2["default"])(GameBoard, [{
    key: "ready",
    value: function () {
      var _ready = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        var _this = this;

        var _iterator, _step, _loop2, _loop, col;

        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(GameBoard.prototype), "ready", this).call(this);

              case 2:
                _iterator = _createForOfIteratorHelper(this.querySelectorAll(".text-buffer"));

                try {
                  _loop2 = function _loop2() {
                    var element = _step.value;
                    var value = element.querySelector(".value");
                    element.addEventListener("click", function (e) {
                      if (value.innerHTML === "") value.innerHTML = " "; // makes the cursor show up when focused

                      value.focus();
                    });
                  };

                  for (_iterator.s(); !(_step = _iterator.n()).done;) {
                    _loop2();
                  }
                } catch (err) {
                  _iterator.e(err);
                } finally {
                  _iterator.f();
                }

                _loop = function _loop(col) {
                  _this.getHeader(col).addEventListener("input", function (event) {
                    event.target.fitText.notify();
                  });

                  _this.getHeader(col).addEventListener("blur", function (event) {
                    event.target.innerHTML = event.target.text.trim();
                    event.target.fitText.notify(function (fontSize) {
                      _this.dispatchEvent(new HeaderUpdateEvent(col, _this.getHeader(col).text, fontSize));
                    });
                  });

                  var _loop3 = function _loop3(row) {
                    _this.getCell(row, col).addEventListener("click", function () {
                      _this.dispatchEvent(new CellSelectEvent(row, col));
                    });
                  };

                  for (var row = 0; row < 5; row++) {
                    _loop3(row);
                  }
                };

                for (col = 0; col < 6; col++) {
                  _loop(col);
                }

              case 6:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function ready() {
        return _ready.apply(this, arguments);
      }

      return ready;
    }()
    /**
     * Set the category text.
     * @param index The column to set
     * @param value The text to set it to.
     * @param fontSize
     * @param lock turn off content-editable, default false (on).
     */

  }, {
    key: "setHeader",
    value: function setHeader(index, value, fontSize) {
      var lock = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      var element = this.getHeader(index);
      element.text = value;
      element.style.fontSize = fontSize;

      if (lock) {
        element.setAttribute("contentEditable", "false");
      }
    }
    /**
     * Retrieve the header html element
     * @param index
     * @param value
     */

  }, {
    key: "getHeader",
    value: function getHeader(index) {
      if (typeof index !== "number" || index < 0 || index > 6) throw new Error("Invalid index: " + index);
      var selector = "[data-row='h'][data-col='".concat(index, "'] .value");
      return this.querySelector(selector);
    }
    /**
     * Set the value of a non-category cell.
     * @param row
     * @param col
     * @param value
     */

  }, {
    key: "setCell",
    value: function setCell(row, col) {
      var value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "";
      this.getCell(row, col).textContent = value;
    }
  }, {
    key: "getCell",
    value: function getCell(row, col) {
      var selector = "[data-row=\"".concat(row, "\"][data-col=\"").concat(col, "\"] .value");
      return this.querySelector(selector);
    }
  }, {
    key: "setComplete",
    value: function setComplete(row, col, value) {
      if (typeof row !== "number" || row < 0 || row > 6) throw new Error("Invalid row: " + row);
      if (typeof col !== "number" || col < 0 || col > 5) throw new Error("Invalid col: " + col);
      this.getCell(row, col).setAttribute("data-complete", value);
    }
  }]);
  return GameBoard;
}(NidgetElement);

window.customElements.define('game-board', GameBoard);
module.exports = GameBoard;

},{"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/helpers/wrapNativeSuper":21,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],38:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var MenuContainer = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(MenuContainer, _NidgetElement);

  var _super = _createSuper(MenuContainer);

  function MenuContainer(props) {
    (0, _classCallCheck2["default"])(this, MenuContainer);
    return _super.call(this, "menu-container-template");
  }

  (0, _createClass2["default"])(MenuContainer, [{
    key: "ready",
    value: function () {
      var _ready = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        var _this = this;

        var _iterator, _step, _loop;

        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(MenuContainer.prototype), "ready", this).call(this);

              case 2:
                this.querySelector("#menu-icon").setAttribute("src", this.getAttribute("image-src"));
                _iterator = _createForOfIteratorHelper(this.outerSelectorAll("menu-item"));

                try {
                  _loop = function _loop() {
                    var item = _step.value;
                    item.detach();

                    _this.menuArea.append(item);

                    item.addEventListener("click", function (event) {
                      _this.dispatchEvent(new CustomEvent(item.getAttribute("event-name"), {
                        bubbles: true,
                        composed: true
                      }));
                    });
                  };

                  for (_iterator.s(); !(_step = _iterator.n()).done;) {
                    _loop();
                  }
                } catch (err) {
                  _iterator.e(err);
                } finally {
                  _iterator.f();
                }

                this.positionMenu();
                this.menuButton.addEventListener("click", function () {
                  return _this.toggleMenu();
                });
                this.menuArea.addEventListener("mouseleave", function () {
                  return _this.mouseLeave();
                });
                this.menuButton.addEventListener("mouseleave", function () {
                  return _this.mouseLeave();
                });
                this.menuArea.addEventListener("mouseenter", function () {
                  return _this.mouseEnter();
                });
                this.menuButton.addEventListener("mouseenter", function () {
                  return _this.mouseEnter();
                });

              case 11:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function ready() {
        return _ready.apply(this, arguments);
      }

      return ready;
    }()
  }, {
    key: "init",
    value: function init(menuSelector) {
      var _this2 = this;

      document.querySelectorAll("[data-autoclose='true']").forEach(function (ele) {
        ele.addEventListener("click", function () {
          return _this2.close();
        });
      });
      document.querySelectorAll(".sub-menu").forEach(function (ele) {
        ele.querySelector(".menu-label").addEventListener("click", function () {
          _this2.toggleMenu(ele);
        });
      });
      return this;
    }
  }, {
    key: "close",
    value: function close() {
      this.menuArea.classList.add("hidden");
      document.querySelectorAll(".sub-menu > .menu-area").forEach(function (ele) {
        ele.classList.add("hidden");
      });
    }
  }, {
    key: "open",
    value: function open() {
      this.menuArea.classList.remove("hidden");
      this.positionMenu();
    }
  }, {
    key: "mouseLeave",
    value: function mouseLeave() {
      var _this3 = this;

      if (this.timeout) return;
      this.timeout = setTimeout(function () {
        _this3.close();

        _this3.timeout = null;
      }, 500);
    }
  }, {
    key: "mouseEnter",
    value: function mouseEnter() {
      if (!this.timeout) return;
      clearTimeout(this.timeout);
      this.timeout = null;
    }
  }, {
    key: "showMenu",
    value: function showMenu() {
      this.menuArea.classList.remove("hidden");
      this.positionMenu();
    }
  }, {
    key: "hideMenu",
    value: function hideMenu() {
      this.menuArea.classList.add("hidden");
    }
  }, {
    key: "isMenuHidden",
    value: function isMenuHidden() {
      return this.menuArea.classList.contains("hidden");
    }
  }, {
    key: "toggleMenu",
    value: function toggleMenu() {
      if (this.isMenuHidden()) this.showMenu();else this.hideMenu();
    }
  }, {
    key: "positionMenu",
    value: function positionMenu() {
      var left = this.menuButton.getBoundingClientRect().left;
      var bWidth = this.menuButton.getBoundingClientRect().width;
      var mWidth = this.menuArea.getBoundingClientRect().width;

      if (left + bWidth + mWidth + 2 > window.innerWidth) {
        this.setMenuLeft();
      } else {
        this.setMenuRight();
      }
    }
  }, {
    key: "setMenuLeft",
    value: function setMenuLeft() {
      var left = this.menuButton.offsetLeft;
      var width = this.menuArea.offsetWidth;
      this.menuArea.style.left = left - width - 2 + "px";
    }
  }, {
    key: "setMenuRight",
    value: function setMenuRight() {
      var left = this.menuButton.offsetLeft;
      var width = this.menuButton.offsetWidth;
      this.menuArea.style.left = left + width + 2 + "px";
    }
  }, {
    key: "menuButton",
    get: function get() {
      return this.querySelector("#menu-icon");
    }
  }, {
    key: "menuArea",
    get: function get() {
      return this.querySelector("#outer");
    }
  }]);
  return MenuContainer;
}(NidgetElement);

var MenuItem = /*#__PURE__*/function (_NidgetElement2) {
  (0, _inherits2["default"])(MenuItem, _NidgetElement2);

  var _super2 = _createSuper(MenuItem);

  function MenuItem() {
    (0, _classCallCheck2["default"])(this, MenuItem);
    return _super2.call(this);
  }

  (0, _createClass2["default"])(MenuItem, [{
    key: "ready",
    value: function () {
      var _ready2 = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2() {
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(MenuItem.prototype), "ready", this).call(this);

              case 2:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function ready() {
        return _ready2.apply(this, arguments);
      }

      return ready;
    }()
  }]);
  return MenuItem;
}(NidgetElement);

window.customElements.define('menu-item', MenuItem);
window.customElements.define('menu-container', MenuContainer);
module.exports = MenuContainer;

},{"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],39:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

require("./CheckBox.js");

var ValueUpdate = /*#__PURE__*/function (_CustomEvent) {
  (0, _inherits2["default"])(ValueUpdate, _CustomEvent);

  var _super = _createSuper(ValueUpdate);

  function ValueUpdate(index, value, checked) {
    (0, _classCallCheck2["default"])(this, ValueUpdate);
    return _super.call(this, 'value-update', {
      detail: {
        index: index,
        value: value,
        checked: checked
      }
    });
  }

  return ValueUpdate;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(CustomEvent));

var MultipleChoicePresent = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(MultipleChoicePresent, _NidgetElement);

  var _super2 = _createSuper(MultipleChoicePresent);

  function MultipleChoicePresent() {
    var _this;

    (0, _classCallCheck2["default"])(this, MultipleChoicePresent);
    _this = _super2.call(this, "multiple-choice-present-template");
    _this.timeouts = [];
    return _this;
  }

  (0, _createClass2["default"])(MultipleChoicePresent, [{
    key: "setTimeout",
    value: function (_setTimeout) {
      function setTimeout(_x, _x2) {
        return _setTimeout.apply(this, arguments);
      }

      setTimeout.toString = function () {
        return _setTimeout.toString();
      };

      return setTimeout;
    }(function (index, value) {
      var _this2 = this;

      if (this.timeouts[index]) clearTimeout(this.timeouts[index]);
      this.timeouts[index] = setTimeout(function () {
        var event = new ValueUpdate(index, value, true);

        _this2.dispatchEvent(event);

        _this2.timeouts[index] = undefined;
      }, 300);
    })
  }, {
    key: "ready",
    value: function () {
      var _ready = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        var _this3 = this;

        var _iterator, _step, _loop, _iterator2, _step2, _loop2;

        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(MultipleChoicePresent.prototype), "ready", this).call(this);

              case 2:
                _iterator = _createForOfIteratorHelper(this.querySelectorAll("check-box"));

                try {
                  _loop = function _loop() {
                    var element = _step.value;
                    element.addEventListener("value-update", function (event) {
                      var index = element.parentElement.getAttribute("data-index");
                      var checked = event.detail.value === "true";
                      var value = element.parentElement.querySelector(".wager").content;
                      element.parentElement.querySelector(".wager").disabled = !checked;

                      _this3.dispatchEvent(new ValueUpdate(index, parseInt(value), checked));
                    });
                  };

                  for (_iterator.s(); !(_step = _iterator.n()).done;) {
                    _loop();
                  }
                } catch (err) {
                  _iterator.e(err);
                } finally {
                  _iterator.f();
                }

                _iterator2 = _createForOfIteratorHelper(this.querySelectorAll(".wager"));

                try {
                  _loop2 = function _loop2() {
                    var element = _step2.value;
                    element.addEventListener("click", function (event) {
                      element.content = "";
                    });
                    element.addEventListener("text-update", function (event) {
                      var index = element.parentElement.getAttribute("data-index");
                      var value = event.detail.content;

                      _this3.dispatchEvent(new ValueUpdate(index, parseInt(value), true));
                    });
                  };

                  for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                    _loop2();
                  }
                } catch (err) {
                  _iterator2.e(err);
                } finally {
                  _iterator2.f();
                }

              case 6:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function ready() {
        return _ready.apply(this, arguments);
      }

      return ready;
    }()
  }, {
    key: "setMode",
    value: function setMode(mode) {
      switch (mode) {
        case "show":
          this.classList.add("show-mode");
          break;

        case "data-enter":
        default:
          this.classList.remove("show-mode");
          break;
      }
    }
  }, {
    key: "setAnswerText",
    value: function setAnswerText(index, text) {
      this.querySelector(".inner[data-index=\"".concat(index, "\"] .answer")).text = text;
    }
  }, {
    key: "setChecked",
    value: function setChecked(index, value) {
      this.querySelector(".inner[data-index=\"".concat(index, "\"] check-box")).checked = value;
    }
  }]);
  return MultipleChoicePresent;
}(NidgetElement);

window.customElements.define('multiple-choice-present', MultipleChoicePresent);
module.exports = MultipleChoicePresent;

},{"./CheckBox.js":36,"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/helpers/wrapNativeSuper":21,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],40:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var NidgetButton = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(NidgetButton, _NidgetElement);

  var _super = _createSuper(NidgetButton);

  function NidgetButton() {
    (0, _classCallCheck2["default"])(this, NidgetButton);
    return _super.call(this, "nidget-button-template");
  }

  (0, _createClass2["default"])(NidgetButton, [{
    key: "ready",
    value: function () {
      var _ready = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(NidgetButton.prototype), "ready", this).call(this);

              case 2:
                this.DOM.text.innerHTML = this.innerHTML;
                this.innerHTML = "";

              case 4:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function ready() {
        return _ready.apply(this, arguments);
      }

      return ready;
    }()
  }, {
    key: "disable",
    value: function disable() {
      this.classList.add("disabled");
    }
  }, {
    key: "enable",
    value: function enable() {
      this.classList.remove("disabled");
    }
  }]);
  return NidgetButton;
}(NidgetElement);

window.customElements.define('nidget-button', NidgetButton);
module.exports = NidgetButton;

},{"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],41:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _PlayerPanel = _interopRequireDefault(require("./PlayerPanel.js"));

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var PlayerContainer = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(PlayerContainer, _NidgetElement);

  var _super = _createSuper(PlayerContainer);

  function PlayerContainer() {
    var _this;

    var templateId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "player-container-template";
    (0, _classCallCheck2["default"])(this, PlayerContainer);
    _this = _super.call(this, templateId);
    _this.extraPlayersHidden = true;
    return _this;
  }

  (0, _createClass2["default"])(PlayerContainer, [{
    key: "ready",
    value: function () {
      var _ready = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        var _this2 = this;

        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(PlayerContainer.prototype), "ready", this).call(this);

              case 2:
                document.body.addEventListener("click", function (event) {
                  if (_this2.extraPlayersHidden) return;

                  _this2.querySelector(".outer").classList.add("hide-extra");

                  _this2.querySelector("#expand-button .text").innerHTML = "&#9654;";
                  _this2.extraPlayersHidden = true;
                });
                this.querySelector("#expand-button").addEventListener("click", function (event) {
                  if (_this2.extraPlayersHidden) {
                    _this2.querySelector(".outer").classList.remove("hide-extra");

                    _this2.querySelector("#expand-button .text").innerHTML = "&#9664;";
                    _this2.extraPlayersHidden = false;
                    event.stopPropagation();
                  }
                });

              case 4:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function ready() {
        return _ready.apply(this, arguments);
      }

      return ready;
    }()
  }, {
    key: "addPlayer",
    value: function addPlayer(name) {
      var score = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var outer = this.querySelector(".outer");
      var expandButton = this.querySelector("#expand-button");
      var playerPanel = document.createElement("player-panel");
      playerPanel.name = name;
      playerPanel.score = score;
      this.addPlayerPanel(playerPanel);
      window.lastPanel = playerPanel;
      if (this.size > 6) expandButton.show();
      return playerPanel;
    }
  }, {
    key: "addInner",
    value: function addInner() {
      var outer = this.querySelector(".outer");
      var nextIndex = this.querySelectorAll(".inner").length;
      var element = document.createElement("nidget-element");
      element.classList.add("inner");
      element.classList.add("extra");
      element.setAttribute("style", "--index: ".concat(nextIndex));
      element.setAttribute("data-index", nextIndex);
      outer.append(element);
      return element;
    }
  }, {
    key: "getInner",
    value: function getInner(index) {
      while (this.querySelectorAll(".inner").length <= index) {
        this.addInner();
      }

      var selector = ".inner[data-index='".concat(index, "']");
      var element = this.querySelector(".inner[data-index='".concat(index, "']"));
      return element;
    }
  }, {
    key: "addPlayerPanel",
    value: function addPlayerPanel(element) {
      var innerIndex = Math.trunc(this.size / 6);
      var innerElement = this.getInner(innerIndex);
      element.setAttribute("style", "--index: ".concat(this.size % 6));
      innerElement.append(element);
    }
  }, {
    key: "size",
    get: function get() {
      return this.querySelectorAll("player-panel").length;
    }
  }, {
    key: "topPlayer",
    value: function topPlayer() {
      var currentInner = this.querySelector(".inner.first");
      return currentInner.querySelector("player-panel");
    }
  }, {
    key: "getPlayer",
    value: function getPlayer(name) {
      var _iterator = _createForOfIteratorHelper(this.querySelectorAll("player-panel")),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var panel = _step.value;
          if (panel.name === name) return panel;
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      return null;
    }
  }, {
    key: "moveToTop",
    value: function moveToTop(name) {
      var components = [];
      if (!this.getPlayer(name)) return;
      components.push(this.getPlayer(name));
      this.getPlayer(name).detach();

      var _iterator2 = _createForOfIteratorHelper(this.querySelectorAll("player-panel")),
          _step2;

      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var element = _step2.value;
          components.push(element);
          element.detach();
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }

      for (var _i = 0, _components = components; _i < _components.length; _i++) {
        var component = _components[_i];
        this.addPlayerPanel(component);
      }

      return components[0];
    }
  }, {
    key: "clear",
    value: function clear() {
      var _iterator3 = _createForOfIteratorHelper(this.querySelectorAll(".extra")),
          _step3;

      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var inner = _step3.value;
          inner.detach();
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }

      this.querySelector(".inner").textContent = "";
    }
  }]);
  return PlayerContainer;
}(NidgetElement);

window.customElements.define('player-container', PlayerContainer);
module.exports = PlayerContainer;

},{"./PlayerPanel.js":42,"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],42:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

require("./PlayerPanel.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var PlayerPanel = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(PlayerPanel, _NidgetElement);

  var _super = _createSuper(PlayerPanel);

  function PlayerPanel() {
    var templateId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "player-panel-template";
    (0, _classCallCheck2["default"])(this, PlayerPanel);
    return _super.call(this, templateId);
  }

  (0, _createClass2["default"])(PlayerPanel, [{
    key: "ready",
    value: function () {
      var _ready = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(PlayerPanel.prototype), "ready", this).call(this);

              case 2:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function ready() {
        return _ready.apply(this, arguments);
      }

      return ready;
    }()
  }, {
    key: "name",
    get: function get() {
      return this.querySelector("#name").innerHTML;
    },
    set: function set(value) {
      this.querySelector("#name").innerHTML = value;
    }
  }, {
    key: "score",
    get: function get() {
      return this.querySelector("#score").innerHTML;
    },
    set: function set(value) {
      this.querySelector("#score").innerHTML = value;
    }
  }, {
    key: "dim",
    set: function set(value) {
      if (value) this.querySelector(".outer").classList.add("dim");else this.querySelector(".outer").classList.remove("dim");
    }
  }, {
    key: "highlight",
    set: function set(value) {
      if (value) this.querySelector(".outer").classList.add("highlight");else this.querySelector(".outer").classList.remove("highlight");
    }
  }, {
    key: "active",
    set: function set(value) {
      if (value) this.querySelector("#buzz-light").classList.add("active");else this.querySelector("#buzz-light").classList.remove("active");
    }
  }, {
    key: "hideClock",
    value: function hideClock() {
      this.DOM.clock.classList.add("hidden");
    }
  }, {
    key: "buzz",
    value: function buzz() {
      this.querySelector("#buzz-light").classList.add("sweep-right");
    }
  }, {
    key: "clear",
    value: function clear() {
      this.querySelector("#buzz-light").classList.remove("sweep-right");
      this.querySelector("#name").classList.remove("active");
      this.querySelector("#score").classList.remove("active");
      this.querySelectorAll(".clock-tick").forEach(function (e) {
        return e.classList.remove("spent");
      });
    }
  }, {
    key: "setTimer",
    value: function setTimer(percent) {
      if (percent <= 80) this.querySelector(".clock-tick[data-index='4']").classList.add("spent");
      if (percent <= 60) this.querySelector(".clock-tick[data-index='3']").classList.add("spent");
      if (percent <= 40) this.querySelector(".clock-tick[data-index='2']").classList.add("spent");
      if (percent <= 20) this.querySelector(".clock-tick[data-index='1']").classList.add("spent");
      if (percent <= 0) this.querySelector(".clock-tick[data-index='0']").classList.add("spent");
    }
  }]);
  return PlayerPanel;
}(NidgetElement);

window.customElements.define('player-panel', PlayerPanel);
module.exports = PlayerPanel;

},{"./PlayerPanel.js":42,"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],43:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var TextUpdate = /*#__PURE__*/function (_CustomEvent) {
  (0, _inherits2["default"])(TextUpdate, _CustomEvent);

  var _super = _createSuper(TextUpdate);

  function TextUpdate(text) {
    (0, _classCallCheck2["default"])(this, TextUpdate);
    return _super.call(this, 'text-update', {
      detail: {
        text: text
      }
    });
  }

  return TextUpdate;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(CustomEvent));

var QuestionPane = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(QuestionPane, _NidgetElement);

  var _super2 = _createSuper(QuestionPane);

  function QuestionPane() {
    (0, _classCallCheck2["default"])(this, QuestionPane);
    return _super2.call(this, "question-pane-template");
  }

  (0, _createClass2["default"])(QuestionPane, [{
    key: "ready",
    value: function () {
      var _ready = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2() {
        var _this = this;

        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(QuestionPane.prototype), "ready", this).call(this);

              case 2:
                this.addEventListener("click", function () {
                  return _this.querySelector(".text-contents").focus();
                });
                this.querySelector("#text-contents").addEventListener("blur", /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
                  var text;
                  return _regenerator["default"].wrap(function _callee$(_context) {
                    while (1) {
                      switch (_context.prev = _context.next) {
                        case 0:
                          text = _this.querySelector(".text-contents").text;

                          _this.dispatchEvent(new TextUpdate(text.trim()));

                        case 2:
                        case "end":
                          return _context.stop();
                      }
                    }
                  }, _callee);
                })));

              case 4:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function ready() {
        return _ready.apply(this, arguments);
      }

      return ready;
    }()
  }, {
    key: "clear",
    value: function clear() {
      this.querySelector(".text-contents").text = "";
    }
  }, {
    key: "setText",
    value: function setText(text) {
      this.querySelector(".text-contents").text = text;
    }
  }]);
  return QuestionPane;
}(NidgetElement);

window.customElements.define('question-pane', QuestionPane);
module.exports = QuestionPane;

},{"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/helpers/wrapNativeSuper":21,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],44:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var TextInput = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(TextInput, _NidgetElement);

  var _super = _createSuper(TextInput);

  function TextInput() {
    (0, _classCallCheck2["default"])(this, TextInput);
    return _super.call(this, "text-input-template");
  }

  (0, _createClass2["default"])(TextInput, [{
    key: "connectedCallback",
    value: function () {
      var _connectedCallback = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                this.sourceInnerHTML = this.innerHTML;
                _context.next = 3;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(TextInput.prototype), "connectedCallback", this).call(this);

              case 3:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function connectedCallback() {
        return _connectedCallback.apply(this, arguments);
      }

      return connectedCallback;
    }()
  }, {
    key: "ready",
    value: function () {
      var _ready = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2() {
        var _this$getAttribute,
            _this = this;

        var hint;
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(TextInput.prototype), "ready", this).call(this);

              case 2:
                this.filter = (_this$getAttribute = this.getAttribute(TextInput.FILTER)) !== null && _this$getAttribute !== void 0 ? _this$getAttribute : ".*";
                hint = this.getAttribute(TextInput.HINT_ATTRIBUTE);
                this.DOM['hint'].innerHTML = hint;
                this.content = this.sourceInnerHTML;
                this.addEventListener("focus", function () {
                  _this.DOM['content'].focus();
                });
                this.DOM['content'].addEventListener("click", function () {
                  _this.DOM['hint'].innerHTML = "";
                });
                this.DOM['content'].addEventListener("blur", function () {
                  if (_this.DOM['content'].innerHTML.trim() === "") {
                    _this.DOM['hint'].innerHTML = hint;
                  }
                });
                this.DOM['content'].addEventListener("keypress", function (event) {
                  return _this.onKeypress(event);
                });
                this.DOM['content'].addEventListener("input", function (event) {
                  return _this.onInput(event);
                });

              case 11:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function ready() {
        return _ready.apply(this, arguments);
      }

      return ready;
    }()
  }, {
    key: "content",
    get: function get() {
      var string = this.DOM['content'].innerHTML;
      return string.replaceAll("&nbsp;", " ");
    },
    set: function set(value) {
      return this.DOM['content'].text = value;
    }
  }, {
    key: "setCaret",
    value: function setCaret(index) {
      var range = document.createRange();
      var sel = window.getSelection();
      range.setStart(this.DOM['content'].childNodes[0], index);
      range.collapse(true);
      sel.removeAllRanges();
      sel.addRange(range);
    }
  }, {
    key: "onInput",
    value: function onInput(event) {
      if (this.filter === "") return;
      var check = this.content.trim();
      var r = check.match("^" + this.filter + "$");

      if (!check.match("^" + this.filter + "$")) {
        this.content = this.prevContent;
        this.setCaret(this.prevCaret);
        event.stopPropagation();
        event.preventDefault();
      } else {
        this.dispatchEvent(new CustomEvent("text-update", {
          bubbles: true,
          composed: true,
          detail: {
            content: this.content
          }
        }));
      }
    }
  }, {
    key: "onKeypress",
    value: function onKeypress(event) {
      if (event.which === 13) {
        event.stopPropagation();
        event.preventDefault();
        this.dispatchEvent(new CustomEvent("text-enter", {
          bubbles: true,
          composed: true,
          detail: {
            content: this.content
          }
        }));
      }

      this.prevContent = this.content;
      this.prevCaret = this.shadowRoot.getSelection().anchorOffset;
    }
  }]);
  return TextInput;
}(NidgetElement);

TextInput.FILTER = "filter";
TextInput.HINT_ATTRIBUTE = "hint";
window.customElements.define('text-input', TextInput);
module.exports = TextInput;

},{"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],45:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var TriviaTimer = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(TriviaTimer, _NidgetElement);

  var _super = _createSuper(TriviaTimer);

  function TriviaTimer() {
    (0, _classCallCheck2["default"])(this, TriviaTimer);
    return _super.call(this, "trivia-timer-template");
  }

  (0, _createClass2["default"])(TriviaTimer, [{
    key: "start",
    value: function start(value) {
      var _this = this;

      if (value) this.set(value);
      this.timeout = setTimeout(function () {
        return _this.step();
      }, 500);
      this.running = true;
    }
  }, {
    key: "stop",
    value: function stop() {
      if (this.timeout) {
        this.running = false;
        clearTimeout();
      }
    }
  }, {
    key: "show",
    value: function show(value) {
      this.querySelector(".outer").classList.remove("cycle");

      if (value) {
        this.querySelector("#current-tick .text").innerHTML = value;
      }

      (0, _get2["default"])((0, _getPrototypeOf2["default"])(TriviaTimer.prototype), "show", this).call(this);
    }
  }, {
    key: "spin",
    value: function spin() {
      var _this2 = this;

      this.querySelector(".outer").classList.remove("cycle");
      setTimeout(function () {
        return _this2.querySelector(".outer").classList.add("cycle");
      }, 10);
      setTimeout(function () {
        return _this2.querySelector("#current-tick .text").innerHTML = _this2.querySelector("#prev-tick").innerHTML;
      }, 500);
    }
  }, {
    key: "step",
    value: function step() {
      var _this3 = this;

      if (this.value > 0 && this.running) {
        this.tick();
        this.timeout = setTimeout(function () {
          return _this3.step();
        }, 1000);
      }
    }
  }, {
    key: "set",
    value: function set(value) {
      this.querySelector("#prev-tick .text").innerHTML = value;
      this.spin();
    }
  }, {
    key: "tick",
    value: function tick(nextValue) {
      var _nextValue,
          _this4 = this;

      nextValue = (_nextValue = nextValue) !== null && _nextValue !== void 0 ? _nextValue : --this.value;
      this.querySelector("#prev-tick").innerHTML = nextValue;
      this.querySelector(".outer").classList.remove("cycle");
      setTimeout(function () {
        return _this4.querySelector(".outer").classList.add("cycle");
      }, 500);
      setTimeout(function () {
        return _this4.querySelector("#current-tick .text").innerHTML = nextValue;
      }, 900);
    }
  }]);
  return TriviaTimer;
}(NidgetElement);

window.customElements.define('trivia-timer', TriviaTimer);
module.exports = TriviaTimer;

},{"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@thaerious/nidget":5}],46:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var GameManagerService = /*#__PURE__*/function () {
  function GameManagerService() {
    (0, _classCallCheck2["default"])(this, GameManagerService);
  }

  (0, _createClass2["default"])(GameManagerService, [{
    key: "send",
    value:
    /**
     * @param data object to send, will get stringified by this method
     */
    function () {
      var _send = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(data) {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                return _context.abrupt("return", new Promise(function (resolve, reject) {
                  var xhttp = new XMLHttpRequest();
                  xhttp.addEventListener("load", function (event) {
                    console.log(xhttp.responseText);
                    var response = JSON.parse(xhttp.responseText);
                    if (response.error) reject(response);else resolve(response);
                  });
                  xhttp.open("POST", GameManagerService.URL);
                  xhttp.setRequestHeader("Content-type", "application/json");
                  xhttp.send(JSON.stringify(data));
                }));

              case 1:
              case "end":
                return _context.stop();
            }
          }
        }, _callee);
      }));

      function send(_x) {
        return _send.apply(this, arguments);
      }

      return send;
    }()
    /**
     * Retrieve the public game-hash associated with this
     * session.
     * @returns {Promise<unknown>}
     */

  }, {
    key: "getGameHash",
    value: function () {
      var _getGameHash = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2() {
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return this.send({
                  action: "get-game-hash"
                });

              case 2:
                return _context2.abrupt("return", _context2.sent);

              case 3:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function getGameHash() {
        return _getGameHash.apply(this, arguments);
      }

      return getGameHash;
    }()
    /**
     * Stop a hosted game and clear players.
     * @param token Google API user token
     * @returns {Promise<unknown>}
     */

  }, {
    key: "launch",
    value: function () {
      var _launch = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee3(token, model) {
        return _regenerator["default"].wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                _context3.next = 2;
                return this.send({
                  token: token,
                  model: model,
                  action: "launch"
                });

              case 2:
                return _context3.abrupt("return", _context3.sent);

              case 3:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));

      function launch(_x2, _x3) {
        return _launch.apply(this, arguments);
      }

      return launch;
    }()
    /**
     * Stop a hosted game and clear players.
     * @param token Google API user token
     * @returns {Promise<unknown>}
     */

  }, {
    key: "terminate",
    value: function () {
      var _terminate = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee4(token) {
        return _regenerator["default"].wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                _context4.next = 2;
                return this.send({
                  token: token,
                  action: "terminate"
                });

              case 2:
                return _context4.abrupt("return", _context4.sent);

              case 3:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4, this);
      }));

      function terminate(_x4) {
        return _terminate.apply(this, arguments);
      }

      return terminate;
    }()
    /**
     * Determine if a game as been hosted.
     * @param token Google API user token
     * @returns {Promise<unknown>}
     */

  }, {
    key: "hasGame",
    value: function () {
      var _hasGame = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee5(token) {
        return _regenerator["default"].wrap(function _callee5$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                _context5.next = 2;
                return this.send({
                  token: token,
                  action: "has-game"
                });

              case 2:
                return _context5.abrupt("return", _context5.sent);

              case 3:
              case "end":
                return _context5.stop();
            }
          }
        }, _callee5, this);
      }));

      function hasGame(_x5) {
        return _hasGame.apply(this, arguments);
      }

      return hasGame;
    }()
  }, {
    key: "setName",
    value: function () {
      var _setName = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee6(hash, name) {
        return _regenerator["default"].wrap(function _callee6$(_context6) {
          while (1) {
            switch (_context6.prev = _context6.next) {
              case 0:
                _context6.next = 2;
                return this.send({
                  'game-hash': hash,
                  name: name,
                  action: "set-name"
                });

              case 2:
                return _context6.abrupt("return", _context6.sent);

              case 3:
              case "end":
                return _context6.stop();
            }
          }
        }, _callee6, this);
      }));

      function setName(_x6, _x7) {
        return _setName.apply(this, arguments);
      }

      return setName;
    }()
  }]);
  return GameManagerService;
}();

GameManagerService.URL = "game-manager-service";
module.exports = GameManagerService;

},{"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/regenerator":22}],47:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _default = {
  savePath: "data",
  TIMES: {
    ANSWER: 10,
    BUZZ: 10,
    MULTIPLE_CHOICE: 5
  },
  sessions: {
    SESSION_EXPIRE_HOURS: 24,
    SESSION_COOKIE_NAME: "trivia-session",
    SESSION_CLEAR_DELAY_MIN: 30
  },
  nidgets: {
    SCRIPT_PATH: "./src/client/nidgets"
  },
  locations: {
    HOST: "host.ejs"
  }
}; // set SESSION_CLEAR_DELAY_MIN to -1 to disable.

exports["default"] = _default;

},{}]},{},[31,37,38,39,36,44,40,41,42,43,45])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi8uLi9uaWRnZXQvc3JjL0NvbnN0YW50cy5qcyIsIi4uLy4uL25pZGdldC9zcmMvRmlsZU9wZXJhdGlvbnMuanMiLCIuLi8uLi9uaWRnZXQvc3JjL05pZGdldEVsZW1lbnQuanMiLCIuLi8uLi9uaWRnZXQvc3JjL25pZGdldC1jb21wb25lbnRzL05pZGdldFRleHQuanMiLCIuLi8uLi9uaWRnZXQvc3JjL3Byb2plY3RGaWxlLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvci5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY29uc3RydWN0LmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXQuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZi5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaXNOYXRpdmVGdW5jdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdC5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4uanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9zZXRQcm90b3R5cGVPZi5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3N1cGVyUHJvcEJhc2UuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2YuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy93cmFwTmF0aXZlU3VwZXIuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyIsIm5vZGVfbW9kdWxlcy90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwic3JjL2NsaWVudC9BYnN0cmFjdFZpZXcuanMiLCJzcmMvY2xpZW50L0hvc3RQb3J0YWxWaWV3LmpzIiwic3JjL2NsaWVudC9Qb3J0YWxDb250cm9sbGVyLmpzIiwic3JjL2NsaWVudC9WaWV3RXZlbnQuanMiLCJzcmMvY2xpZW50L2Nvbm5lY3RXZWJzb2NrZXQuanMiLCJzcmMvY2xpZW50L2hvc3RfcG9ydGFsLmpzIiwic3JjL2NsaWVudC9tb2R1bGVzL0F1dGhlbnRpY2F0ZS5qcyIsInNyYy9jbGllbnQvbW9kdWxlcy9GaWxlT3BzLmpzIiwic3JjL2NsaWVudC9tb2R1bGVzL1NldHVwU2l6ZUxpc3RlbmVyLmpzIiwic3JjL2NsaWVudC9tb2R1bGVzL2dvb2dsZUZpZWxkcy5qcyIsInNyYy9jbGllbnQvbmlkZ2V0cy9DaGVja0JveC5qcyIsInNyYy9jbGllbnQvbmlkZ2V0cy9HYW1lQm9hcmQuanMiLCJzcmMvY2xpZW50L25pZGdldHMvTWVudUNvbnRhaW5lci5qcyIsInNyYy9jbGllbnQvbmlkZ2V0cy9NdWx0aXBsZUNob2ljZVByZXNlbnQuanMiLCJzcmMvY2xpZW50L25pZGdldHMvTmlkZ2V0QnV0dG9uLmpzIiwic3JjL2NsaWVudC9uaWRnZXRzL1BsYXllckNvbnRhaW5lci5qcyIsInNyYy9jbGllbnQvbmlkZ2V0cy9QbGF5ZXJQYW5lbC5qcyIsInNyYy9jbGllbnQvbmlkZ2V0cy9RdWVzdGlvblBhbmUuanMiLCJzcmMvY2xpZW50L25pZGdldHMvVGV4dElucHV0LmpzIiwic3JjL2NsaWVudC9uaWRnZXRzL1RyaXZpYVRpbWVyLmpzIiwic3JjL2NsaWVudC9zZXJ2aWNlcy9HYW1lTWFuYWdlclNlcnZpY2UuanMiLCJzcmMvc2VydmVyL2NvbnN0YW50cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN6T0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDeklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUNBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDM0VNLFk7Ozs7O0FBQ0YsMEJBQWM7QUFBQTs7QUFBQTtBQUNWO0FBQ0EsVUFBSyxHQUFMLEdBQVcsRUFBWDtBQUVBLFVBQUssR0FBTCxDQUFTLFNBQVQsR0FBcUIsUUFBUSxDQUFD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QUc7QUFBUjtBQUF6QixhQUFmLENBQVI7QUFDQSxZQUFBLEVBQUUsQ0FBQyxJQUFILENBQVEsSUFBSSxDQUFDLFNBQUwsQ0FBZTtBQUFDLGNBQUEsTUFBTSxFQUFHLE1BQVY7QUFBa0IsY0FBQSxJQUFJLEVBQUc7QUFBQyxnQkFBQSxJQUFJLEVBQUc7QUFBUjtBQUF6QixhQUFmLENBQVI7QUFDQSxZQUFBLEVBQUUsQ0FBQyxJQUFILENBQVEsSUFBSSxDQUFDLFNBQUwsQ0FBZTtBQUFDLGNBQUEsTUFBTSxFQUFHLE1BQVY7QUFBa0IsY0FBQSxJQUFJLEVBQUc7QUFBQyxnQkFBQSxJQUFJLEVBQUc7QUFBUjtBQUF6QixhQUFmLENBQVI7QUFDQSxZQUFBLEVBQUUsQ0FBQyxJQUFILENBQVEsSUFBSSxDQUFDLFNBQUwsQ0FBZTtBQUFDLGNBQUEsTUFBTSxFQUFHLE1BQVY7QUFBa0IsY0FBQSxJQUFJLEVBQUc7QUFBQyxnQkFBQSxJQUFJLEVBQUc7QUFBUjtBQUF6QixhQUFmLENBQVI7QUFDQSxZQUFBLEVBQUUsQ0FBQyxJQUFILENBQVEsSUFBSSxDQUFDLFNBQUwsQ0FBZTtBQUFDLGNBQUEsTUFBTSxFQUFHLE1BQVY7QUFBa0IsY0FBQSxJQUFJLEVBQUc7QUFBQyxnQkFBQSxJQUFJLEVBQUc7QUFBUjtBQUF6QixhQUFmLENBQVI7QUFDQSxZQUFBLEVBQUUsQ0FBQyxJQUFILENBQVEsSUFBSSxDQUFDLFNBQUwsQ0FBZTtBQUFDLGNBQUEsTUFBTSxFQUFHLE1BQVY7QUFBa0IsY0FBQSxJQUFJLEVBQUc7QUFBQyxnQkFBQSxJQUFJLEVBQUc7QUFBUjtBQUF6QixhQUFmLENBQVI7QUFDQSxZQUFBLEVBQUUsQ0FBQyxJQUFILENBQVEsSUFBSSxDQUFDLFNBQUwsQ0FBZTtBQUFDLGNBQUEsTUFBTSxFQUFHLE1BQVY7QUFBa0IsY0FBQSxJQUFJLEVBQUc7QUFBQyxnQkFBQSxJQUFJLEVBQUc7QUFBUjtBQUF6QixhQUFmLENBQVI7QUFDQSxZQUFBLEVBQUUsQ0FBQyxJQUFILENBQVEsSUFBSSxDQUFDLFNBQUwsQ0FB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QSxTQUFTLEVBQUc7QUFDUixJQUFBLElBQUksRUFBRztBQURDO0FBZkQsQyxFQW9CZiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIid1c2Ugc3RyaWN0JztcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgcHJlZml4OiBcImRhdGEtbmlkZ2V0XCIsXHJcbiAgICBlbGVtZW50QXR0cmlidXRlOiBcImRhdGEtbmlkZ2V0LWVsZW1lbnRcIixcclxuICAgIHNyY0F0dHJpYnV0ZTogXCJzcmNcIixcclxuICAgIHRlbXBsYXRlU3JjQXR0cmlidXRlOiBcInRlbXBsYXRlLXNyY1wiLFxyXG4gICAgbmFtZUF0dHJpYnV0ZTogXCJuYW1lXCIsXHJcbiAgICBpbnRlcmZhY2VBdHRyaWJ1dGU6IFwiaW50ZXJmYWNlc1wiLFxyXG4gICAgdGVtcGxhdGVBdHRyaWJ1dGU6IFwidGVtcGxhdGUtaWRcIixcclxuICAgIGludGVyZmFjZURhdGFGaWVsZDogXCJpbnRlcmZhY2VEYXRhXCIsXHJcbiAgICBtb2RlbERhdGFGaWVsZDogXCJtb2RlbERhdGFcIixcclxuICAgIHN0eWxlQXR0cmlidXRlOiBcIm5pZGdldC1zdHlsZVwiXHJcbn07IiwiJ3VzZSBzdHJpY3QnO1xyXG5jb25zdCBOaWRnZXRFbGVtZW50ID0gcmVxdWlyZShcIi4vTmlkZ2V0RWxlbWVudFwiKTtcclxuXHJcbi8qIGdsb2JhbCBVdGlsaXR5ICovXHJcbmNsYXNzIEZpbGVPcGVyYXRpb25zIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgbmV3IGRvbSBlbGVtZW50IGZyb20gYSBmaWxlICh1cmwpLiAgTWFwIHZhcmlhYmxlcyAoJHsuLi59KSB0byBcclxuICAgICAqIGEgdmFsdWUuXHJcbiAgICAgKiBAcGFyYW0ge3R5cGV9IHVybFxyXG4gICAgICogQHBhcmFtIHt0eXBlfSBtYXBcclxuICAgICAqIEByZXR1cm5zIHtub2RlfEZpbGVPcGVyYXRpb25zLmxvYWRET01FbGVtZW50LmRvbUVsZW1lbnR9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBsb2FkTmlkZ2V0KHVybCwgbWFwKXsgICAgICAgIFxyXG4gICAgICAgIGxldCBlbGVtZW50ID0gYXdhaXQgRmlsZU9wZXJhdGlvbnMubG9hZERPTUVsZW1lbnQodXJsLCBtYXApO1xyXG4gICAgICAgIHJldHVybiBuZXcgTmlkZ2V0RWxlbWVudChlbGVtZW50KTtcclxuICAgIH0gICAgXHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgbmV3IGRvbSBlbGVtZW50IGZyb20gYSBmaWxlICh1cmwpLiAgTWFwIHZhcmlhYmxlcyAoJHsuLi59KSB0byBcclxuICAgICAqIGEgdmFsdWUuXHJcbiAgICAgKiBAcGFyYW0ge3R5cGV9IHVybFxyXG4gICAgICogQHBhcmFtIHt0eXBlfSBtYXBcclxuICAgICAqIEByZXR1cm5zIHtub2RlfEZpbGVPcGVyYXRpb25zLmxvYWRET01FbGVtZW50LmRvbUVsZW1lbnR9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBsb2FkRE9NRWxlbWVudCh1cmwsIG1hcCA9IG5ldyBNYXAoKSl7ICAgICAgICBcclxuICAgICAgICBpZiAobWFwIGluc3RhbmNlb2YgTWFwID09PSBmYWxzZSkgbWFwID0gRmlsZU9wZXJhdGlvbnMub2JqZWN0VG9NYXAobWFwKTsgICAgICAgXHJcbiAgICAgICAgbGV0IHRleHQgPSBhd2FpdCBGaWxlT3BlcmF0aW9ucy5nZXRVUkwodXJsKTtcclxuICAgICAgICByZXR1cm4gRmlsZU9wZXJhdGlvbnMuc3RyaW5nVG9ET01FbGVtZW50KHRleHQsIG1hcCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBuZXcgZG9tIGVsZW1lbnQgZnJvbSB0ZXh0LlxyXG4gICAgICogQHBhcmFtIHt0eXBlfSB0ZXh0XHJcbiAgICAgKiBAcGFyYW0ge3R5cGV9IG1hcFxyXG4gICAgICogQHJldHVybnMge25vZGV8RmlsZU9wZXJhdGlvbnMubG9hZERPTUVsZW1lbnQuZG9tRWxlbWVudH1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIHN0cmluZ1RvRE9NRWxlbWVudCh0ZXh0LCBtYXAgPSBuZXcgTWFwKCkpe1xyXG4gICAgICAgIC8qIHJlcGxhY2UgdmFyaWFibGVzIHdpdGggdmFsdWVzICovXHJcbiAgICAgICAgZm9yIChsZXQga2V5IG9mIG1hcC5rZXlzKCkpeyAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBtYXAuZ2V0KGtleSk7XHJcbiAgICAgICAgICAgIGxldCByZWdleCA9IG5ldyBSZWdFeHAoYFskXVt7XT8ke2tleX1bfV1gLCBgZ2ApO1xyXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHJlZ2V4LCB2YWx1ZSk7ICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogcmVwbGFjZSB1bmZpbGxlZCB2YXJpYWJsZXMgd2l0aCBlbXB0eSAqL1xyXG4gICAgICAgIGxldCByZWdleCA9IG5ldyBSZWdFeHAoYFskXVt7XVtefV0qW31dYCwgYGdgKTtcclxuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHJlZ2V4LCBcIlwiKTsgXHJcblxyXG4gICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSB0ZXh0O1xyXG4gICAgICAgIGxldCBkb21FbGVtZW50ID0gbnVsbDtcclxuICAgICAgICBjb25zb2xlLmxvZyhlbGVtZW50KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIG9iamVjdFRvTWFwKG9iamVjdCl7XHJcbiAgICAgICAgbGV0IG1hcCA9IG5ldyBNYXAoKTtcclxuICAgICAgICBmb3IgKGxldCBmaWVsZCBpbiBvYmplY3QpeyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdFtmaWVsZF0gPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG9iamVjdFtmaWVsZF0gPT09IFwibnVtYmVyXCIpe1xyXG4gICAgICAgICAgICAgICAgbWFwLnNldChmaWVsZCwgb2JqZWN0W2ZpZWxkXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1hcDtcclxuICAgIH1cclxuXHJcbiAgICBcclxuXHJcbiAgICAvKlxyXG4gICAgICogVHJhbnNmZXIgY29udGVudHMgb2YgJ2ZpbGVuYW1lJyBmcm9tIHNlcnZlciB0byBjbGllbnQuXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZW5hbWVcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHN1Y2Nlc3NDYWxsYmFja1xyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZXJyb3JDYWxsYmFja1xyXG4gICAgICogQHJldHVybnMge1N0cmluZ30gY29udGVudHMgb2YgZmlsZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0VVJMKHVybCkge1xyXG4gICAgICAgIGxldCBjYWxsYmFjayA9IGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG4gICAgICAgICAgICB4aHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeGh0dHAucmVhZHlTdGF0ZSA9PT0gNCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4aHR0cC5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHhodHRwLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhodHRwIDogeGh0dHAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgOiB4aHR0cC5zdGF0dXMsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA6IHhodHRwLnJlc3BvbnNlVGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA6IHVybFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB4aHR0cC5vcGVuKFwiR0VUXCIsIHVybCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHhodHRwLnNlbmQobnVsbCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGNhbGxiYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIG5ldyBkb20gZWxlbWVudCBmcm9tIHRleHQuXHJcbiAgICAgKiBAcGFyYW0ge3R5cGV9IHRleHRcclxuICAgICAqIEBwYXJhbSB7dHlwZX0gbWFwXHJcbiAgICAgKiBAcmV0dXJucyB7bm9kZXxGaWxlT3BlcmF0aW9ucy5sb2FkRE9NRWxlbWVudC5kb21FbGVtZW50fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgZ2V0RmlsZSh1cmwsIG1hcCA9IG5ldyBNYXAoKSl7XHJcbiAgICAgICAgbGV0IHRleHQgPSBhd2FpdCBGaWxlT3BlcmF0aW9ucy5nZXRVUkwodXJsKTtcclxuXHJcbiAgICAgICAgLyogcmVwbGFjZSB2YXJpYWJsZXMgd2l0aCB2YWx1ZXMgKi9cclxuICAgICAgICBmb3IgKGxldCBrZXkgb2YgbWFwLmtleXMoKSl7XHJcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IG1hcC5nZXQoa2V5KTtcclxuICAgICAgICAgICAgbGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgWyRdW3tdPyR7a2V5fVt9XWAsIGBnYCk7XHJcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UocmVnZXgsIHZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIHJlcGxhY2UgdW5maWxsZWQgdmFyaWFibGVzIHdpdGggZW1wdHkgKi9cclxuICAgICAgICBsZXQgcmVnZXggPSBuZXcgUmVnRXhwKGBbJF1be11bXn1dKlt9XWAsIGBnYCk7XHJcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShyZWdleCwgXCJcIik7XHJcblxyXG4gICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgKiBUcmFuc2ZlciBjb250ZW50cyBvZiAnZmlsZW5hbWUnIGZyb20gc2VydmVyIHRvIGNsaWVudCB1c2luZyBjdXJyZW50IHdpbmRvdyBsb2NhdGlvbi5cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlbmFtZVxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gc3VjY2Vzc0NhbGxiYWNrXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcnJvckNhbGxiYWNrXHJcbiAgICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0TG9jYWwoZmlsZW5hbWUpIHtcclxuICAgICAgICBsZXQgY2FsbGJhY2sgPSBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYgKyBcIi9cIiArIGZpbGVuYW1lO1xyXG5cclxuICAgICAgICAgICAgeGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHhodHRwLnJlYWR5U3RhdGUgPT09IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeGh0dHAuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHR0cC5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh4aHR0cC5zdGF0dXMsIHhodHRwLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgeGh0dHAub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpO1xyXG4gICAgICAgICAgICB4aHR0cC5zZW5kKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoY2FsbGJhY2spO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIENhdXNlICd0ZXh0JyB0byBiZSBzYXZlZCBhcyAnZmlsZW5hbWUnIGNsaWVudCBzaWRlLlxyXG4gICAgICogQHBhcmFtIHt0eXBlfSBmaWxlbmFtZSBUaGUgZGVmYXVsdCBmaWxlbmFtZSB0byBzYXZlIHRoZSB0ZXh0IGFzLlxyXG4gICAgICogQHBhcmFtIHt0eXBlfSB0ZXh0IFRoZSB0ZXh0IHRvIHNhdmUgdG8gZmlsZW5hbWUuXHJcbiAgICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc2F2ZVRvRmlsZSh0ZXh0LCBmaWxlbmFtZSkge1xyXG4gICAgICAgIGxldCBhbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgbGV0IGRhdGEgPSBcInRleHQ7Y2hhcnNldD11dGYtOCxcIiArIGVuY29kZVVSSUNvbXBvbmVudCh0ZXh0KTtcclxuICAgICAgICBhbmNob3Iuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBcImRhdGE6XCIgKyBkYXRhKTtcclxuICAgICAgICBhbmNob3Iuc2V0QXR0cmlidXRlKFwiZG93bmxvYWRcIiwgZmlsZW5hbWUpO1xyXG4gICAgICAgIGFuY2hvci5jbGljaygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5GaWxlT3BlcmF0aW9ucy5Ob2RlVHlwZSA9IHtcclxuICAgIEVMRU1FTlQgOiAxLFxyXG4gICAgQVRUUklCVVRFIDogMixcclxuICAgIFRFWFQgOiAzLCBcclxuICAgIENEQVRBU0VDVElPTiA6IDQsXHJcbiAgICBFTlRJVFlSRUZFUk5DRSA6IDUsXHJcbiAgICBFTlRJVFkgOiA2LFxyXG4gICAgUFJPQ0VTU0lOR0lOU1RSVUNUSU9OIDogNyxcclxuICAgIENPTU1FTlQgOiA4LFxyXG4gICAgRE9DVU1FTlQgOiA5LFxyXG4gICAgRE9DVU1FTlRUWVBFIDogMTAsXHJcbiAgICBET0NVTUVOVEZSQUdNRU5UIDogMTEsXHJcbiAgICBOT1RBVElPTiA6IDEyXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEZpbGVPcGVyYXRpb25zOyIsIlwidXNlIHN0cmljdFwiO1xyXG5jb25zdCBGaWxlT3BlcmF0aW9ucyA9IHJlcXVpcmUoXCIuL0ZpbGVPcGVyYXRpb25zXCIpO1xyXG5jb25zdCBOaWRnZXQgPSByZXF1aXJlKFwiLi9Db25zdGFudHNcIik7XHJcblxyXG4vKipcclxuICogQ2FsbGluZyBtZXRob2RzIG9uIHRoZSBuaWRnZXQgd2lsbCB0cmVhdCBzaGFkb3cgY29udGVudHMgYXMgcmVndWxhciBjb250ZW50cy5cclxuICovXHJcbmNsYXNzIE5pZGdldEVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIG5ldyBOaWRnZXQgYXNzb2NpYXRlZCB3aXRoICdlbGVtZW50Jy4gIEFuIGVycm9yIHdpbGwgYmUgdGhyb3duXHJcbiAgICAgKiBpZiB0aGUgJ2VsZW1lbnQnIGlzIGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoIGEgTmlkZ2V0LlxyXG4gICAgICogXHJcbiAgICAgKiBEaXNhYmxlZCBjbGFzcyBpbmRpY2F0ZXMgdGhpcyBuaWRnZXQgd2lsbCBpZ25vcmUgbW91c2UgZXZlbnRzLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3R5cGV9IGVsZW1lbnQgSlF1ZXJ5IHNlbGVjdG9yXHJcbiAgICAgKiBAcmV0dXJuIHtubSRfTmlkZ2V0Lk5pZGdldEVsZW1lbnR9XHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlSWQpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0ge307XHJcblxyXG4gICAgICAgIGlmICh0ZW1wbGF0ZUlkKXtcclxuICAgICAgICAgICAgdGhpcy5hcHBseVRlbXBsYXRlKHRlbXBsYXRlSWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICAgIGNvbm5lY3RlZENhbGxiYWNrIGlzIGludm9rZWQgZWFjaCB0aW1lIHRoZSBjdXN0b20gZWxlbWVudCBpcyBhcHBlbmRlZCBpbnRvIGEgZG9jdW1lbnQtY29ubmVjdGVkIGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgYXN5bmMgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAgICAgdGhpcy5zaGFkb3dDb250ZW50cyA9IHRoaXM7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmhhc0F0dHJpYnV0ZShOaWRnZXQudGVtcGxhdGVBdHRyaWJ1dGUpKXtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHBseVRlbXBsYXRlKHRoaXMuZ2V0QXR0cmlidXRlKE5pZGdldC50ZW1wbGF0ZUF0dHJpYnV0ZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5kZXRlY3RET00oKTtcclxuICAgICAgICB0aGlzLnJlYWR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGV0ZWN0RE9NKCl7XHJcbiAgICAgICAgdGhpcy5ET00gPSB7fTtcclxuICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5xdWVyeVNlbGVjdG9yQWxsKFwiW2lkXVwiKSl7XHJcbiAgICAgICAgICAgIHRoaXMuRE9NW3RvQ2FtZWxDYXNlKGVsZW1lbnQuaWQpXSA9IGVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmUgYSBtYXAgb2YgYWxsIGRhdGEgYXR0cmlidXRlc1xyXG4gICAgICogQHJldHVybnMge01hcDxhbnksIGFueT59XHJcbiAgICAgKi9cclxuICAgIGRhdGFBdHRyaWJ1dGVzKCkge1xyXG4gICAgICAgIGxldCBtYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgZm9yIChsZXQgYXR0ciBvZiB0aGlzLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgaWYgKGF0dHIubmFtZS5zdGFydHNXaXRoKFwiZGF0YS1cIikpIHtcclxuICAgICAgICAgICAgICAgIGxldCBuYW1lID0gYXR0ci5uYW1lLnN1YnN0cig1KTtcclxuICAgICAgICAgICAgICAgIG1hcFtuYW1lXSA9IGF0dHIudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1hcDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEF0dGFjaCBhIHNoYWRvdyBlbGVtZW50IHdpdGggdGhlIGNvbnRlbnRzIG9mIHRoZSB0ZW1wbGF0ZSBuYW1lZCAodGVtcGxhdGVJRCkuXHJcbiAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGFwcGx5VGVtcGxhdGUodGVtcGxhdGVJZCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNoYWRvd1Jvb3QgIT09IG51bGwpIHJldHVybjtcclxuICAgICAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0ZW1wbGF0ZUlkKTtcclxuXHJcbiAgICAgICAgaWYgKCF0ZW1wbGF0ZSl7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIFwiVGVtcGxhdGUgJ1wiICsgdGVtcGxhdGVJZCArIFwiJyBub3QgZm91bmRcXG5cIiArXHJcbiAgICAgICAgICAgICAgICBcIkhhcyB0aGUgLmVqcyBkaXJlY3RpdmUgYmVlbiBhZGRlZCB0byB0aGUgc291cmNlIGZpbGU/XFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgXCI8JS0gaW5jbHVkZSgnLi4vcGFydGlhbHMvbmlkZ2V0LXRlbXBsYXRlcycpOyAlPlwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0ZW1wbGF0ZS50YWdOYW1lLnRvVXBwZXJDYXNlKCkgIT09IFwiVEVNUExBVEVcIikgdGhyb3cgbmV3IEVycm9yKFwiRWxlbWVudCB3aXRoIGlkICdcIiArIHRlbXBsYXRlSWQgKyBcIicgaXMgbm90IGEgdGVtcGxhdGUuXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7bW9kZTogJ29wZW4nfSkuYXBwZW5kQ2hpbGQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJlYWR5KCl7fVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBjb250ZW50cyBvZiBmaWxlIGludG8gdGhpcyBlbGVtZW50LlxyXG4gICAgICogUmVwbGFjZSBhbGwgJHt9IHZhcmlhYmxlcyB3aXRoIGNvbnRlbnRzIG9mICdtYXAnLlxyXG4gICAgICovXHJcbiAgICBhc3luYyByZXRyaWV2ZVNvdXJjZShtYXApe1xyXG4gICAgICAgIGxldCBzcmMgPSB0aGlzLmdldEF0dHJpYnV0ZShOaWRnZXQuc3JjQXR0cmlidXRlKTtcclxuICAgICAgICBsZXQgdGV4dCA9IGF3YWl0IEZpbGVPcGVyYXRpb25zLmdldEZpbGUoc3JjLCBtYXApO1xyXG4gICAgICAgIHRoaXMuaW5uZXJIVE1MID0gdGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYXN5bmMgbG9hZFRlbXBsYXRlU25pcHBldChmaWxlbmFtZSwgdGFnbmFtZSl7XHJcbiAgICAgICAgbGV0IGlkID0gZmlsZW5hbWUucmVwbGFjZSgvW1xcLy8gLi1dKy9nLCBcIl9cIik7XHJcblxyXG4gICAgICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aWR9YCkpe1xyXG4gICAgICAgICAgICBsZXQgdGV4dCA9IGF3YWl0IEZpbGVPcGVyYXRpb25zLmdldEZpbGUoZmlsZW5hbWUpO1xyXG4gICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IHRleHQ7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlLnNldEF0dHJpYnV0ZShcImlkXCIsIGlkKTtcclxuICAgICAgICAgICAgaWYgKHRhZ25hbWUpIHRlbXBsYXRlLnNldEF0dHJpYnV0ZShcImRhdGEtbmlkZ2V0XCIsIHRhZ25hbWUpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh0ZW1wbGF0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpZH1gKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgZWxlIG9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGFnbmFtZSkpe1xyXG4gICAgICAgICAgICBhd2FpdCBlbGUuaW5qZWN0VGVtcGxhdGUodGVtcGxhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSAnaGlkZGVuJyBjbGFzcy5cclxuICAgICAqL1xyXG4gICAgc2hvdygpIHtcclxuICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwic2hvd25cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgJ2hpZGRlbicgY2xhc3MuXHJcbiAgICAgKi9cclxuICAgIGhpZGUoKSB7XHJcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd25cIik7XHJcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBkaXNhYmxlZCBmbGFnIHRoYXQgaXMgcmVhZCBieSBuaWRnZXQgbW91c2UgZnVuY3Rpb25zLlxyXG4gICAgICogQHBhcmFtIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIHNldCBkaXNhYmxlZCh2YWx1ZSl7XHJcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoTmlkZ2V0RWxlbWVudC5ESVNBQkxFRF9BVFRSSUJVVEUsIHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgZGlzYWJsZWQgZmxhZyB0aGF0IGlzIHJlYWQgYnkgbmlkZ2V0IG1vdXNlIGZ1bmN0aW9ucy5cclxuICAgICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAgICovXHJcbiAgICBnZXQgZGlzYWJsZWQoKXtcclxuICAgICAgICBpZiAoIXRoaXMuaGFzQXR0cmlidXRlKE5pZGdldEVsZW1lbnQuRElTQUJMRURfQVRUUklCVVRFKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShOaWRnZXRFbGVtZW50LkRJU0FCTEVEX0FUVFJJQlVURSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGlzIGVsZW1lbnQgd2FzIHVuZGVyIHRoZSBtb3VzZSBmb3IgdGhlIGV2ZW50LlxyXG4gICAgICogQHBhcmFtIHt0eXBlfSBldmVudFxyXG4gICAgICogQHBhcmFtIHt0eXBlfSBlbGVtZW50XHJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAgICovXHJcbiAgICBpc1VuZGVyTW91c2UoZXZlbnQpIHtcclxuICAgICAgICBsZXQgeCA9IGV2ZW50LmNsaWVudFg7XHJcbiAgICAgICAgbGV0IHkgPSBldmVudC5jbGllbnRZO1xyXG4gICAgICAgIGxldCBjdXJyZW50ID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh4LCB5KTtcclxuXHJcbiAgICAgICAgd2hpbGUgKGN1cnJlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT09IHRoaXMpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQZXJmb3JtIGEgcXVlcnkgc2VsZWN0aW9uIG9uIHRoZSBlbGVtZW50LCBub3QgdGhlIHNoYWRvdyByb290LlxyXG4gICAgICovXHJcbiAgICBvdXRlclNlbGVjdG9yKHNlbGVjdG9ycyl7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFBlcmZvcm0gYSBxdWVyeSBzZWxlY3QgYWxsIG9uIHRoZSBlbGVtZW50LCBub3QgdGhlIHNoYWRvdyByb290LlxyXG4gICAgICovXHJcbiAgICBvdXRlclNlbGVjdG9yQWxsKHNlbGVjdG9ycyl7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJ1biB0aGUgcXVlcnkgc2VsZWN0b3Igb24gdGhpcyBlbGVtZW50LlxyXG4gICAgICogSWYgdGhpcyBlbGVtZW50IGhhcyBhIHNoYWRvdywgcnVuIGl0IG9uIHRoYXQgaW5zdGVhZC5cclxuICAgICAqIEBwYXJhbSBzZWxlY3RvcnNcclxuICAgICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudFRhZ05hbWVNYXBbS119XHJcbiAgICAgKi9cclxuICAgcXVlcnlTZWxlY3RvcihzZWxlY3RvcnMpIHtcclxuICAgICAgICBpZiAodGhpcy5zaGFkb3dSb290KXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSdW4gdGhlIHF1ZXJ5IHNlbGVjdG9yIG9uIHRoaXMgZWxlbWVudC5cclxuICAgICAqIElmIHRoaXMgZWxlbWVudCBoYXMgYSBzaGFkb3csIHJ1biBpdCBvbiB0aGF0IGluc3RlYWQuXHJcbiAgICAgKiBAcGFyYW0gc2VsZWN0b3JzXHJcbiAgICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnRUYWdOYW1lTWFwW0tdfVxyXG4gICAgICovXHJcbiAgICBxdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycykge1xyXG4gICAgICAgIGlmICh0aGlzLnNoYWRvd1Jvb3Qpe1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSB0aGlzIGVsZW1lbnQgZnJvbSBpdCdzIHBhcmVudC5cclxuICAgICAqL1xyXG4gICAgZGV0YWNoKCl7XHJcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5kZXggd2l0aGluIHRoZSBwYXJlbnQgZWxlbWVudC5cclxuICAgICAqL1xyXG4gICAgaW5kZXgoKXtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnBhcmVudEVsZW1lbnQuY2hpbGRyZW4pLmluZGV4T2YodGhpcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvQ2FtZWxDYXNlKGlucHV0KXtcclxuICAgIGNvbnN0IHNwbGl0ID0gaW5wdXQuc3BsaXQoXCItXCIpO1xyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzcGxpdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHNwbGl0W2ldID0gc3BsaXRbaV0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzcGxpdFtpXS5zbGljZSgxKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzcGxpdC5qb2luKCcnKTtcclxufVxyXG5cclxuTmlkZ2V0RWxlbWVudC5ESVNBQkxFRF9BVFRSSUJVVEUgPSBcIm5pZGdldC1kaXNhYmxlZFwiO1xyXG5pZiAoIXdpbmRvdy5jdXN0b21FbGVtZW50cy5nZXQoJ25pZGdldC1lbGVtZW50JykpIHtcclxuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ25pZGdldC1lbGVtZW50JywgTmlkZ2V0RWxlbWVudCk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTmlkZ2V0RWxlbWVudDsiLCJcInVzZSBzdHJpY3RcIjtcclxuY29uc3QgTmlkZ2V0RWxlbWVudCA9IHJlcXVpcmUoXCIuLi9OaWRnZXRFbGVtZW50XCIpO1xyXG5cclxuLyoqXHJcbiAqIFNldCB0aGUgZm9udC1zaXplIGFzIGEgbXVsdGlwbGUgb2YgdGhlIGNzcyB2YXJpYWJsZSAtLWZpdC10ZXh0LXVuaXQuXHJcbiAqIFN0eWxlIGV4YW1wbGU6IGNhbGMoNDUgKiB2YXIoLS1maXQtdGV4dC11bml0KSlcclxuICovXHJcbmNsYXNzIEZpdFRleHQge1xyXG4gICAgY29uc3RydWN0b3IobmlkZ2V0KXtcclxuICAgICAgICB0aGlzLm5pZGdldCA9IG5pZGdldDtcclxuICAgICAgICB0aGlzLnBhcnNlQXJndW1lbnRzKCk7XHJcbiAgICAgICAgdGhpcy5jb2VmZmljaWVudCA9IHRoaXMuZXh0cmFjdFVuaXRzKCk7XHJcbiAgICAgICAgdGhpcy5sYXN0Q29lZmZpY2llbnQgPSAwO1xyXG5cclxuICAgICAgICB0aGlzLmxhc3QgPSB7XHJcbiAgICAgICAgICAgIGhEaWZmOiB0aGlzLm5pZGdldC5wYXJlbnRFbGVtZW50Lm9mZnNldEhlaWdodCAtIHRoaXMubmlkZ2V0LnNjcm9sbEhlaWdodCxcclxuICAgICAgICAgICAgd0RpZmY6IHRoaXMubmlkZ2V0LnBhcmVudEVsZW1lbnQub2Zmc2V0V2lkdGggLSB0aGlzLm5pZGdldC5zY3JvbGxXaWR0aFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZXh0cmFjdFVuaXRzKCl7XHJcbiAgICAgICAgY29uc3QgZm9udFNpemUgPSB0aGlzLm5pZGdldC5zdHlsZS5mb250U2l6ZTtcclxuICAgICAgICBpZiAoZm9udFNpemUgPT09IFwiXCIpIHJldHVybiAxO1xyXG4gICAgICAgIGlmICghZm9udFNpemUuZW5kc1dpdGgoXCIgKiB2YXIoLS1maXQtdGV4dC11bml0KSlcIikpIHJldHVybiAxO1xyXG4gICAgICAgIGlmICghZm9udFNpemUuc3RhcnRzV2l0aChcImNhbGMoXCIpKSByZXR1cm4gMTtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlSW50KGZvbnRTaXplLnN1YnN0cihcImNhbGMoXCIubGVuZ3RoKSk7XHJcbiAgICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZSA8IDEpIHJldHVybiAxO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBub3RpZnkoY2Ipe1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gMDtcclxuICAgICAgICBzZXRJbW1lZGlhdGUoKCk9PnRoaXMub25SZXNpemUoY2IpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSBzZXR0aW5ncyBmcm9tIGNzc1xyXG4gICAgICovXHJcbiAgICBwYXJzZUFyZ3VtZW50cygpe1xyXG4gICAgICAgIGxldCBhcmdzID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm5pZGdldCkuZ2V0UHJvcGVydHlWYWx1ZShcIi0tbmlkZ2V0LWZpdC10ZXh0XCIpO1xyXG5cclxuICAgICAgICBpZiAoIWFyZ3MgfHwgYXJncyA9PT0gZmFsc2Upe1xyXG4gICAgICAgICAgICB0aGlzLmhWYWx1ZSA9IDE7XHJcbiAgICAgICAgICAgIHRoaXMud1ZhbHVlID0gMTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZihhcmdzKSA9PSBcInN0cmluZ1wiKXtcclxuICAgICAgICAgICAgaWYgKGFyZ3Muc2VhcmNoKFwiaGVpZ2h0XCIpICE9PSAtMSkgdGhpcy5oVmFsdWUgPSAxO1xyXG4gICAgICAgICAgICBpZiAoYXJncy5zZWFyY2goXCJ3aWR0aFwiKSAhPT0gLTEpIHRoaXMud1ZhbHVlID0gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXQgdGhlIHRleHQgZWxlbWVudCB0byBpdCdzIHBhcmVudCBlbGVtZW50LlxyXG4gICAgICogQHBhcmFtIGhWYWx1ZSB0cnVlLCBmaXQgdGhlIGhlaWdodFxyXG4gICAgICogQHBhcmFtIHdWYWx1ZSB0cnVlLCBmaXQgdGhlIHdpZHRoXHJcbiAgICAgKi9cclxuICAgIG9uUmVzaXplKGNiKXtcclxuICAgICAgICBkZWxldGUgdGhpcy50aW1lb3V0O1xyXG4gICAgICAgIGNiID0gY2IgPz8gZnVuY3Rpb24oKXt9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5uaWRnZXQudGV4dENvbnRlbnQgPT09IFwiXCIpIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5uaWRnZXQucGFyZW50RWxlbWVudC5vZmZzZXRIZWlnaHQgPT09IDApIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5uaWRnZXQucGFyZW50RWxlbWVudC5vZmZzZXRXaWR0aCA9PT0gMCkgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLm5pZGdldC5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIikgcmV0dXJuO1xyXG4gICAgICAgIGlmICghdGhpcy5oVmFsdWUgJiYgIXRoaXMud1ZhbHVlKSByZXR1cm47XHJcblxyXG4gICAgICAgIC8vIGhEaWZmIGdyb3d0aCBkaXJlY3Rpb24gZHVlIHRvIGhlaWdodFxyXG4gICAgICAgIC8vIHdEaWZmIGdyb3d0aCBkaXJlY3Rpb24gZHVlIHRvIHdpZHRoXHJcbiAgICAgICAgbGV0IGhEaWZmID0gdGhpcy5uaWRnZXQucGFyZW50RWxlbWVudC5vZmZzZXRIZWlnaHQgLSB0aGlzLm5pZGdldC5zY3JvbGxIZWlnaHQ7XHJcbiAgICAgICAgbGV0IHdEaWZmID0gdGhpcy5uaWRnZXQucGFyZW50RWxlbWVudC5vZmZzZXRXaWR0aCAtIHRoaXMubmlkZ2V0LnNjcm9sbFdpZHRoO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5sYXN0LmhEaWZmID09PSBoRGlmZiAmJiB0aGlzLmxhc3Qud0RpZmYgPT09IHdEaWZmKSB7XHJcbiAgICAgICAgICAgIGNiKHRoaXMubmlkZ2V0LnN0eWxlLmZvbnRTaXplKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmhWYWx1ZSkgaERpZmYgPSAwO1xyXG4gICAgICAgIGlmICghdGhpcy53VmFsdWUpIHdEaWZmID0gMDtcclxuXHJcbiAgICAgICAgbGV0IGRpciA9IE1hdGguc2lnbihoRGlmZiB8IHdEaWZmKTsgLy8gd2lsbCBwcmVmZXIgdG8gc2hyaW5rXHJcbiAgICAgICAgY29uc3QgbmV3Q29lZmZpY2llbnQgPSB0aGlzLmNvZWZmaWNpZW50ICsgZGlyO1xyXG5cclxuICAgICAgICBjb25zdCBmb250U2l6ZSA9IGBjYWxjKCR7bmV3Q29lZmZpY2llbnR9ICogdmFyKC0tZml0LXRleHQtdW5pdCkpYDtcclxuICAgICAgICBpZiAobmV3Q29lZmZpY2llbnQgIT09IHRoaXMuY29lZmZpY2llbnQgJiYgbmV3Q29lZmZpY2llbnQgIT09IHRoaXMubGFzdENvZWZmaWNpZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMubmlkZ2V0LnN0eWxlLm9wYWNpdHkgPSAwLjA7XHJcbiAgICAgICAgICAgIHRoaXMubmlkZ2V0LnN0eWxlLmZvbnRTaXplID0gZm9udFNpemU7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdENvZWZmaWNpZW50ID0gdGhpcy5jb2VmZmljaWVudDtcclxuICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudCA9IG5ld0NvZWZmaWNpZW50O1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVvdXQgPSBzZXRJbW1lZGlhdGUoKCk9PnRoaXMub25SZXNpemUoY2IpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm5pZGdldC5zdHlsZS5vcGFjaXR5ID0gMS4wO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RDb2VmZmljaWVudCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdCA9IHtoRGlmZjogaERpZmYsIHdEaWZmOiB3RGlmZn07XHJcbiAgICAgICAgICAgIGNiKGZvbnRTaXplKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIG5pZGdldCBlbGVtZW50IGZvciBkaXNwbGF5aW5nIHRleHQuXHJcbiAqIHB1dCAnLS1uaWRnZXQtZml0LXRleHQ6IDEuMDsnIGludG8gY3NzIGZvciB0aGlzIGVsZW1lbnQgdG8gZW5hYmxlIHNjYWxpbmcuXHJcbiAqIHNlZTogTmlkZ2V0U3R5bGUuanNcclxuICovXHJcbmNsYXNzIE5pZGdldFRleHQgZXh0ZW5kcyBOaWRnZXRFbGVtZW50IHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZSgpe1xyXG4gICAgICAgIHN1cGVyLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBmaXRUZXh0KCl7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9maXRUZXh0KSB0aGlzLl9maXRUZXh0ID0gbmV3IEZpdFRleHQodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpdFRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgdGV4dCh2YWx1ZSl7XHJcbiAgICAgICAgdGhpcy5pbm5lclRleHQgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdGV4dCgpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyVGV4dDtcclxuICAgIH1cclxufVxyXG47XHJcblxyXG5pZiAoIXdpbmRvdy5jdXN0b21FbGVtZW50cy5nZXQoJ25pZGdldC10ZXh0JykpIHtcclxuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ25pZGdldC10ZXh0JywgTmlkZ2V0VGV4dCk7XHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBOaWRnZXRUZXh0OyIsIid1c2Ugc3RyaWN0JztcclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBOaWRnZXRFbGVtZW50IDogcmVxdWlyZShcIi4vTmlkZ2V0RWxlbWVudFwiKSxcclxuICAgIE5pZGdldFRleHQgOiByZXF1aXJlKFwiLi9uaWRnZXQtY29tcG9uZW50cy9OaWRnZXRUZXh0XCIpLFxyXG4gICAgQ29uc3RhbnRzOiByZXF1aXJlKFwiLi9Db25zdGFudHNcIiksXHJcbn07IiwiZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7XG4gIGlmIChzZWxmID09PSB2b2lkIDApIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gIH1cblxuICByZXR1cm4gc2VsZjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkO1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsImZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHtcbiAgdHJ5IHtcbiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7XG4gICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZWplY3QoZXJyb3IpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpbmZvLmRvbmUpIHtcbiAgICByZXNvbHZlKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTtcblxuICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcIm5leHRcIiwgdmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJ0aHJvd1wiLCBlcnIpO1xuICAgICAgfVxuXG4gICAgICBfbmV4dCh1bmRlZmluZWQpO1xuICAgIH0pO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hc3luY1RvR2VuZXJhdG9yO1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2NsYXNzQ2FsbENoZWNrO1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsInZhciBzZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoXCIuL3NldFByb3RvdHlwZU9mLmpzXCIpO1xuXG52YXIgaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gcmVxdWlyZShcIi4vaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0LmpzXCIpO1xuXG5mdW5jdGlvbiBfY29uc3RydWN0KFBhcmVudCwgYXJncywgQ2xhc3MpIHtcbiAgaWYgKGlzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBfY29uc3RydWN0ID0gUmVmbGVjdC5jb25zdHJ1Y3Q7XG4gICAgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIG1vZHVsZS5leHBvcnRzID0gX2NvbnN0cnVjdCA9IGZ1bmN0aW9uIF9jb25zdHJ1Y3QoUGFyZW50LCBhcmdzLCBDbGFzcykge1xuICAgICAgdmFyIGEgPSBbbnVsbF07XG4gICAgICBhLnB1c2guYXBwbHkoYSwgYXJncyk7XG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSBGdW5jdGlvbi5iaW5kLmFwcGx5KFBhcmVudCwgYSk7XG4gICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgQ29uc3RydWN0b3IoKTtcbiAgICAgIGlmIChDbGFzcykgc2V0UHJvdG90eXBlT2YoaW5zdGFuY2UsIENsYXNzLnByb3RvdHlwZSk7XG4gICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfTtcblxuICAgIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBfY29uc3RydWN0LmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2NvbnN0cnVjdDtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICByZXR1cm4gQ29uc3RydWN0b3I7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2NyZWF0ZUNsYXNzO1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsInZhciBzdXBlclByb3BCYXNlID0gcmVxdWlyZShcIi4vc3VwZXJQcm9wQmFzZS5qc1wiKTtcblxuZnVuY3Rpb24gX2dldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlcikge1xuICBpZiAodHlwZW9mIFJlZmxlY3QgIT09IFwidW5kZWZpbmVkXCIgJiYgUmVmbGVjdC5nZXQpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IF9nZXQgPSBSZWZsZWN0LmdldDtcbiAgICBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBfZ2V0ID0gZnVuY3Rpb24gX2dldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlcikge1xuICAgICAgdmFyIGJhc2UgPSBzdXBlclByb3BCYXNlKHRhcmdldCwgcHJvcGVydHkpO1xuICAgICAgaWYgKCFiYXNlKSByZXR1cm47XG4gICAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYmFzZSwgcHJvcGVydHkpO1xuXG4gICAgICBpZiAoZGVzYy5nZXQpIHtcbiAgICAgICAgcmV0dXJuIGRlc2MuZ2V0LmNhbGwocmVjZWl2ZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGVzYy52YWx1ZTtcbiAgICB9O1xuXG4gICAgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIgfHwgdGFyZ2V0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfZ2V0O1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsImZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO1xuICB9O1xuICBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG4gIHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2dldFByb3RvdHlwZU9mO1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsInZhciBzZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoXCIuL3NldFByb3RvdHlwZU9mLmpzXCIpO1xuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtcbiAgfVxuXG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG4gIGlmIChzdXBlckNsYXNzKSBzZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2luaGVyaXRzO1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsImZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7XG4gICAgXCJkZWZhdWx0XCI6IG9ialxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQ7XG5tb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwiZnVuY3Rpb24gX2lzTmF0aXZlRnVuY3Rpb24oZm4pIHtcbiAgcmV0dXJuIEZ1bmN0aW9uLnRvU3RyaW5nLmNhbGwoZm4pLmluZGV4T2YoXCJbbmF0aXZlIGNvZGVdXCIpICE9PSAtMTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaXNOYXRpdmVGdW5jdGlvbjtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkge1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7XG4gIGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7XG4gIGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7XG5cbiAgdHJ5IHtcbiAgICBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0O1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsInZhciBfdHlwZW9mID0gcmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mXCIpW1wiZGVmYXVsdFwiXTtcblxudmFyIGFzc2VydFRoaXNJbml0aWFsaXplZCA9IHJlcXVpcmUoXCIuL2Fzc2VydFRoaXNJbml0aWFsaXplZC5qc1wiKTtcblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuICBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkge1xuICAgIHJldHVybiBjYWxsO1xuICB9XG5cbiAgcmV0dXJuIGFzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICBtb2R1bGUuZXhwb3J0cyA9IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICAgIG8uX19wcm90b19fID0gcDtcbiAgICByZXR1cm4gbztcbiAgfTtcblxuICBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG4gIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3NldFByb3RvdHlwZU9mO1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsInZhciBnZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoXCIuL2dldFByb3RvdHlwZU9mLmpzXCIpO1xuXG5mdW5jdGlvbiBfc3VwZXJQcm9wQmFzZShvYmplY3QsIHByb3BlcnR5KSB7XG4gIHdoaWxlICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpKSB7XG4gICAgb2JqZWN0ID0gZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTtcbiAgICBpZiAob2JqZWN0ID09PSBudWxsKSBicmVhaztcbiAgfVxuXG4gIHJldHVybiBvYmplY3Q7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3N1cGVyUHJvcEJhc2U7XG5tb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHtcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xuXG4gIGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikge1xuICAgIG1vZHVsZS5leHBvcnRzID0gX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIG9iajtcbiAgICB9O1xuXG4gICAgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIG1vZHVsZS5leHBvcnRzID0gX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbiAgICB9O1xuXG4gICAgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIF90eXBlb2Yob2JqKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfdHlwZW9mO1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsInZhciBnZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoXCIuL2dldFByb3RvdHlwZU9mLmpzXCIpO1xuXG52YXIgc2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKFwiLi9zZXRQcm90b3R5cGVPZi5qc1wiKTtcblxudmFyIGlzTmF0aXZlRnVuY3Rpb24gPSByZXF1aXJlKFwiLi9pc05hdGl2ZUZ1bmN0aW9uLmpzXCIpO1xuXG52YXIgY29uc3RydWN0ID0gcmVxdWlyZShcIi4vY29uc3RydWN0LmpzXCIpO1xuXG5mdW5jdGlvbiBfd3JhcE5hdGl2ZVN1cGVyKENsYXNzKSB7XG4gIHZhciBfY2FjaGUgPSB0eXBlb2YgTWFwID09PSBcImZ1bmN0aW9uXCIgPyBuZXcgTWFwKCkgOiB1bmRlZmluZWQ7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBfd3JhcE5hdGl2ZVN1cGVyID0gZnVuY3Rpb24gX3dyYXBOYXRpdmVTdXBlcihDbGFzcykge1xuICAgIGlmIChDbGFzcyA9PT0gbnVsbCB8fCAhaXNOYXRpdmVGdW5jdGlvbihDbGFzcykpIHJldHVybiBDbGFzcztcblxuICAgIGlmICh0eXBlb2YgQ2xhc3MgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgX2NhY2hlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBpZiAoX2NhY2hlLmhhcyhDbGFzcykpIHJldHVybiBfY2FjaGUuZ2V0KENsYXNzKTtcblxuICAgICAgX2NhY2hlLnNldChDbGFzcywgV3JhcHBlcik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gV3JhcHBlcigpIHtcbiAgICAgIHJldHVybiBjb25zdHJ1Y3QoQ2xhc3MsIGFyZ3VtZW50cywgZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3IpO1xuICAgIH1cblxuICAgIFdyYXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDbGFzcy5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBXcmFwcGVyLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBzZXRQcm90b3R5cGVPZihXcmFwcGVyLCBDbGFzcyk7XG4gIH07XG5cbiAgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuICByZXR1cm4gX3dyYXBOYXRpdmVTdXBlcihDbGFzcyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3dyYXBOYXRpdmVTdXBlcjtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWdlbmVyYXRvci1ydW50aW1lXCIpO1xuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxudmFyIHJ1bnRpbWUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5O1xuICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC5cbiAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2wgOiB7fTtcbiAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIjtcbiAgdmFyIGFzeW5jSXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIjtcbiAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCBcIkBAdG9TdHJpbmdUYWdcIjtcblxuICBmdW5jdGlvbiBkZWZpbmUob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqW2tleV07XG4gIH1cbiAgdHJ5IHtcbiAgICAvLyBJRSA4IGhhcyBhIGJyb2tlbiBPYmplY3QuZGVmaW5lUHJvcGVydHkgdGhhdCBvbmx5IHdvcmtzIG9uIERPTSBvYmplY3RzLlxuICAgIGRlZmluZSh7fSwgXCJcIik7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGRlZmluZSA9IGZ1bmN0aW9uKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIG9ialtrZXldID0gdmFsdWU7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBJZiBvdXRlckZuIHByb3ZpZGVkIGFuZCBvdXRlckZuLnByb3RvdHlwZSBpcyBhIEdlbmVyYXRvciwgdGhlbiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvci5cbiAgICB2YXIgcHJvdG9HZW5lcmF0b3IgPSBvdXRlckZuICYmIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yID8gb3V0ZXJGbiA6IEdlbmVyYXRvcjtcbiAgICB2YXIgZ2VuZXJhdG9yID0gT2JqZWN0LmNyZWF0ZShwcm90b0dlbmVyYXRvci5wcm90b3R5cGUpO1xuICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQodHJ5TG9jc0xpc3QgfHwgW10pO1xuXG4gICAgLy8gVGhlIC5faW52b2tlIG1ldGhvZCB1bmlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcy5cbiAgICBnZW5lcmF0b3IuX2ludm9rZSA9IG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG5cbiAgICByZXR1cm4gZ2VuZXJhdG9yO1xuICB9XG4gIGV4cG9ydHMud3JhcCA9IHdyYXA7XG5cbiAgLy8gVHJ5L2NhdGNoIGhlbHBlciB0byBtaW5pbWl6ZSBkZW9wdGltaXphdGlvbnMuIFJldHVybnMgYSBjb21wbGV0aW9uXG4gIC8vIHJlY29yZCBsaWtlIGNvbnRleHQudHJ5RW50cmllc1tpXS5jb21wbGV0aW9uLiBUaGlzIGludGVyZmFjZSBjb3VsZFxuICAvLyBoYXZlIGJlZW4gKGFuZCB3YXMgcHJldmlvdXNseSkgZGVzaWduZWQgdG8gdGFrZSBhIGNsb3N1cmUgdG8gYmVcbiAgLy8gaW52b2tlZCB3aXRob3V0IGFyZ3VtZW50cywgYnV0IGluIGFsbCB0aGUgY2FzZXMgd2UgY2FyZSBhYm91dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYW4gZXhpc3RpbmcgbWV0aG9kIHdlIHdhbnQgdG8gY2FsbCwgc28gdGhlcmUncyBubyBuZWVkXG4gIC8vIHRvIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBvYmplY3QuIFdlIGNhbiBldmVuIGdldCBhd2F5IHdpdGggYXNzdW1pbmdcbiAgLy8gdGhlIG1ldGhvZCB0YWtlcyBleGFjdGx5IG9uZSBhcmd1bWVudCwgc2luY2UgdGhhdCBoYXBwZW5zIHRvIGJlIHRydWVcbiAgLy8gaW4gZXZlcnkgY2FzZSwgc28gd2UgZG9uJ3QgaGF2ZSB0byB0b3VjaCB0aGUgYXJndW1lbnRzIG9iamVjdC4gVGhlXG4gIC8vIG9ubHkgYWRkaXRpb25hbCBhbGxvY2F0aW9uIHJlcXVpcmVkIGlzIHRoZSBjb21wbGV0aW9uIHJlY29yZCwgd2hpY2hcbiAgLy8gaGFzIGEgc3RhYmxlIHNoYXBlIGFuZCBzbyBob3BlZnVsbHkgc2hvdWxkIGJlIGNoZWFwIHRvIGFsbG9jYXRlLlxuICBmdW5jdGlvbiB0cnlDYXRjaChmbiwgb2JqLCBhcmcpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJub3JtYWxcIiwgYXJnOiBmbi5jYWxsKG9iaiwgYXJnKSB9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJ0aHJvd1wiLCBhcmc6IGVyciB9O1xuICAgIH1cbiAgfVxuXG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0ID0gXCJzdXNwZW5kZWRTdGFydFwiO1xuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRZaWVsZCA9IFwic3VzcGVuZGVkWWllbGRcIjtcbiAgdmFyIEdlblN0YXRlRXhlY3V0aW5nID0gXCJleGVjdXRpbmdcIjtcbiAgdmFyIEdlblN0YXRlQ29tcGxldGVkID0gXCJjb21wbGV0ZWRcIjtcblxuICAvLyBSZXR1cm5pbmcgdGhpcyBvYmplY3QgZnJvbSB0aGUgaW5uZXJGbiBoYXMgdGhlIHNhbWUgZWZmZWN0IGFzXG4gIC8vIGJyZWFraW5nIG91dCBvZiB0aGUgZGlzcGF0Y2ggc3dpdGNoIHN0YXRlbWVudC5cbiAgdmFyIENvbnRpbnVlU2VudGluZWwgPSB7fTtcblxuICAvLyBEdW1teSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMgdGhhdCB3ZSB1c2UgYXMgdGhlIC5jb25zdHJ1Y3RvciBhbmRcbiAgLy8gLmNvbnN0cnVjdG9yLnByb3RvdHlwZSBwcm9wZXJ0aWVzIGZvciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gR2VuZXJhdG9yXG4gIC8vIG9iamVjdHMuIEZvciBmdWxsIHNwZWMgY29tcGxpYW5jZSwgeW91IG1heSB3aXNoIHRvIGNvbmZpZ3VyZSB5b3VyXG4gIC8vIG1pbmlmaWVyIG5vdCB0byBtYW5nbGUgdGhlIG5hbWVzIG9mIHRoZXNlIHR3byBmdW5jdGlvbnMuXG4gIGZ1bmN0aW9uIEdlbmVyYXRvcigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKSB7fVxuXG4gIC8vIFRoaXMgaXMgYSBwb2x5ZmlsbCBmb3IgJUl0ZXJhdG9yUHJvdG90eXBlJSBmb3IgZW52aXJvbm1lbnRzIHRoYXRcbiAgLy8gZG9uJ3QgbmF0aXZlbHkgc3VwcG9ydCBpdC5cbiAgdmFyIEl0ZXJhdG9yUHJvdG90eXBlID0ge307XG4gIEl0ZXJhdG9yUHJvdG90eXBlW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICB2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG4gIHZhciBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvICYmIGdldFByb3RvKGdldFByb3RvKHZhbHVlcyhbXSkpKTtcbiAgaWYgKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICYmXG4gICAgICBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAhPT0gT3AgJiZcbiAgICAgIGhhc093bi5jYWxsKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlLCBpdGVyYXRvclN5bWJvbCkpIHtcbiAgICAvLyBUaGlzIGVudmlyb25tZW50IGhhcyBhIG5hdGl2ZSAlSXRlcmF0b3JQcm90b3R5cGUlOyB1c2UgaXQgaW5zdGVhZFxuICAgIC8vIG9mIHRoZSBwb2x5ZmlsbC5cbiAgICBJdGVyYXRvclByb3RvdHlwZSA9IE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlO1xuICB9XG5cbiAgdmFyIEdwID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUucHJvdG90eXBlID1cbiAgICBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSk7XG4gIEdlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZSA9IEdwLmNvbnN0cnVjdG9yID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR2VuZXJhdG9yRnVuY3Rpb247XG4gIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gZGVmaW5lKFxuICAgIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLFxuICAgIHRvU3RyaW5nVGFnU3ltYm9sLFxuICAgIFwiR2VuZXJhdG9yRnVuY3Rpb25cIlxuICApO1xuXG4gIC8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlXG4gIC8vIEl0ZXJhdG9yIGludGVyZmFjZSBpbiB0ZXJtcyBvZiBhIHNpbmdsZSAuX2ludm9rZSBtZXRob2QuXG4gIGZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhwcm90b3R5cGUpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIGRlZmluZShwcm90b3R5cGUsIG1ldGhvZCwgZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UobWV0aG9kLCBhcmcpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICB2YXIgY3RvciA9IHR5cGVvZiBnZW5GdW4gPT09IFwiZnVuY3Rpb25cIiAmJiBnZW5GdW4uY29uc3RydWN0b3I7XG4gICAgcmV0dXJuIGN0b3JcbiAgICAgID8gY3RvciA9PT0gR2VuZXJhdG9yRnVuY3Rpb24gfHxcbiAgICAgICAgLy8gRm9yIHRoZSBuYXRpdmUgR2VuZXJhdG9yRnVuY3Rpb24gY29uc3RydWN0b3IsIHRoZSBiZXN0IHdlIGNhblxuICAgICAgICAvLyBkbyBpcyB0byBjaGVjayBpdHMgLm5hbWUgcHJvcGVydHkuXG4gICAgICAgIChjdG9yLmRpc3BsYXlOYW1lIHx8IGN0b3IubmFtZSkgPT09IFwiR2VuZXJhdG9yRnVuY3Rpb25cIlxuICAgICAgOiBmYWxzZTtcbiAgfTtcblxuICBleHBvcnRzLm1hcmsgPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoZ2VuRnVuLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdlbkZ1bi5fX3Byb3RvX18gPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgICAgIGRlZmluZShnZW5GdW4sIHRvU3RyaW5nVGFnU3ltYm9sLCBcIkdlbmVyYXRvckZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgICBnZW5GdW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShHcCk7XG4gICAgcmV0dXJuIGdlbkZ1bjtcbiAgfTtcblxuICAvLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG9cbiAgLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3RcbiAgLy8gYGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIilgIHRvIGRldGVybWluZSBpZiB0aGUgeWllbGRlZCB2YWx1ZSBpc1xuICAvLyBtZWFudCB0byBiZSBhd2FpdGVkLlxuICBleHBvcnRzLmF3cmFwID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIHsgX19hd2FpdDogYXJnIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihnZW5lcmF0b3IsIFByb21pc2VJbXBsKSB7XG4gICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChnZW5lcmF0b3JbbWV0aG9kXSwgZ2VuZXJhdG9yLCBhcmcpO1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgcmVqZWN0KHJlY29yZC5hcmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJlY29yZC5hcmc7XG4gICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIikpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZS5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJuZXh0XCIsIHZhbHVlLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaW52b2tlKFwidGhyb3dcIiwgZXJyLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24odW53cmFwcGVkKSB7XG4gICAgICAgICAgLy8gV2hlbiBhIHlpZWxkZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgaXRzIGZpbmFsIHZhbHVlIGJlY29tZXNcbiAgICAgICAgICAvLyB0aGUgLnZhbHVlIG9mIHRoZSBQcm9taXNlPHt2YWx1ZSxkb25lfT4gcmVzdWx0IGZvciB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IGl0ZXJhdGlvbi5cbiAgICAgICAgICByZXN1bHQudmFsdWUgPSB1bndyYXBwZWQ7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgIC8vIElmIGEgcmVqZWN0ZWQgUHJvbWlzZSB3YXMgeWllbGRlZCwgdGhyb3cgdGhlIHJlamVjdGlvbiBiYWNrXG4gICAgICAgICAgLy8gaW50byB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIHNvIGl0IGNhbiBiZSBoYW5kbGVkIHRoZXJlLlxuICAgICAgICAgIHJldHVybiBpbnZva2UoXCJ0aHJvd1wiLCBlcnJvciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHByZXZpb3VzUHJvbWlzZTtcblxuICAgIGZ1bmN0aW9uIGVucXVldWUobWV0aG9kLCBhcmcpIHtcbiAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2VJbXBsKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPVxuICAgICAgICAvLyBJZiBlbnF1ZXVlIGhhcyBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gd2Ugd2FudCB0byB3YWl0IHVudGlsXG4gICAgICAgIC8vIGFsbCBwcmV2aW91cyBQcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQgYmVmb3JlIGNhbGxpbmcgaW52b2tlLFxuICAgICAgICAvLyBzbyB0aGF0IHJlc3VsdHMgYXJlIGFsd2F5cyBkZWxpdmVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuIElmXG4gICAgICAgIC8vIGVucXVldWUgaGFzIG5vdCBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gaXQgaXMgaW1wb3J0YW50IHRvXG4gICAgICAgIC8vIGNhbGwgaW52b2tlIGltbWVkaWF0ZWx5LCB3aXRob3V0IHdhaXRpbmcgb24gYSBjYWxsYmFjayB0byBmaXJlLFxuICAgICAgICAvLyBzbyB0aGF0IHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gaGFzIHRoZSBvcHBvcnR1bml0eSB0byBkb1xuICAgICAgICAvLyBhbnkgbmVjZXNzYXJ5IHNldHVwIGluIGEgcHJlZGljdGFibGUgd2F5LiBUaGlzIHByZWRpY3RhYmlsaXR5XG4gICAgICAgIC8vIGlzIHdoeSB0aGUgUHJvbWlzZSBjb25zdHJ1Y3RvciBzeW5jaHJvbm91c2x5IGludm9rZXMgaXRzXG4gICAgICAgIC8vIGV4ZWN1dG9yIGNhbGxiYWNrLCBhbmQgd2h5IGFzeW5jIGZ1bmN0aW9ucyBzeW5jaHJvbm91c2x5XG4gICAgICAgIC8vIGV4ZWN1dGUgY29kZSBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0LiBTaW5jZSB3ZSBpbXBsZW1lbnQgc2ltcGxlXG4gICAgICAgIC8vIGFzeW5jIGZ1bmN0aW9ucyBpbiB0ZXJtcyBvZiBhc3luYyBnZW5lcmF0b3JzLCBpdCBpcyBlc3BlY2lhbGx5XG4gICAgICAgIC8vIGltcG9ydGFudCB0byBnZXQgdGhpcyByaWdodCwgZXZlbiB0aG91Z2ggaXQgcmVxdWlyZXMgY2FyZS5cbiAgICAgICAgcHJldmlvdXNQcm9taXNlID8gcHJldmlvdXNQcm9taXNlLnRoZW4oXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsXG4gICAgICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpbmcgZmFpbHVyZXMgdG8gUHJvbWlzZXMgcmV0dXJuZWQgYnkgbGF0ZXJcbiAgICAgICAgICAvLyBpbnZvY2F0aW9ucyBvZiB0aGUgaXRlcmF0b3IuXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmdcbiAgICAgICAgKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7XG4gICAgfVxuXG4gICAgLy8gRGVmaW5lIHRoZSB1bmlmaWVkIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudCAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIChzZWUgZGVmaW5lSXRlcmF0b3JNZXRob2RzKS5cbiAgICB0aGlzLl9pbnZva2UgPSBlbnF1ZXVlO1xuICB9XG5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKTtcbiAgQXN5bmNJdGVyYXRvci5wcm90b3R5cGVbYXN5bmNJdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIGV4cG9ydHMuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7XG5cbiAgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZlxuICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2ZcbiAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG4gIGV4cG9ydHMuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCwgUHJvbWlzZUltcGwpIHtcbiAgICBpZiAoUHJvbWlzZUltcGwgPT09IHZvaWQgMCkgUHJvbWlzZUltcGwgPSBQcm9taXNlO1xuXG4gICAgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcihcbiAgICAgIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpLFxuICAgICAgUHJvbWlzZUltcGxcbiAgICApO1xuXG4gICAgcmV0dXJuIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbihvdXRlckZuKVxuICAgICAgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci5cbiAgICAgIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXN1bHQudmFsdWUgOiBpdGVyLm5leHQoKTtcbiAgICAgICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7XG4gICAgdmFyIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydDtcblxuICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUNvbXBsZXRlZCkge1xuICAgICAgICBpZiAobWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICB0aHJvdyBhcmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCZSBmb3JnaXZpbmcsIHBlciAyNS4zLjMuMy4zIG9mIHRoZSBzcGVjOlxuICAgICAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lXG4gICAgICAgIHJldHVybiBkb25lUmVzdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHQubWV0aG9kID0gbWV0aG9kO1xuICAgICAgY29udGV4dC5hcmcgPSBhcmc7XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7XG4gICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICAgIHZhciBkZWxlZ2F0ZVJlc3VsdCA9IG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0ID09PSBDb250aW51ZVNlbnRpbmVsKSBjb250aW51ZTtcbiAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZVJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgLy8gU2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICBjb250ZXh0LnNlbnQgPSBjb250ZXh0Ll9zZW50ID0gY29udGV4dC5hcmc7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5hcmc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICAgIGNvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIGNvbnRleHQuYXJnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7XG5cbiAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09XG4gICAgICAgICAgLy8gR2VuU3RhdGVFeGVjdXRpbmcgYW5kIGxvb3AgYmFjayBmb3IgYW5vdGhlciBpbnZvY2F0aW9uLlxuICAgICAgICAgIHN0YXRlID0gY29udGV4dC5kb25lXG4gICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkXG4gICAgICAgICAgICA6IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG5cbiAgICAgICAgICBpZiAocmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQuYXJnLFxuICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgIC8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGVcbiAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKSBjYWxsIGFib3ZlLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBDYWxsIGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXShjb250ZXh0LmFyZykgYW5kIGhhbmRsZSB0aGVcbiAgLy8gcmVzdWx0LCBlaXRoZXIgYnkgcmV0dXJuaW5nIGEgeyB2YWx1ZSwgZG9uZSB9IHJlc3VsdCBmcm9tIHRoZVxuICAvLyBkZWxlZ2F0ZSBpdGVyYXRvciwgb3IgYnkgbW9kaWZ5aW5nIGNvbnRleHQubWV0aG9kIGFuZCBjb250ZXh0LmFyZyxcbiAgLy8gc2V0dGluZyBjb250ZXh0LmRlbGVnYXRlIHRvIG51bGwsIGFuZCByZXR1cm5pbmcgdGhlIENvbnRpbnVlU2VudGluZWwuXG4gIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdO1xuICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQSAudGhyb3cgb3IgLnJldHVybiB3aGVuIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgbm8gLnRocm93XG4gICAgICAvLyBtZXRob2QgYWx3YXlzIHRlcm1pbmF0ZXMgdGhlIHlpZWxkKiBsb29wLlxuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIC8vIE5vdGU6IFtcInJldHVyblwiXSBtdXN0IGJlIHVzZWQgZm9yIEVTMyBwYXJzaW5nIGNvbXBhdGliaWxpdHkuXG4gICAgICAgIGlmIChkZWxlZ2F0ZS5pdGVyYXRvcltcInJldHVyblwiXSkge1xuICAgICAgICAgIC8vIElmIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgYSByZXR1cm4gbWV0aG9kLCBnaXZlIGl0IGFcbiAgICAgICAgICAvLyBjaGFuY2UgdG8gY2xlYW4gdXAuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIC8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tXG4gICAgICAgICAgICAvLyBcInJldHVyblwiIHRvIFwidGhyb3dcIiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy5cbiAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gobWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgY29udGV4dC5hcmcpO1xuXG4gICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG5cbiAgICBpZiAoISBpbmZvKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICBpZiAoaW5mby5kb25lKSB7XG4gICAgICAvLyBBc3NpZ24gdGhlIHJlc3VsdCBvZiB0aGUgZmluaXNoZWQgZGVsZWdhdGUgdG8gdGhlIHRlbXBvcmFyeVxuICAgICAgLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlO1xuXG4gICAgICAvLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuXG4gICAgICAvLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgXCJ0aHJvd1wiIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGVcbiAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWZcbiAgICAgIC8vIGNvbnRleHQubWV0aG9kIHdhcyBcIm5leHRcIiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuXG4gICAgICAvLyBcImNvbnN1bWVkXCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXNcbiAgICAgIC8vIFwicmV0dXJuXCIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlXG4gICAgICAvLyBvdXRlciBnZW5lcmF0b3IuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgIT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmUteWllbGQgdGhlIHJlc3VsdCByZXR1cm5lZCBieSB0aGUgZGVsZWdhdGUgbWV0aG9kLlxuICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuXG4gICAgLy8gVGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCBzbyBmb3JnZXQgaXQgYW5kIGNvbnRpbnVlIHdpdGhcbiAgICAvLyB0aGUgb3V0ZXIgZ2VuZXJhdG9yLlxuICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICB9XG5cbiAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcbiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLlxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApO1xuXG4gIGRlZmluZShHcCwgdG9TdHJpbmdUYWdTeW1ib2wsIFwiR2VuZXJhdG9yXCIpO1xuXG4gIC8vIEEgR2VuZXJhdG9yIHNob3VsZCBhbHdheXMgcmV0dXJuIGl0c2VsZiBhcyB0aGUgaXRlcmF0b3Igb2JqZWN0IHdoZW4gdGhlXG4gIC8vIEBAaXRlcmF0b3IgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIGl0LiBTb21lIGJyb3dzZXJzJyBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlXG4gIC8vIGl0ZXJhdG9yIHByb3RvdHlwZSBjaGFpbiBpbmNvcnJlY3RseSBpbXBsZW1lbnQgdGhpcywgY2F1c2luZyB0aGUgR2VuZXJhdG9yXG4gIC8vIG9iamVjdCB0byBub3QgYmUgcmV0dXJuZWQgZnJvbSB0aGlzIGNhbGwuIFRoaXMgZW5zdXJlcyB0aGF0IGRvZXNuJ3QgaGFwcGVuLlxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlZ2VuZXJhdG9yL2lzc3Vlcy8yNzQgZm9yIG1vcmUgZGV0YWlscy5cbiAgR3BbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgR3AudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJbb2JqZWN0IEdlbmVyYXRvcl1cIjtcbiAgfTtcblxuICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkobG9jcykge1xuICAgIHZhciBlbnRyeSA9IHsgdHJ5TG9jOiBsb2NzWzBdIH07XG5cbiAgICBpZiAoMSBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5jYXRjaExvYyA9IGxvY3NbMV07XG4gICAgfVxuXG4gICAgaWYgKDIgaW4gbG9jcykge1xuICAgICAgZW50cnkuZmluYWxseUxvYyA9IGxvY3NbMl07XG4gICAgICBlbnRyeS5hZnRlckxvYyA9IGxvY3NbM107XG4gICAgfVxuXG4gICAgdGhpcy50cnlFbnRyaWVzLnB1c2goZW50cnkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRUcnlFbnRyeShlbnRyeSkge1xuICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uIHx8IHt9O1xuICAgIHJlY29yZC50eXBlID0gXCJub3JtYWxcIjtcbiAgICBkZWxldGUgcmVjb3JkLmFyZztcbiAgICBlbnRyeS5jb21wbGV0aW9uID0gcmVjb3JkO1xuICB9XG5cbiAgZnVuY3Rpb24gQ29udGV4dCh0cnlMb2NzTGlzdCkge1xuICAgIC8vIFRoZSByb290IGVudHJ5IG9iamVjdCAoZWZmZWN0aXZlbHkgYSB0cnkgc3RhdGVtZW50IHdpdGhvdXQgYSBjYXRjaFxuICAgIC8vIG9yIGEgZmluYWxseSBibG9jaykgZ2l2ZXMgdXMgYSBwbGFjZSB0byBzdG9yZSB2YWx1ZXMgdGhyb3duIGZyb21cbiAgICAvLyBsb2NhdGlvbnMgd2hlcmUgdGhlcmUgaXMgbm8gZW5jbG9zaW5nIHRyeSBzdGF0ZW1lbnQuXG4gICAgdGhpcy50cnlFbnRyaWVzID0gW3sgdHJ5TG9jOiBcInJvb3RcIiB9XTtcbiAgICB0cnlMb2NzTGlzdC5mb3JFYWNoKHB1c2hUcnlFbnRyeSwgdGhpcyk7XG4gICAgdGhpcy5yZXNldCh0cnVlKTtcbiAgfVxuXG4gIGV4cG9ydHMua2V5cyA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgfVxuICAgIGtleXMucmV2ZXJzZSgpO1xuXG4gICAgLy8gUmF0aGVyIHRoYW4gcmV0dXJuaW5nIGFuIG9iamVjdCB3aXRoIGEgbmV4dCBtZXRob2QsIHdlIGtlZXBcbiAgICAvLyB0aGluZ3Mgc2ltcGxlIGFuZCByZXR1cm4gdGhlIG5leHQgZnVuY3Rpb24gaXRzZWxmLlxuICAgIHJldHVybiBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgd2hpbGUgKGtleXMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzLnBvcCgpO1xuICAgICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICAgIG5leHQudmFsdWUgPSBrZXk7XG4gICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVG8gYXZvaWQgY3JlYXRpbmcgYW4gYWRkaXRpb25hbCBvYmplY3QsIHdlIGp1c3QgaGFuZyB0aGUgLnZhbHVlXG4gICAgICAvLyBhbmQgLmRvbmUgcHJvcGVydGllcyBvZmYgdGhlIG5leHQgZnVuY3Rpb24gb2JqZWN0IGl0c2VsZi4gVGhpc1xuICAgICAgLy8gYWxzbyBlbnN1cmVzIHRoYXQgdGhlIG1pbmlmaWVyIHdpbGwgbm90IGFub255bWl6ZSB0aGUgZnVuY3Rpb24uXG4gICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfTtcbiAgfTtcblxuICBmdW5jdGlvbiB2YWx1ZXMoaXRlcmFibGUpIHtcbiAgICBpZiAoaXRlcmFibGUpIHtcbiAgICAgIHZhciBpdGVyYXRvck1ldGhvZCA9IGl0ZXJhYmxlW2l0ZXJhdG9yU3ltYm9sXTtcbiAgICAgIGlmIChpdGVyYXRvck1ldGhvZCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JNZXRob2QuY2FsbChpdGVyYWJsZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgaXRlcmFibGUubmV4dCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBpdGVyYWJsZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc05hTihpdGVyYWJsZS5sZW5ndGgpKSB7XG4gICAgICAgIHZhciBpID0gLTEsIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICAgIHdoaWxlICgrK2kgPCBpdGVyYWJsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbChpdGVyYWJsZSwgaSkpIHtcbiAgICAgICAgICAgICAgbmV4dC52YWx1ZSA9IGl0ZXJhYmxlW2ldO1xuICAgICAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbmV4dC52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuXG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG5leHQubmV4dCA9IG5leHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGFuIGl0ZXJhdG9yIHdpdGggbm8gdmFsdWVzLlxuICAgIHJldHVybiB7IG5leHQ6IGRvbmVSZXN1bHQgfTtcbiAgfVxuICBleHBvcnRzLnZhbHVlcyA9IHZhbHVlcztcblxuICBmdW5jdGlvbiBkb25lUmVzdWx0KCkge1xuICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgfVxuXG4gIENvbnRleHQucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDb250ZXh0LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKHNraXBUZW1wUmVzZXQpIHtcbiAgICAgIHRoaXMucHJldiA9IDA7XG4gICAgICB0aGlzLm5leHQgPSAwO1xuICAgICAgLy8gUmVzZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICB0aGlzLmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuXG4gICAgICB0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KTtcblxuICAgICAgaWYgKCFza2lwVGVtcFJlc2V0KSB7XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcykge1xuICAgICAgICAgIC8vIE5vdCBzdXJlIGFib3V0IHRoZSBvcHRpbWFsIG9yZGVyIG9mIHRoZXNlIGNvbmRpdGlvbnM6XG4gICAgICAgICAgaWYgKG5hbWUuY2hhckF0KDApID09PSBcInRcIiAmJlxuICAgICAgICAgICAgICBoYXNPd24uY2FsbCh0aGlzLCBuYW1lKSAmJlxuICAgICAgICAgICAgICAhaXNOYU4oK25hbWUuc2xpY2UoMSkpKSB7XG4gICAgICAgICAgICB0aGlzW25hbWVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG5cbiAgICAgIHZhciByb290RW50cnkgPSB0aGlzLnRyeUVudHJpZXNbMF07XG4gICAgICB2YXIgcm9vdFJlY29yZCA9IHJvb3RFbnRyeS5jb21wbGV0aW9uO1xuICAgICAgaWYgKHJvb3RSZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJvb3RSZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5ydmFsO1xuICAgIH0sXG5cbiAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24oZXhjZXB0aW9uKSB7XG4gICAgICBpZiAodGhpcy5kb25lKSB7XG4gICAgICAgIHRocm93IGV4Y2VwdGlvbjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICAgICAgZnVuY3Rpb24gaGFuZGxlKGxvYywgY2F1Z2h0KSB7XG4gICAgICAgIHJlY29yZC50eXBlID0gXCJ0aHJvd1wiO1xuICAgICAgICByZWNvcmQuYXJnID0gZXhjZXB0aW9uO1xuICAgICAgICBjb250ZXh0Lm5leHQgPSBsb2M7XG5cbiAgICAgICAgaWYgKGNhdWdodCkge1xuICAgICAgICAgIC8vIElmIHRoZSBkaXNwYXRjaGVkIGV4Y2VwdGlvbiB3YXMgY2F1Z2h0IGJ5IGEgY2F0Y2ggYmxvY2ssXG4gICAgICAgICAgLy8gdGhlbiBsZXQgdGhhdCBjYXRjaCBibG9jayBoYW5kbGUgdGhlIGV4Y2VwdGlvbiBub3JtYWxseS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICEhIGNhdWdodDtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IFwicm9vdFwiKSB7XG4gICAgICAgICAgLy8gRXhjZXB0aW9uIHRocm93biBvdXRzaWRlIG9mIGFueSB0cnkgYmxvY2sgdGhhdCBjb3VsZCBoYW5kbGVcbiAgICAgICAgICAvLyBpdCwgc28gc2V0IHRoZSBjb21wbGV0aW9uIHZhbHVlIG9mIHRoZSBlbnRpcmUgZnVuY3Rpb24gdG9cbiAgICAgICAgICAvLyB0aHJvdyB0aGUgZXhjZXB0aW9uLlxuICAgICAgICAgIHJldHVybiBoYW5kbGUoXCJlbmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldikge1xuICAgICAgICAgIHZhciBoYXNDYXRjaCA9IGhhc093bi5jYWxsKGVudHJ5LCBcImNhdGNoTG9jXCIpO1xuICAgICAgICAgIHZhciBoYXNGaW5hbGx5ID0gaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKTtcblxuICAgICAgICAgIGlmIChoYXNDYXRjaCAmJiBoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzQ2F0Y2gpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYWJydXB0OiBmdW5jdGlvbih0eXBlLCBhcmcpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKSAmJlxuICAgICAgICAgICAgdGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgIHZhciBmaW5hbGx5RW50cnkgPSBlbnRyeTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZmluYWxseUVudHJ5ICYmXG4gICAgICAgICAgKHR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgICB0eXBlID09PSBcImNvbnRpbnVlXCIpICYmXG4gICAgICAgICAgZmluYWxseUVudHJ5LnRyeUxvYyA8PSBhcmcgJiZcbiAgICAgICAgICBhcmcgPD0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgLy8gSWdub3JlIHRoZSBmaW5hbGx5IGVudHJ5IGlmIGNvbnRyb2wgaXMgbm90IGp1bXBpbmcgdG8gYVxuICAgICAgICAvLyBsb2NhdGlvbiBvdXRzaWRlIHRoZSB0cnkvY2F0Y2ggYmxvY2suXG4gICAgICAgIGZpbmFsbHlFbnRyeSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciByZWNvcmQgPSBmaW5hbGx5RW50cnkgPyBmaW5hbGx5RW50cnkuY29tcGxldGlvbiA6IHt9O1xuICAgICAgcmVjb3JkLnR5cGUgPSB0eXBlO1xuICAgICAgcmVjb3JkLmFyZyA9IGFyZztcblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSkge1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICB0aGlzLm5leHQgPSBmaW5hbGx5RW50cnkuZmluYWxseUxvYztcbiAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlKHJlY29yZCk7XG4gICAgfSxcblxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbihyZWNvcmQsIGFmdGVyTG9jKSB7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgIHJlY29yZC50eXBlID09PSBcImNvbnRpbnVlXCIpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gcmVjb3JkLmFyZztcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgdGhpcy5ydmFsID0gdGhpcy5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwicmV0dXJuXCI7XG4gICAgICAgIHRoaXMubmV4dCA9IFwiZW5kXCI7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiICYmIGFmdGVyTG9jKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IGFmdGVyTG9jO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9LFxuXG4gICAgZmluaXNoOiBmdW5jdGlvbihmaW5hbGx5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LmZpbmFsbHlMb2MgPT09IGZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB0aGlzLmNvbXBsZXRlKGVudHJ5LmNvbXBsZXRpb24sIGVudHJ5LmFmdGVyTG9jKTtcbiAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBcImNhdGNoXCI6IGZ1bmN0aW9uKHRyeUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IHRyeUxvYykge1xuICAgICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICB2YXIgdGhyb3duID0gcmVjb3JkLmFyZztcbiAgICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhyb3duO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBjb250ZXh0LmNhdGNoIG1ldGhvZCBtdXN0IG9ubHkgYmUgY2FsbGVkIHdpdGggYSBsb2NhdGlvblxuICAgICAgLy8gYXJndW1lbnQgdGhhdCBjb3JyZXNwb25kcyB0byBhIGtub3duIGNhdGNoIGJsb2NrLlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpO1xuICAgIH0sXG5cbiAgICBkZWxlZ2F0ZVlpZWxkOiBmdW5jdGlvbihpdGVyYWJsZSwgcmVzdWx0TmFtZSwgbmV4dExvYykge1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IHtcbiAgICAgICAgaXRlcmF0b3I6IHZhbHVlcyhpdGVyYWJsZSksXG4gICAgICAgIHJlc3VsdE5hbWU6IHJlc3VsdE5hbWUsXG4gICAgICAgIG5leHRMb2M6IG5leHRMb2NcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgLy8gRGVsaWJlcmF0ZWx5IGZvcmdldCB0aGUgbGFzdCBzZW50IHZhbHVlIHNvIHRoYXQgd2UgZG9uJ3RcbiAgICAgICAgLy8gYWNjaWRlbnRhbGx5IHBhc3MgaXQgb24gdG8gdGhlIGRlbGVnYXRlLlxuICAgICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuICB9O1xuXG4gIC8vIFJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGVcbiAgLy8gb3Igbm90LCByZXR1cm4gdGhlIHJ1bnRpbWUgb2JqZWN0IHNvIHRoYXQgd2UgY2FuIGRlY2xhcmUgdGhlIHZhcmlhYmxlXG4gIC8vIHJlZ2VuZXJhdG9yUnVudGltZSBpbiB0aGUgb3V0ZXIgc2NvcGUsIHdoaWNoIGFsbG93cyB0aGlzIG1vZHVsZSB0byBiZVxuICAvLyBpbmplY3RlZCBlYXNpbHkgYnkgYGJpbi9yZWdlbmVyYXRvciAtLWluY2x1ZGUtcnVudGltZSBzY3JpcHQuanNgLlxuICByZXR1cm4gZXhwb3J0cztcblxufShcbiAgLy8gSWYgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlLCB1c2UgbW9kdWxlLmV4cG9ydHNcbiAgLy8gYXMgdGhlIHJlZ2VuZXJhdG9yUnVudGltZSBuYW1lc3BhY2UuIE90aGVyd2lzZSBjcmVhdGUgYSBuZXcgZW1wdHlcbiAgLy8gb2JqZWN0LiBFaXRoZXIgd2F5LCB0aGUgcmVzdWx0aW5nIG9iamVjdCB3aWxsIGJlIHVzZWQgdG8gaW5pdGlhbGl6ZVxuICAvLyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIHZhcmlhYmxlIGF0IHRoZSB0b3Agb2YgdGhpcyBmaWxlLlxuICB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiID8gbW9kdWxlLmV4cG9ydHMgOiB7fVxuKSk7XG5cbnRyeSB7XG4gIHJlZ2VuZXJhdG9yUnVudGltZSA9IHJ1bnRpbWU7XG59IGNhdGNoIChhY2NpZGVudGFsU3RyaWN0TW9kZSkge1xuICAvLyBUaGlzIG1vZHVsZSBzaG91bGQgbm90IGJlIHJ1bm5pbmcgaW4gc3RyaWN0IG1vZGUsIHNvIHRoZSBhYm92ZVxuICAvLyBhc3NpZ25tZW50IHNob3VsZCBhbHdheXMgd29yayB1bmxlc3Mgc29tZXRoaW5nIGlzIG1pc2NvbmZpZ3VyZWQuIEp1c3RcbiAgLy8gaW4gY2FzZSBydW50aW1lLmpzIGFjY2lkZW50YWxseSBydW5zIGluIHN0cmljdCBtb2RlLCB3ZSBjYW4gZXNjYXBlXG4gIC8vIHN0cmljdCBtb2RlIHVzaW5nIGEgZ2xvYmFsIEZ1bmN0aW9uIGNhbGwuIFRoaXMgY291bGQgY29uY2VpdmFibHkgZmFpbFxuICAvLyBpZiBhIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IGZvcmJpZHMgdXNpbmcgRnVuY3Rpb24sIGJ1dCBpbiB0aGF0IGNhc2VcbiAgLy8gdGhlIHByb3BlciBzb2x1dGlvbiBpcyB0byBmaXggdGhlIGFjY2lkZW50YWwgc3RyaWN0IG1vZGUgcHJvYmxlbS4gSWZcbiAgLy8geW91J3ZlIG1pc2NvbmZpZ3VyZWQgeW91ciBidW5kbGVyIHRvIGZvcmNlIHN0cmljdCBtb2RlIGFuZCBhcHBsaWVkIGFcbiAgLy8gQ1NQIHRvIGZvcmJpZCBGdW5jdGlvbiwgYW5kIHlvdSdyZSBub3Qgd2lsbGluZyB0byBmaXggZWl0aGVyIG9mIHRob3NlXG4gIC8vIHByb2JsZW1zLCBwbGVhc2UgZGV0YWlsIHlvdXIgdW5pcXVlIHByZWRpY2FtZW50IGluIGEgR2l0SHViIGlzc3VlLlxuICBGdW5jdGlvbihcInJcIiwgXCJyZWdlbmVyYXRvclJ1bnRpbWUgPSByXCIpKHJ1bnRpbWUpO1xufVxuIiwidmFyIG5leHRUaWNrID0gcmVxdWlyZSgncHJvY2Vzcy9icm93c2VyLmpzJykubmV4dFRpY2s7XG52YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG52YXIgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG52YXIgaW1tZWRpYXRlSWRzID0ge307XG52YXIgbmV4dEltbWVkaWF0ZUlkID0gMDtcblxuLy8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3NcblxuZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHsgdGltZW91dC5jbG9zZSgpOyB9O1xuXG5mdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG4gIHRoaXMuX2lkID0gaWQ7XG4gIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xufVxuVGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbigpIHt9O1xuVGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIFRoYXQncyBub3QgaG93IG5vZGUuanMgaW1wbGVtZW50cyBpdCBidXQgdGhlIGV4cG9zZWQgYXBpIGlzIHRoZSBzYW1lLlxuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSB0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSBcImZ1bmN0aW9uXCIgPyBzZXRJbW1lZGlhdGUgOiBmdW5jdGlvbihmbikge1xuICB2YXIgaWQgPSBuZXh0SW1tZWRpYXRlSWQrKztcbiAgdmFyIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoIDwgMiA/IGZhbHNlIDogc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXG4gIGltbWVkaWF0ZUlkc1tpZF0gPSB0cnVlO1xuXG4gIG5leHRUaWNrKGZ1bmN0aW9uIG9uTmV4dFRpY2soKSB7XG4gICAgaWYgKGltbWVkaWF0ZUlkc1tpZF0pIHtcbiAgICAgIC8vIGZuLmNhbGwoKSBpcyBmYXN0ZXIgc28gd2Ugb3B0aW1pemUgZm9yIHRoZSBjb21tb24gdXNlLWNhc2VcbiAgICAgIC8vIEBzZWUgaHR0cDovL2pzcGVyZi5jb20vY2FsbC1hcHBseS1zZWd1XG4gICAgICBpZiAoYXJncykge1xuICAgICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZuLmNhbGwobnVsbCk7XG4gICAgICB9XG4gICAgICAvLyBQcmV2ZW50IGlkcyBmcm9tIGxlYWtpbmdcbiAgICAgIGV4cG9ydHMuY2xlYXJJbW1lZGlhdGUoaWQpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGlkO1xufTtcblxuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IHR5cGVvZiBjbGVhckltbWVkaWF0ZSA9PT0gXCJmdW5jdGlvblwiID8gY2xlYXJJbW1lZGlhdGUgOiBmdW5jdGlvbihpZCkge1xuICBkZWxldGUgaW1tZWRpYXRlSWRzW2lkXTtcbn07IiwiY2xhc3MgQWJzdHJhY3RWaWV3IGV4dGVuZHMgRXZlbnRUYXJnZXR7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuRE9NID0ge307XHJcblxyXG4gICAgICAgIHRoaXMuRE9NLmdhbWVCb2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJnYW1lLWJvYXJkXCIpO1xyXG4gICAgICAgIHRoaXMuRE9NLnF1ZXN0aW9uUGFuZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcXVlc3Rpb24tcGFuZVwiKTtcclxuICAgICAgICB0aGlzLkRPTS5tdWx0aXBsZUNob2ljZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbXVsdGlwbGUtY2hvaWNlLXByZXNlbnRcIik7XHJcblxyXG4gICAgICAgIHRoaXMuRE9NLnBsYXlpbmdfaW5kaWNhdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGF5aW5nXCIpO1xyXG4gICAgICAgIHRoaXMuRE9NLnRpbWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInRyaXZpYS10aW1lclwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5ET00ubWVudUluZGljYXRvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWVudS1pbmRpY2F0b3JcIik7XHJcbiAgICAgICAgdGhpcy5ET00ubWVudUFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21lbnUtYXJlYVwiKTtcclxuICAgICAgICB0aGlzLkRPTS5tZW51TG9nb3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtZW51LWxvZ291dFwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5ET00ucGxheWVyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGF5ZXItY29udGFpbmVyLWxlZnRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnRUaW1lcih1cGRhdGUpe1xyXG4gICAgICAgIHRoaXMuRE9NLnRpbWVyLnNob3codXBkYXRlLnRpbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVRpbWVyKHVwZGF0ZSl7XHJcbiAgICAgICAgaWYgKHRoaXMubGFzdFVwZGF0ZS5tb2RlbC5wbGF5ZXJzLmxlbmd0aCA8PSAwKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5ET00udGltZXIuc2hvdygpO1xyXG4gICAgICAgIHRoaXMuRE9NLnRpbWVyLnNldCh1cGRhdGUudGltZSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmxhc3RVcGRhdGUuc3RhdGUgPT09IDYgfHwgdGhpcy5sYXN0VXBkYXRlLnN0YXRlID09PSA4KSB7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50TmFtZSA9IHRoaXMubGFzdFVwZGF0ZS5tb2RlbC5wbGF5ZXJzWzBdLm5hbWU7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50UGFuZWwgPSB0aGlzLkRPTS5wbGF5ZXJDb250YWluZXIudG9wUGxheWVyKCk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRQYW5lbC5zZXRUaW1lcih1cGRhdGUucHJvZ3Jlc3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVNb2RlbCh1cGRhdGUpe1xyXG4gICAgICAgIHRoaXMuZmlsbFBsYXllcnModXBkYXRlKTtcclxuICAgICAgICB0aGlzLmxhc3RVcGRhdGUgPSB1cGRhdGU7XHJcblxyXG4gICAgICAgIHRoaXMuRE9NLm11bHRpcGxlQ2hvaWNlLmhpZGUoKTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh1cGRhdGUuc3RhdGUpe1xyXG4gICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ubXVsdGlwbGVDaG9pY2UuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00uZ2FtZUJvYXJkLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnF1ZXN0aW9uUGFuZS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5xdWVzdGlvblBhbmUuc2V0VGV4dCh1cGRhdGUubW9kZWwucm91bmQucXVlc3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00udGltZXIuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnF1ZXN0aW9uUGFuZS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5tdWx0aXBsZUNob2ljZS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5tdWx0aXBsZUNob2ljZS5zZXRNb2RlKFwic2hvd1wiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLm11bHRpcGxlQ2hvaWNlLnF1ZXJ5U2VsZWN0b3IoXCIuaW5uZXIudG90YWxcIikuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ubXVsdGlwbGVDaG9pY2UucXVlcnlTZWxlY3RvcihcIi5pbm5lci5ib251cyA+IC5hbW91bnRcIikudGV4dCA9IHVwZGF0ZS5tb2RlbC5yb3VuZC5ib251cztcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ET00ubXVsdGlwbGVDaG9pY2UucXVlcnlTZWxlY3RvcihgW2RhdGEtaW5kZXg9XCIke2l9XCJdIGNoZWNrLWJveGApLmNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkRPTS5tdWx0aXBsZUNob2ljZS5zZXRBbnN3ZXJUZXh0KGksIHVwZGF0ZS5tb2RlbC5yb3VuZC5hbnN3ZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkRPTS5tdWx0aXBsZUNob2ljZS5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pbmRleD1cIiR7aX1cIl0gY2hlY2stYm94YCkubG9ja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ucXVlc3Rpb25QYW5lLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLm11bHRpcGxlQ2hvaWNlLnNob3coKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLm11bHRpcGxlQ2hvaWNlLnNldE1vZGUoXCJzaG93XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ET00ubXVsdGlwbGVDaG9pY2Uuc2V0QW5zd2VyVGV4dChpLCB1cGRhdGUubW9kZWwucm91bmQuYW5zd2Vyc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ET00ubXVsdGlwbGVDaG9pY2UucXVlcnlTZWxlY3RvcihgW2RhdGEtaW5kZXg9XCIke2l9XCJdIGNoZWNrLWJveGApLmNoZWNrZWQgPSB1cGRhdGUubW9kZWwucm91bmQudmFsdWVzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRE9NLm11bHRpcGxlQ2hvaWNlLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWluZGV4PVwiJHtpfVwiXSBjaGVjay1ib3hgKS5sb2NrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLmdhbWVCb2FyZC5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGxKZW9wYXJkeUNhdGVnb3JpZXModXBkYXRlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsbEplb3BhcmR5Q2VsbHModXBkYXRlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnRpbWVyLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5nYW1lQm9hcmQuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ucXVlc3Rpb25QYW5lLnNob3coKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnF1ZXN0aW9uUGFuZS5zZXRUZXh0KHVwZGF0ZS5tb2RlbC5yb3VuZC5xdWVzdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS50aW1lci5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00uZ2FtZUJvYXJkLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnF1ZXN0aW9uUGFuZS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5xdWVzdGlvblBhbmUuc2V0VGV4dCh1cGRhdGUubW9kZWwucm91bmQucXVlc3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ucGxheWVyQ29udGFpbmVyLm1vdmVUb1RvcCh1cGRhdGUubW9kZWwucm91bmQuY3VycmVudF9wbGF5ZXIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLmdhbWVCb2FyZC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5xdWVzdGlvblBhbmUuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ucXVlc3Rpb25QYW5lLnNldFRleHQodXBkYXRlLm1vZGVsLnJvdW5kLnF1ZXN0aW9uKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5nYW1lQm9hcmQuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ucXVlc3Rpb25QYW5lLnNob3coKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnF1ZXN0aW9uUGFuZS5zZXRUZXh0KHVwZGF0ZS5tb2RlbC5yb3VuZC5xdWVzdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5wbGF5ZXJDb250YWluZXIubW92ZVRvVG9wKHVwZGF0ZS5tb2RlbC5yb3VuZC5jdXJyZW50X3BsYXllcik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00uZ2FtZUJvYXJkLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnF1ZXN0aW9uUGFuZS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5xdWVzdGlvblBhbmUuc2V0VGV4dCh1cGRhdGUubW9kZWwucm91bmQuYW5zd2VyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnRpbWVyLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00uZ2FtZUJvYXJkLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnF1ZXN0aW9uUGFuZS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5xdWVzdGlvblBhbmUuc2V0VGV4dChcIkdBTUUgT1ZFUlwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnRpbWVyLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZpbGxQbGF5ZXJzKHVwZGF0ZSl7XHJcbiAgICAgICAgdGhpcy5ET00ucGxheWVyQ29udGFpbmVyLmNsZWFyKCk7XHJcbiAgICAgICAgaWYgKHVwZGF0ZS5tb2RlbC5wbGF5ZXJzLmxlbmd0aCA8PSAwKSByZXR1cm47XHJcblxyXG4gICAgICAgIGZvciAobGV0IHBsYXllciBvZiB1cGRhdGUubW9kZWwucGxheWVycyl7XHJcbiAgICAgICAgICAgIHRoaXMuRE9NLnBsYXllckNvbnRhaW5lci5hZGRQbGF5ZXIocGxheWVyLm5hbWUsIHBsYXllci5zY29yZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodXBkYXRlLm1vZGVsLnJvdW5kICYmIHVwZGF0ZS5tb2RlbC5yb3VuZC5zdHlsZSA9PT0gJ2onKSB7IC8vIFRPRE8gcmVtb3ZlIG1hZ2ljIHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgaWYgKHVwZGF0ZS5tb2RlbC5yb3VuZC5jdXJyZW50X3BsYXllciA9PT0gcGxheWVyLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkRPTS5wbGF5ZXJDb250YWluZXIuZ2V0UGxheWVyKHBsYXllci5uYW1lKS5oaWdobGlnaHQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRE9NLnBsYXllckNvbnRhaW5lci5nZXRQbGF5ZXIocGxheWVyLm5hbWUpLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHVwZGF0ZS5tb2RlbC5yb3VuZC5zcGVudFBsYXllcnMuaW5kZXhPZihwbGF5ZXIubmFtZSkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ET00ucGxheWVyQ29udGFpbmVyLmdldFBsYXllcihwbGF5ZXIubmFtZSkuZGltID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cueCA9IHRoaXMuRE9NLnBsYXllckNvbnRhaW5lci5nZXRQbGF5ZXIocGxheWVyLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZpbGxKZW9wYXJkeUNhdGVnb3JpZXModXBkYXRlKXtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKyl7XHJcbiAgICAgICAgICAgIGxldCBjYXRlZ29yeSA9IHVwZGF0ZS5tb2RlbC5yb3VuZC5jYXRlZ29yaWVzW2ldO1xyXG4gICAgICAgICAgICB0aGlzLkRPTS5nYW1lQm9hcmQuc2V0SGVhZGVyKGksIGNhdGVnb3J5W1widGV4dFwiXSwgY2F0ZWdvcnlbXCJmb250LXNpemVcIl0sIHRydWUpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZpbGxKZW9wYXJkeUNlbGxzKHVwZGF0ZSl7XHJcbiAgICAgICAgbGV0IHJvdW5kID0gdXBkYXRlLm1vZGVsLnJvdW5kO1xyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgNjsgYysrKXtcclxuICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCA1OyByKyspe1xyXG4gICAgICAgICAgICAgICAgaWYgKHJvdW5kLnNwZW50W2NdW3JdKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkRPTS5nYW1lQm9hcmQuc2V0Q2VsbChyLCBjLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ET00uZ2FtZUJvYXJkLnNldENlbGwociwgYywgcm91bmQudmFsdWVzW2NdW3JdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBBYnN0cmFjdFZpZXc7IiwiaW1wb3J0IEFic3RyYWN0VmlldyBmcm9tIFwiLi9BYnN0cmFjdFZpZXcuanNcIlxyXG5pbXBvcnQgVmlld0V2ZW50IGZyb20gXCIuL1ZpZXdFdmVudC5qc1wiO1xyXG5cclxuLyoqXHJcbiAqIEhvc3RQb3J0YWxWaWV3IGhhcyBtZXRob2RzIHRvIGNvbnRyb2wgdGhlIHZpc2liaWxpdHkvZGV0YWlscyBvZiBET00gb2JqZWN0cy5cclxuICogVGhpcyBjbGFzcyB3aWxsIGZpcmUgXCJjbGlja1wiIGV2ZW50cyB3aGVuIGJ1dHRvbnMgYXJlIGNsaWNrZWQsIHdpdGggdGhlIGRhdGFcclxuICogaW4gdGhlIGZvcm1hdCB0aGF0IHdpbGwgZ2V0IHNlbnQgdG8gdGhlIHNlcnZlci4gIFRoZSBIb3N0UG9ydGFsQ29udHJvbGxlclxyXG4gKiB0YWtlcyBjYXJlIG9mIHRoZSBjb21tdW5pY2F0aW9uIGRldGFpbHMuXHJcbiAqXHJcbiAqIFRoZSBjZWxsLXNlbGVjdCBldmVudCBpcyBjYXVnaHQgYW5kIHJlLWRpc3BhdGNoZWQuXHJcbiAqL1xyXG5jbGFzcyBIb3N0UG9ydGFsVmlldyBleHRlbmRzIEFic3RyYWN0Vmlld3tcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuRE9NLmFjY2VwdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWNjZXB0XCIpO1xyXG4gICAgICAgIHRoaXMuRE9NLnJlamVjdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcmVqZWN0XCIpO1xyXG4gICAgICAgIHRoaXMuRE9NLmJhY2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2JhY2tcIik7XHJcbiAgICAgICAgdGhpcy5ET00uY29udGludWVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvbnRpbnVlXCIpO1xyXG4gICAgICAgIHRoaXMuRE9NLm5leHRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25leHRcIik7XHJcbiAgICAgICAgdGhpcy5ET00uc3RhcnRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N0YXJ0XCIpO1xyXG4gICAgICAgIHRoaXMuRE9NLmFuc3dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYW5zd2VyXCIpO1xyXG5cclxuICAgICAgICB0aGlzLkRPTS5hY2NlcHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICBlID0+IHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVmlld0V2ZW50KFwiYWNjZXB0XCIpKSk7XHJcbiAgICAgICAgdGhpcy5ET00ucmVqZWN0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAgZSA9PiB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFZpZXdFdmVudChcInJlamVjdFwiKSkpO1xyXG4gICAgICAgIHRoaXMuRE9NLmJhY2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICBlID0+IHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVmlld0V2ZW50KFwiYmFja1wiKSkpO1xyXG4gICAgICAgIHRoaXMuRE9NLmNvbnRpbnVlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAgZSA9PiB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFZpZXdFdmVudChcImNvbnRpbnVlXCIpKSk7XHJcbiAgICAgICAgdGhpcy5ET00ubmV4dEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgIGUgPT4gdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBWaWV3RXZlbnQoXCJuZXh0XCIpKSk7XHJcbiAgICAgICAgdGhpcy5ET00uc3RhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4gdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBWaWV3RXZlbnQoXCJzdGFydFwiKSkpO1xyXG4gICAgICAgIHRoaXMuRE9NLmdhbWVCb2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2VsbC1zZWxlY3RcIiwgZSA9PiB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFZpZXdFdmVudChcInNlbGVjdFwiLCBlLmRldGFpbCkpKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVNb2RlbCh1cGRhdGUpIHtcclxuICAgICAgICBzdXBlci51cGRhdGVNb2RlbCh1cGRhdGUpO1xyXG4gICAgICAgIHRoaXMuRE9NLmFjY2VwdEJ1dHRvbi5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy5ET00ucmVqZWN0QnV0dG9uLmhpZGUoKTtcclxuICAgICAgICB0aGlzLkRPTS5iYWNrQnV0dG9uLmhpZGUoKTtcclxuICAgICAgICB0aGlzLkRPTS5jb250aW51ZUJ1dHRvbi5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy5ET00ubmV4dEJ1dHRvbi5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy5ET00uc3RhcnRCdXR0b24uaGlkZSgpO1xyXG4gICAgICAgIHRoaXMuRE9NLmFuc3dlci5oaWRlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuRE9NLmNvbnRpbnVlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjZW50ZXJcIik7XHJcbiAgICAgICAgdGhpcy5ET00uY29udGludWVCdXR0b24uY2xhc3NMaXN0LmFkZChcInJpZ2h0XCIpO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHVwZGF0ZS5zdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5zdGFydEJ1dHRvbi5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00uY29udGludWVCdXR0b24uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00uY29udGludWVCdXR0b24uY2xhc3NMaXN0LmFkZChcImNlbnRlclwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLmNvbnRpbnVlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJyaWdodFwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5jb250aW51ZUJ1dHRvbi5zaG93KCk7IC8vIHRvZG8gcmVtb3ZlXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00uY29udGludWVCdXR0b24uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00uY29udGludWVCdXR0b24uY2xhc3NMaXN0LmFkZChcImNlbnRlclwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLmNvbnRpbnVlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJyaWdodFwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00uYmFja0J1dHRvbi5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5jb250aW51ZUJ1dHRvbi5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5jb250aW51ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicmlnaHRcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5jb250aW51ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2VudGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00uYW5zd2VyLnNob3coKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5hY2NlcHRCdXR0b24uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ucmVqZWN0QnV0dG9uLnNob3coKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnRpbWVyLnNob3coKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLmFuc3dlci5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLmFjY2VwdEJ1dHRvbi5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5yZWplY3RCdXR0b24uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00uYW5zd2VyLnNob3coKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5jb250aW51ZUJ1dHRvbi5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5jb250aW51ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwicmlnaHRcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5jb250aW51ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2VudGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQW5zd2VyKGFuc3dlcil7XHJcbiAgICAgICAgdGhpcy5ET00uYW5zd2VyLnRleHQgPSBhbnN3ZXI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEhvc3RQb3J0YWxWaWV3OyIsIlxyXG5jbGFzcyBQb3J0YWxDb250cm9sbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHdzLCB2aWV3KSB7XHJcbiAgICAgICAgdGhpcy53cyA9IHdzO1xyXG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gXCJcIjtcclxuXHJcbiAgICAgICAgdGhpcy53cy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGV2ZW50KSA9PiB0aGlzLnByb2Nlc3MoSlNPTi5wYXJzZShldmVudC5kYXRhKSkpO1xyXG4gICAgICAgIHRoaXMud3MuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCAoZXZlbnQpID0+IHRoaXMub25DbG9zZShldmVudCkpO1xyXG5cclxuICAgICAgICB0aGlzLnZpZXcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpPT50aGlzLnNlbmQoZXZlbnQuZGV0YWlsKSk7XHJcbiAgICAgICAgdGhpcy52aWV3LmFkZEV2ZW50TGlzdGVuZXIoJ2NlbGwtc2VsZWN0JywgKGV2ZW50KT0+dGhpcy5zZW5kKGV2ZW50LmRldGFpbCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5jb21pbmcgbWVzc2FnZXMgZ2V0IHByb2Nlc3NlZCBoZXJlLlxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcclxuICAgICAqL1xyXG4gICAgcHJvY2VzcyhtZXNzYWdlKXtcclxuICAgICAgICBpZiAobWVzc2FnZS5hY3Rpb24gIT09IFwicGluZ1wiICYmIG1lc3NhZ2UuYWN0aW9uICE9PSBcInVwZGF0ZV90aW1lclwiKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sYXN0TWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UuYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJjb25uZWN0aW9uX2VzdGFibGlzaGVkXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hbWUgPSBtZXNzYWdlLmRhdGEubmFtZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZXcuc2V0TmFtZSkgdGhpcy52aWV3LnNldE5hbWUobWVzc2FnZS5kYXRhLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwcm92aWRlX2Fuc3dlclwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnVwZGF0ZUFuc3dlcihtZXNzYWdlLmRhdGEuYW5zd2VyKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwidXBkYXRlX21vZGVsXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcudXBkYXRlTW9kZWwobWVzc2FnZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwic3RhcnRfdGltZXJcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMudmlldy5zdGFydFRpbWVyKG1lc3NhZ2UuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInVwZGF0ZV90aW1lclwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnVwZGF0ZVRpbWVyKG1lc3NhZ2UuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInN0b3BfdGltZXJcIjpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKGV2ZW50KXtcclxuICAgICAgICBpZiAodGhpcy5uYW1lID09PSBcIkBIT1NUXCIpe1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBcImhvc3QuZWpzXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gXCJjb250ZXN0YW50X2pvaW4uZWpzXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNlbmQobXNnKXtcclxuICAgICAgICBjb25zb2xlLmxvZyhgc2VuZDogJHtKU09OLnN0cmluZ2lmeShtc2cpfWApO1xyXG4gICAgICAgIHRoaXMud3Muc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9ydGFsQ29udHJvbGxlcjsiLCJjbGFzcyBWaWV3RXZlbnQgZXh0ZW5kcyBDdXN0b21FdmVudHtcclxuICAgIGNvbnN0cnVjdG9yKGFjdGlvbiwgZGF0YSA9IG51bGwpIHtcclxuICAgICAgICBzdXBlcignY2xpY2snLFxyXG4gICAgICAgICAgICB7ZGV0YWlsIDoge2FjdGlvbiA6IGFjdGlvbiwgZGF0YSA6IGRhdGF9fVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFZpZXdFdmVudDsiLCJmdW5jdGlvbiBjb25uZWN0V2Vic29ja2V0KCl7XHJcbiAgICBsZXQgdXJsID0gd2luZG93Lm9yaWdpbjtcclxuICAgIGlmICh1cmwuc3RhcnRzV2l0aChcImh0dHA6XCIpKXtcclxuICAgICAgICB1cmwgPSBcIndzXCIgKyB1cmwuc3Vic3RyKDQpICsgXCIvZ2FtZS1zZXJ2aWNlLndzXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHVybCA9IFwid3NzXCIgKyB1cmwuc3Vic3RyKDUpICsgXCIvZ2FtZS1zZXJ2aWNlLndzXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT57XHJcbiAgICAgICAgbGV0IHNvY2tldCA9IG5ldyBXZWJTb2NrZXQodXJsKTtcclxuICAgICAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXZlbnQpID0+IHJlamVjdChldmVudCkpO1xyXG4gICAgICAgIHNvY2tldC5hZGRFdmVudExpc3RlbmVyKCdvcGVuJywgKGV2ZW50KSA9PiByZXNvbHZlKHNvY2tldCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3RXZWJzb2NrZXQ7IiwiLy8gbm9pbnNwZWN0aW9uIFNwZWxsQ2hlY2tpbmdJbnNwZWN0aW9uXHJcblxyXG5pbXBvcnQgRmlsZU9wcyBmcm9tIFwiLi9tb2R1bGVzL0ZpbGVPcHMuanNcIjtcclxuaW1wb3J0IEF1dGhlbnRpY2F0ZSBmcm9tIFwiLi9tb2R1bGVzL0F1dGhlbnRpY2F0ZS5qc1wiO1xyXG5pbXBvcnQgSG9zdFBvcnRhbFZpZXcgZnJvbSBcIi4vSG9zdFBvcnRhbFZpZXcuanNcIjtcclxuaW1wb3J0IFBvcnRhbENvbnRyb2xsZXIgZnJvbSBcIi4vUG9ydGFsQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgY29ubmVjdFdlYnNvY2tldCBmcm9tIFwiLi9jb25uZWN0V2Vic29ja2V0LmpzXCI7XHJcbmltcG9ydCBHYW1lTWFuYWdlclNlcnZpY2UgZnJvbSBcIi4vc2VydmljZXMvR2FtZU1hbmFnZXJTZXJ2aWNlXCI7XHJcbmltcG9ydCBjb25zdGFudHMgZnJvbSBcIi4uL3NlcnZlci9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IHNldHVwU2l6ZUxpc3RlbmVyIGZyb20gXCIuL21vZHVsZXMvU2V0dXBTaXplTGlzdGVuZXJcIjtcclxuXHJcbmxldCBnYW1lTWFuYWdlclNlcnZpY2UgPSBuZXcgR2FtZU1hbmFnZXJTZXJ2aWNlKCk7XHJcbmxldCBmaWxlT3BzID0gbmV3IEZpbGVPcHMoKTtcclxubGV0IG1vZGVsID0gbnVsbDtcclxubGV0IHF1ZXN0aW9uUGFuZSA9IG51bGw7XHJcbmxldCBlZGl0b3JQYW5lID0gbnVsbDtcclxuXHJcbndpbmRvdy5vbmxvYWQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBsZXQgc3RhcnQgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgaG9zdFZpZXcgPSBuZXcgSG9zdFBvcnRhbFZpZXcoKTtcclxuXHJcbiAgICBzZXR1cFNpemVMaXN0ZW5lcigpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgbmV3IEF1dGhlbnRpY2F0ZSgpLmxvYWRDbGllbnQoKTtcclxuICAgICAgICBhd2FpdCBmaWxlT3BzLmxvYWRDbGllbnQoKTtcclxuICAgICAgICBhd2FpdCBzZW5kVG9rZW5Ub1NlcnZlcigpO1xyXG4gICAgICAgIGxldCB3cyA9IGF3YWl0IGNvbm5lY3RXZWJzb2NrZXQoKTtcclxuICAgICAgICBuZXcgUG9ydGFsQ29udHJvbGxlcih3cywgaG9zdFZpZXcpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWVudS1jb250YWluZXJcIikuYWRkRXZlbnRMaXN0ZW5lcihcImFkZC1wbGF5ZXJzXCIsICgpPT57XHJcbiAgICAgICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2FjdGlvbiA6IFwiam9pblwiLCBkYXRhIDoge25hbWUgOiBcIkFkYW1cIn19KSk7XHJcbiAgICAgICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2FjdGlvbiA6IFwiam9pblwiLCBkYXRhIDoge25hbWUgOiBcIkJlcnRcIn19KSk7XHJcbiAgICAgICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2FjdGlvbiA6IFwiam9pblwiLCBkYXRhIDoge25hbWUgOiBcIkNhcm9sXCJ9fSkpO1xyXG4gICAgICAgICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KHthY3Rpb24gOiBcImpvaW5cIiwgZGF0YSA6IHtuYW1lIDogXCJEYXZlXCJ9fSkpO1xyXG4gICAgICAgICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KHthY3Rpb24gOiBcImpvaW5cIiwgZGF0YSA6IHtuYW1lIDogXCJFZGl0aFwifX0pKTtcclxuICAgICAgICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeSh7YWN0aW9uIDogXCJqb2luXCIsIGRhdGEgOiB7bmFtZSA6IFwiRnJhblwifX0pKTtcclxuICAgICAgICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeSh7YWN0aW9uIDogXCJqb2luXCIsIGRhdGEgOiB7bmFtZSA6IFwiR2FydGhcIn19KSk7XHJcbiAgICAgICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2FjdGlvbiA6IFwiam9pblwiLCBkYXRhIDoge25hbWUgOiBcIkhlcmJlcnRcIn19KSk7XHJcbiAgICAgICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2FjdGlvbiA6IFwiam9pblwiLCBkYXRhIDoge25hbWUgOiBcIklyYVwifX0pKTtcclxuICAgICAgICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeSh7YWN0aW9uIDogXCJqb2luXCIsIGRhdGEgOiB7bmFtZSA6IFwiSmlsbFwifX0pKTtcclxuICAgICAgICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeSh7YWN0aW9uIDogXCJqb2luXCIsIGRhdGEgOiB7bmFtZSA6IFwiS2VpdGhcIn19KSk7XHJcbiAgICAgICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2FjdGlvbiA6IFwiam9pblwiLCBkYXRhIDoge25hbWUgOiBcIkxpc2FcIn19KSk7XHJcbiAgICAgICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2FjdGlvbiA6IFwiam9pblwiLCBkYXRhIDoge25hbWUgOiBcIk1hdHRcIn19KSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtZW51LWNvbnRhaW5lclwiKS5hZGRFdmVudExpc3RlbmVyKFwibmV4dFwiLCAoKT0+e1xyXG4gICAgICAgICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KHthY3Rpb24gOiBcIm5leHRfcm91bmRcIn0pKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1lbnUtY29udGFpbmVyXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJwcmV2XCIsICgpPT57XHJcbiAgICAgICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2FjdGlvbiA6IFwicHJldl9yb3VuZFwifSkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWVudS1jb250YWluZXJcIikuYWRkRXZlbnRMaXN0ZW5lcihcInRlcm1pbmF0ZVwiLCAoKT0+e1xyXG4gICAgICAgICAgICBsZXQgdG9rZW4gPSBnYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpLmN1cnJlbnRVc2VyLmdldCgpLmdldEF1dGhSZXNwb25zZSgpLmlkX3Rva2VuO1xyXG4gICAgICAgICAgICBnYW1lTWFuYWdlclNlcnZpY2UudGVybWluYXRlKHRva2VuKTtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gY29uc3RhbnRzLmxvY2F0aW9ucy5IT1NUO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB3aW5kb3cuYWRkUGxheWVycyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2FjdGlvbiA6IFwiam9pblwiLCBkYXRhIDoge25hbWUgOiBcIkFkYW1cIn19KSk7XHJcbiAgICAgICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2FjdGlvbiA6IFwiam9pblwiLCBkYXRhIDoge25hbWUgOiBcIkJlcnRcIn19KSk7XHJcbiAgICAgICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2FjdGlvbiA6IFwiam9pblwiLCBkYXRhIDoge25hbWUgOiBcIkNhcm9sXCJ9fSkpO1xyXG4gICAgICAgICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KHthY3Rpb24gOiBcImpvaW5cIiwgZGF0YSA6IHtuYW1lIDogXCJEYXZlXCJ9fSkpO1xyXG4gICAgICAgICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KHthY3Rpb24gOiBcImpvaW5cIiwgZGF0YSA6IHtuYW1lIDogXCJFZGl0aFwifX0pKTtcclxuICAgICAgICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeSh7YWN0aW9uIDogXCJqb2luXCIsIGRhdGEgOiB7bmFtZSA6IFwiRnJhblwifX0pKTtcclxuICAgICAgICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeSh7YWN0aW9uIDogXCJqb2luXCIsIGRhdGEgOiB7bmFtZSA6IFwiR2FydGhcIn19KSk7XHJcbiAgICAgICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2FjdGlvbiA6IFwiam9pblwiLCBkYXRhIDoge25hbWUgOiBcIkhlcmJlcnRcIn19KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGVuZCA9IG5ldyBEYXRlKCk7XHJcbiAgICBsZXQgdGltZSA9IGVuZCAtIHN0YXJ0O1xyXG4gICAgY29uc29sZS5sb2coXCJMb2FkIFRpbWUgXCIgKyB0aW1lICsgXCIgbXNcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlbmRUb2tlblRvU2VydmVyKCl7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PiB7XHJcbiAgICAgICAgbGV0IHRva2VuID0gZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKS5jdXJyZW50VXNlci5nZXQoKS5nZXRBdXRoUmVzcG9uc2UoKS5pZF90b2tlbjtcclxuICAgICAgICBsZXQgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHJcbiAgICAgICAgeGh0dHAuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCByZXNwb25zZSA9IEpTT04ucGFyc2UoeGh0dHAucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnJlc3VsdCA9PT0gXCJzdWNjZXNzXCIpIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgZWxzZSByZWplY3QobmV3IEVycm9yKFwidG9rZW4gcmVqZWN0ZWRcIikpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB4aHR0cC5vcGVuKFwiUE9TVFwiLCBcImNvbm5lY3QtaG9zdFwiKTtcclxuICAgICAgICB4aHR0cC5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcclxuICAgICAgICB4aHR0cC5zZW5kKEpTT04uc3RyaW5naWZ5KHt0b2tlbjogdG9rZW59KSk7XHJcbiAgICB9KTtcclxufSIsIi8vIHNlZSBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9kcml2ZS9hcGkvdjMvcXVpY2tzdGFydC9qcz9obD1lblxyXG5cclxuY2xhc3MgQXV0aGVudGljYXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCByZXF1aXJlKFwiLi9nb29nbGVGaWVsZHMuanNcIikpO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWRDbGllbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgZ2FwaS5sb2FkKCdjbGllbnQ6YXV0aDInLCAoKSA9PiB0aGlzLl9faW5pdENsaWVudChyZXNvbHZlLCByZWplY3QpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfX2luaXRDbGllbnQocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZ2FwaS5jbGllbnQuaW5pdCh7XHJcbiAgICAgICAgICAgIGFwaUtleTogdGhpcy5kZXZlbG9wZXJLZXksXHJcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxyXG4gICAgICAgICAgICBkaXNjb3ZlcnlEb2NzOiB0aGlzLmRpc2NvdmVyeURvY3MsXHJcbiAgICAgICAgICAgIHNjb3BlOiB0aGlzLnNjb3BlXHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIElOSVRcIik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpc0F1dGhvcml6ZWQoKXtcclxuICAgICAgICB2YXIgdXNlciA9IGdhcGkuYXV0aDIuZ2V0QXV0aEluc3RhbmNlKCkuY3VycmVudFVzZXIuZ2V0KCk7XHJcbiAgICAgICAgcmV0dXJuIHVzZXIuaGFzR3JhbnRlZFNjb3Blcyh0aGlzLnNjb3BlKTtcclxuICAgIH1cclxuXHJcbiAgICBzaWduSW4oKXtcclxuICAgICAgICBnYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpLnNpZ25JbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHNpZ25PdXQoKXtcclxuICAgICAgICBnYXBpLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpLnNpZ25PdXQoKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQXV0aGVudGljYXRlOyIsIlwidXNlIHN0cmljdFwiO1xyXG4vLyBzZWUgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vZHJpdmUvYXBpL3YzL3F1aWNrc3RhcnQvanM/aGw9ZW5cclxuXHJcbmNsYXNzIEZpbGVPcHMge1xyXG5cclxuICAgIGFzeW5jIGxvYWQoKXtcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRDbGllbnQoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWREcml2ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWRDbGllbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgZ2FwaS5sb2FkKCdjbGllbnQnLCAoKSA9PiByZXNvbHZlKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWREcml2ZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBnYXBpLmNsaWVudC5sb2FkKCdkcml2ZScsICd2MycsIHJlc29sdmUoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY3JlYXRlKGZpbGVuYW1lID0gXCJHYW1lIE5hbWUuanNvblwiKXtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PiB7XHJcbiAgICAgICAgICAgIGdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBuYW1lIDogZmlsZW5hbWUsXHJcbiAgICAgICAgICAgICAgICBwYXJlbnRzOiBbJ2FwcERhdGFGb2xkZXInXSxcclxuICAgICAgICAgICAgICAgIGZpZWxkczogXCJpZFwiXHJcbiAgICAgICAgICAgIH0pLnRoZW4ocmVzPT57XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlcy5yZXN1bHQuaWQpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGRlbGV0ZShmaWxlSWQpe1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+IHtcclxuICAgICAgICAgICAgZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMuZGVsZXRlKHtcclxuICAgICAgICAgICAgICAgIGZpbGVJZCA6IGZpbGVJZFxyXG4gICAgICAgICAgICB9KS50aGVuKHJlcz0+e1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMucmVzdWx0KTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsaXN0KCl7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT4ge1xyXG4gICAgICAgICAgICBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5saXN0KHtcclxuICAgICAgICAgICAgICAgIC8vIHE6IGBuYW1lIGNvbnRhaW5zICcuanNvbidgLFxyXG4gICAgICAgICAgICAgICAgc3BhY2VzOiAnYXBwRGF0YUZvbGRlcicsXHJcbiAgICAgICAgICAgICAgICBmaWVsZHM6ICdmaWxlcy9uYW1lLGZpbGVzL2lkLGZpbGVzL21vZGlmaWVkVGltZSdcclxuICAgICAgICAgICAgfSkudGhlbihyZXM9PntcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzLnJlc3VsdC5maWxlcyk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0KGZpbGVJZCl7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT4ge1xyXG4gICAgICAgICAgICBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5nZXQoe1xyXG4gICAgICAgICAgICAgICAgZmlsZUlkOiBmaWxlSWQsXHJcbiAgICAgICAgICAgICAgICBhbHQ6ICdtZWRpYSdcclxuICAgICAgICAgICAgfSkudGhlbihyZXM9PntcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNldEJvZHkoZmlsZUlkLCBib2R5KXtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PiB7XHJcbiAgICAgICAgICAgIGdhcGkuY2xpZW50LnJlcXVlc3Qoe1xyXG4gICAgICAgICAgICAgICAgcGF0aCA6IFwidXBsb2FkL2RyaXZlL3YzL2ZpbGVzL1wiICsgZmlsZUlkLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kIDogXCJQQVRDSFwiLFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zIDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZFR5cGUgOiBcIm1lZGlhXCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzIDoge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCIgOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHkgOiBib2R5XHJcbiAgICAgICAgICAgIH0pLnRoZW4ocmVzPT57XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UocmVzLmJvZHkpKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJlbmFtZShmaWxlSWQsIGZpbGVuYW1lKXtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PiB7XHJcbiAgICAgICAgICAgIGdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBmaWxlSWQ6IGZpbGVJZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGZpbGVuYW1lXHJcbiAgICAgICAgICAgIH0pLnRoZW4ocmVzPT57XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UocmVzLmJvZHkpKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGaWxlT3BzOyIsImZ1bmN0aW9uIHNldHVwU2l6ZUxpc3RlbmVyKCl7XHJcbiAgICBmdW5jdGlvbiByZXBvcnRXaW5kb3dTaXplKCkge1xyXG4gICAgICAgIGNvbnN0IHBhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BhZ2UtY29udGFpbmVyXCIpO1xyXG4gICAgICAgIGNvbnN0IHJhdGlvID0gd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmIChyYXRpbyA+PSAxNi85KXtcclxuICAgICAgICAgICAgcGFnZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiYXNwZWN0LWZpdFwiKTtcclxuICAgICAgICAgICAgcGFnZUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwic2hyaW5rLWhvcnpcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGFnZUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiYXNwZWN0LWZpdFwiKTtcclxuICAgICAgICAgICAgcGFnZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwic2hyaW5rLWhvcnpcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGU9PnJlcG9ydFdpbmRvd1NpemUoKSk7XHJcbiAgICByZXBvcnRXaW5kb3dTaXplKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHNldHVwU2l6ZUxpc3RlbmVyOyIsIlxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIC8vIFRoZSBCcm93c2VyIEFQSSBrZXkgb2J0YWluZWQgZnJvbSB0aGUgR29vZ2xlIEFQSSBDb25zb2xlLlxyXG4gICAgZGV2ZWxvcGVyS2V5IDogJ0FJemFTeUFCY2RMbVQ2SEhfN0dvODJxX0lCR0kzam02VUw0dzRRMCcsXHJcblxyXG4gICAgLy8gVGhlIENsaWVudCBJRCBvYnRhaW5lZCBmcm9tIHRoZSBHb29nbGUgQVBJIENvbnNvbGUuIFJlcGxhY2Ugd2l0aCB5b3VyIG93biBDbGllbnQgSUQuXHJcbiAgICBjbGllbnRJZCA6IFwiMTU4ODIzMTM0NjgxLTk4YmdrYW5nb2x0azYzNnVrZjhwb2ZlaXM3cGE3amJrLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tXCIsXHJcblxyXG4gICAgLy8gUmVwbGFjZSB3aXRoIHlvdXIgb3duIHByb2plY3QgbnVtYmVyIGZyb20gY29uc29sZS5kZXZlbG9wZXJzLmdvb2dsZS5jb20uXHJcbiAgICBhcHBJZCA6IFwiMTU4ODIzMTM0NjgxXCIsXHJcblxyXG4gICAgLy8gQXJyYXkgb2YgQVBJIGRpc2NvdmVyeSBkb2MgVVJMcyBmb3IgQVBJcyB1c2VkIGJ5IHRoZSBxdWlja3N0YXJ0XHJcbiAgICBkaXNjb3ZlcnlEb2NzIDogW1wiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZGlzY292ZXJ5L3YxL2FwaXMvZHJpdmUvdjMvcmVzdFwiXSxcclxuXHJcbiAgICAvLyBTY29wZSB0byB1c2UgdG8gYWNjZXNzIHVzZXIncyBEcml2ZSBpdGVtcy5cclxuICAgIHNjb3BlOiBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmUuZmlsZVwiXHJcbn0iLCJjb25zdCBOaWRnZXRFbGVtZW50ID0gcmVxdWlyZShcIkB0aGFlcmlvdXMvbmlkZ2V0XCIpLk5pZGdldEVsZW1lbnQ7XHJcblxyXG5jbGFzcyBWYWx1ZVVwZGF0ZSBleHRlbmRzICBDdXN0b21FdmVudHtcclxuICAgIGNvbnN0cnVjdG9yKHZhbHVlKSB7XHJcbiAgICAgICAgc3VwZXIoJ3ZhbHVlLXVwZGF0ZScsXHJcbiAgICAgICAgICAgIHtkZXRhaWwgOiB7dmFsdWUgOiB2YWx1ZX19XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgQ2hlY2tCb3ggZXh0ZW5kcyBOaWRnZXRFbGVtZW50IHtcclxuICAgIGFzeW5jIGNvbm5lY3RlZENhbGxiYWNrKCl7XHJcbiAgICAgICAgYXdhaXQgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcclxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0eXBlb2YodGhpcy5sb2NrZWQpKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubG9ja2VkKSByZXR1cm47XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlKGRpc3BhdGNoID0gdHJ1ZSl7XHJcbiAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCA9PT0gJ3RydWUnKSB0aGlzLnNldENoZWNrZWQoJ2ZhbHNlJywgZGlzcGF0Y2gpO1xyXG4gICAgICAgIGVsc2UgdGhpcy5zZXRDaGVja2VkKCd0cnVlJywgZGlzcGF0Y2gpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjaGVja2VkKCl7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhc0F0dHJpYnV0ZShDaGVja0JveC5DSEVDS0VEX0FUVFJJQlVURSkpe1xyXG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShDaGVja0JveC5DSEVDS0VEX0FUVFJJQlVURSwgJ2ZhbHNlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShDaGVja0JveC5DSEVDS0VEX0FUVFJJQlVURSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGNoZWNrZWQodmFsdWUpe1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5jaGVja2VkKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoQ2hlY2tCb3guQ0hFQ0tFRF9BVFRSSUJVVEUsIHZhbHVlKTtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFZhbHVlVXBkYXRlKHZhbHVlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2hlY2tlZCh2YWx1ZSwgZGlzcGF0Y2ggPSB0cnVlKXtcclxuICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMuY2hlY2tlZCkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKENoZWNrQm94LkNIRUNLRURfQVRUUklCVVRFLCB2YWx1ZSk7XHJcbiAgICAgICAgaWYgKGRpc3BhdGNoKSB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFZhbHVlVXBkYXRlKHZhbHVlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGxvY2tlZCBhdHRyaWJ1dGUuXHJcbiAgICAgKiBJZiB0cnVlIHByZXZlbnRzIGNoYW5naW5nIHZhbHVlLlxyXG4gICAgICogQHBhcmFtIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIHNldCBsb2NrZWQodmFsdWUpe1xyXG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKENoZWNrQm94LkxPQ0tFRF9BVFRSSUJVVEUsIHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSBsb2NrZWQgYXR0cmlidXRlLlxyXG4gICAgICovXHJcbiAgICBnZXQgbG9ja2VkKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKENoZWNrQm94LkxPQ0tFRF9BVFRSSUJVVEUpID09PSBcInRydWVcIjtcclxuICAgIH1cclxufVxyXG5cclxuQ2hlY2tCb3guQ0hFQ0tFRF9BVFRSSUJVVEUgPSBcImNoZWNrZWRcIjtcclxuQ2hlY2tCb3guTE9DS0VEX0FUVFJJQlVURSA9IFwibG9ja2VkXCI7XHJcbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2NoZWNrLWJveCcsIENoZWNrQm94KTtcclxubW9kdWxlLmV4cG9ydHMgPSBDaGVja0JveDsiLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbi8qKiBWaWV3LUNvbnRyb2xsZXIgZm9yIHRoZSBIVE1MIGdhbWUgYm9hcmQgZWxlbWVudFxyXG4gICAgVGhpcyBpcyB0aGUgY2xhc3NpY2FsIFwiSmVvcGFyZHlcIiB0eXBlIGJvYXJkXHJcbiAgICBUaGlzIGlzIG1vZGVsIGFnbm9zdGljLCBzZWUgRWRpdG9yUGFuZS5qcyBmb3IgbW9kZWwgbWV0aG9kc1xyXG4gICAgZ2VuZXJhdGVzIHRoZSBmb2xsb3dpbmcgZXZlbnRzOlxyXG4gICAgICAgIGNlbGwtc2VsZWN0IChyb3csIGNvbCk6IHdoZW4gYSB1c2VyIGNsaWNrcyBhIGNlbGxcclxuICAgICAgICBoZWFkZXItdXBkYXRlICh2YWx1ZSwgY29sLCBmb250c2l6ZSkgOiB3aGVuIHRoZSBoZWFkZXIgdGV4dCBjaGFuZ2VzIChhbmQgYmx1cnMpXHJcbiAqKi9cclxuXHJcbmNvbnN0IE5pZGdldEVsZW1lbnQgPSByZXF1aXJlKFwiQHRoYWVyaW91cy9uaWRnZXRcIikuTmlkZ2V0RWxlbWVudDtcclxuXHJcbmNsYXNzIENlbGxTZWxlY3RFdmVudCBleHRlbmRzIEN1c3RvbUV2ZW50e1xyXG4gICAgY29uc3RydWN0b3Iocm93LCBjb2wpIHtcclxuICAgICAgICBzdXBlcignY2VsbC1zZWxlY3QnLFxyXG4gICAgICAgICAgICAgIHtkZXRhaWwgOiB7cm93IDogcm93LCBjb2wgOiBjb2wgfX1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBIZWFkZXJVcGRhdGVFdmVudCBleHRlbmRzICBDdXN0b21FdmVudHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbCwgdmFsdWUsIGZvbnRTaXplKSB7XHJcbiAgICAgICAgc3VwZXIoJ2hlYWRlci11cGRhdGUnLFxyXG4gICAgICAgICAgICB7ZGV0YWlsIDoge3ZhbHVlIDogdmFsdWUsIGNvbCA6IGNvbCwgZm9udFNpemUgOiBmb250U2l6ZX19XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgR2FtZUJvYXJkIGV4dGVuZHMgTmlkZ2V0RWxlbWVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcImdhbWUtYm9hcmQtdGVtcGxhdGVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVhZHkoKXtcclxuICAgICAgICBhd2FpdCBzdXBlci5yZWFkeSgpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBlbGVtZW50IG9mIHRoaXMucXVlcnlTZWxlY3RvckFsbChcIi50ZXh0LWJ1ZmZlclwiKSl7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnZhbHVlXCIpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+e1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLmlubmVySFRNTCA9PT0gXCJcIikgdmFsdWUuaW5uZXJIVE1MID0gXCIgXCI7IC8vIG1ha2VzIHRoZSBjdXJzb3Igc2hvdyB1cCB3aGVuIGZvY3VzZWRcclxuICAgICAgICAgICAgICAgIHZhbHVlLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgNjsgY29sKyspIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRIZWFkZXIoY29sKS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2ZW50KT0+e1xyXG4gICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmZpdFRleHQubm90aWZ5KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5nZXRIZWFkZXIoY29sKS5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCAoZXZlbnQpPT57XHJcbiAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuaW5uZXJIVE1MID0gZXZlbnQudGFyZ2V0LnRleHQudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmZpdFRleHQubm90aWZ5KGZvbnRTaXplPT57XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBIZWFkZXJVcGRhdGVFdmVudChjb2wsIHRoaXMuZ2V0SGVhZGVyKGNvbCkudGV4dCwgZm9udFNpemUpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDU7IHJvdysrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldENlbGwocm93LCBjb2wpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDZWxsU2VsZWN0RXZlbnQocm93LCBjb2wpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBjYXRlZ29yeSB0ZXh0LlxyXG4gICAgICogQHBhcmFtIGluZGV4IFRoZSBjb2x1bW4gdG8gc2V0XHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIHRleHQgdG8gc2V0IGl0IHRvLlxyXG4gICAgICogQHBhcmFtIGZvbnRTaXplXHJcbiAgICAgKiBAcGFyYW0gbG9jayB0dXJuIG9mZiBjb250ZW50LWVkaXRhYmxlLCBkZWZhdWx0IGZhbHNlIChvbikuXHJcbiAgICAgKi9cclxuICAgIHNldEhlYWRlcihpbmRleCwgdmFsdWUsIGZvbnRTaXplLCBsb2NrID0gZmFsc2Upe1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmdldEhlYWRlcihpbmRleCk7XHJcbiAgICAgICAgZWxlbWVudC50ZXh0ID0gdmFsdWU7XHJcbiAgICAgICAgZWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplO1xyXG5cclxuICAgICAgICBpZiAobG9jayl7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY29udGVudEVkaXRhYmxlXCIsIFwiZmFsc2VcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmUgdGhlIGhlYWRlciBodG1sIGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSBpbmRleFxyXG4gICAgICogQHBhcmFtIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIGdldEhlYWRlcihpbmRleCl7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBpbmRleCAhPT0gXCJudW1iZXJcIiB8fCBpbmRleCA8IDAgfHwgaW5kZXggPiA2KSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGluZGV4OiBcIiArIGluZGV4KTtcclxuICAgICAgICBsZXQgc2VsZWN0b3IgPSBgW2RhdGEtcm93PSdoJ11bZGF0YS1jb2w9JyR7aW5kZXh9J10gLnZhbHVlYDtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgdmFsdWUgb2YgYSBub24tY2F0ZWdvcnkgY2VsbC5cclxuICAgICAqIEBwYXJhbSByb3dcclxuICAgICAqIEBwYXJhbSBjb2xcclxuICAgICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAgICovXHJcbiAgICBzZXRDZWxsKHJvdywgY29sLCB2YWx1ZSA9IFwiXCIpe1xyXG4gICAgICAgIHRoaXMuZ2V0Q2VsbChyb3csIGNvbCkudGV4dENvbnRlbnQgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDZWxsKHJvdywgY29sKXtcclxuICAgICAgICBsZXQgc2VsZWN0b3IgPSBgW2RhdGEtcm93PVwiJHtyb3d9XCJdW2RhdGEtY29sPVwiJHtjb2x9XCJdIC52YWx1ZWA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q29tcGxldGUocm93LCBjb2wsIHZhbHVlKXtcclxuICAgICAgICBpZiAodHlwZW9mIHJvdyAhPT0gXCJudW1iZXJcIiB8fCByb3cgPCAwIHx8IHJvdyA+IDYpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcm93OiBcIiArIHJvdyk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjb2wgIT09IFwibnVtYmVyXCIgfHwgY29sIDwgMCB8fCBjb2wgPiA1KSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNvbDogXCIgKyBjb2wpO1xyXG4gICAgICAgIHRoaXMuZ2V0Q2VsbChyb3csIGNvbCkuc2V0QXR0cmlidXRlKFwiZGF0YS1jb21wbGV0ZVwiLCB2YWx1ZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2dhbWUtYm9hcmQnLCBHYW1lQm9hcmQpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWVCb2FyZDsiLCJjb25zdCBOaWRnZXRFbGVtZW50ID0gcmVxdWlyZShcIkB0aGFlcmlvdXMvbmlkZ2V0XCIpLk5pZGdldEVsZW1lbnQ7XHJcblxyXG5jbGFzcyBNZW51Q29udGFpbmVyIGV4dGVuZHMgTmlkZ2V0RWxlbWVudHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKFwibWVudS1jb250YWluZXItdGVtcGxhdGVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVhZHkoKSB7XHJcbiAgICAgICAgYXdhaXQgc3VwZXIucmVhZHkoKTtcclxuICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIjbWVudS1pY29uXCIpLnNldEF0dHJpYnV0ZShcInNyY1wiLCAgdGhpcy5nZXRBdHRyaWJ1dGUoXCJpbWFnZS1zcmNcIikpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMub3V0ZXJTZWxlY3RvckFsbChcIm1lbnUtaXRlbVwiKSl7XHJcbiAgICAgICAgICAgIGl0ZW0uZGV0YWNoKCk7XHJcbiAgICAgICAgICAgIHRoaXMubWVudUFyZWEuYXBwZW5kKGl0ZW0pO1xyXG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpPT57XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KGl0ZW0uZ2V0QXR0cmlidXRlKFwiZXZlbnQtbmFtZVwiKSwge2J1YmJsZXM6IHRydWUsIGNvbXBvc2VkOiB0cnVlfSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucG9zaXRpb25NZW51KCk7XHJcblxyXG4gICAgICAgIHRoaXMubWVudUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PnRoaXMudG9nZ2xlTWVudSgpKTtcclxuICAgICAgICB0aGlzLm1lbnVBcmVhLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsICgpPT4gdGhpcy5tb3VzZUxlYXZlKCkpO1xyXG4gICAgICAgIHRoaXMubWVudUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCAoKT0+IHRoaXMubW91c2VMZWF2ZSgpKTtcclxuICAgICAgICB0aGlzLm1lbnVBcmVhLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsICgpPT4gdGhpcy5tb3VzZUVudGVyKCkpO1xyXG4gICAgICAgIHRoaXMubWVudUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCAoKT0+IHRoaXMubW91c2VFbnRlcigpKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KG1lbnVTZWxlY3Rvcil7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWF1dG9jbG9zZT0ndHJ1ZSddXCIpLmZvckVhY2goKGVsZSk9PiB7XHJcbiAgICAgICAgICAgIGVsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PnRoaXMuY2xvc2UoKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3ViLW1lbnVcIikuZm9yRWFjaCgoZWxlKT0+e1xyXG4gICAgICAgICAgICBlbGUucXVlcnlTZWxlY3RvcihcIi5tZW51LWxhYmVsXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVNZW51KGVsZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpe1xyXG4gICAgICAgIHRoaXMubWVudUFyZWEuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zdWItbWVudSA+IC5tZW51LWFyZWFcIikuZm9yRWFjaCgoZWxlKT0+e1xyXG4gICAgICAgICAgICBlbGUuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCl7XHJcbiAgICAgICAgdGhpcy5tZW51QXJlYS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb25NZW51KCk7XHJcbiAgICB9XHJcblxyXG4gICAgbW91c2VMZWF2ZSgpe1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVvdXQpIHJldHVybjtcclxuICAgICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy50aW1lb3V0ID0gbnVsbDtcclxuICAgICAgICB9LCA1MDApO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdXNlRW50ZXIoKXtcclxuICAgICAgICBpZiAoIXRoaXMudGltZW91dCkgcmV0dXJuO1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpO1xyXG4gICAgICAgIHRoaXMudGltZW91dCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd01lbnUoKXtcclxuICAgICAgICB0aGlzLm1lbnVBcmVhLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbk1lbnUoKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlTWVudSgpe1xyXG4gICAgICAgIHRoaXMubWVudUFyZWEuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBpc01lbnVIaWRkZW4oKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5tZW51QXJlYS5jbGFzc0xpc3QuY29udGFpbnMoXCJoaWRkZW5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlTWVudSgpe1xyXG4gICAgICAgIGlmICh0aGlzLmlzTWVudUhpZGRlbigpKSB0aGlzLnNob3dNZW51KCk7XHJcbiAgICAgICAgZWxzZSB0aGlzLmhpZGVNZW51KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcG9zaXRpb25NZW51KCl7XHJcbiAgICAgICAgY29uc3QgbGVmdCA9IHRoaXMubWVudUJ1dHRvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG4gICAgICAgIGNvbnN0IGJXaWR0aCA9IHRoaXMubWVudUJ1dHRvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxuICAgICAgICBjb25zdCBtV2lkdGggPSB0aGlzLm1lbnVBcmVhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG5cclxuICAgICAgICBpZiAoKGxlZnQgKyBiV2lkdGggKyBtV2lkdGggKyAyKSA+IHdpbmRvdy5pbm5lcldpZHRoKXtcclxuICAgICAgICAgICAgdGhpcy5zZXRNZW51TGVmdCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TWVudVJpZ2h0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldE1lbnVMZWZ0KCl7XHJcbiAgICAgICAgY29uc3QgbGVmdCA9IHRoaXMubWVudUJ1dHRvbi5vZmZzZXRMZWZ0O1xyXG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5tZW51QXJlYS5vZmZzZXRXaWR0aDtcclxuICAgICAgICB0aGlzLm1lbnVBcmVhLnN0eWxlLmxlZnQgPSAobGVmdCAtIHdpZHRoIC0gMikgKyBcInB4XCI7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TWVudVJpZ2h0KCl7XHJcbiAgICAgICAgY29uc3QgbGVmdCA9IHRoaXMubWVudUJ1dHRvbi5vZmZzZXRMZWZ0O1xyXG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5tZW51QnV0dG9uLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIHRoaXMubWVudUFyZWEuc3R5bGUubGVmdCA9IChsZWZ0ICsgd2lkdGggKyAyKSArIFwicHhcIjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbWVudUJ1dHRvbigpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIjbWVudS1pY29uXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBtZW51QXJlYSgpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIjb3V0ZXJcIik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIE1lbnVJdGVtIGV4dGVuZHMgTmlkZ2V0RWxlbWVudHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVhZHkoKSB7XHJcbiAgICAgICAgYXdhaXQgc3VwZXIucmVhZHkoKTtcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbWVudS1pdGVtJywgTWVudUl0ZW0pO1xyXG53aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdtZW51LWNvbnRhaW5lcicsIE1lbnVDb250YWluZXIpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IE1lbnVDb250YWluZXI7IiwiY29uc3QgTmlkZ2V0RWxlbWVudCA9IHJlcXVpcmUoXCJAdGhhZXJpb3VzL25pZGdldFwiKS5OaWRnZXRFbGVtZW50O1xyXG5yZXF1aXJlKFwiLi9DaGVja0JveC5qc1wiKTtcclxuXHJcbmNsYXNzIFZhbHVlVXBkYXRlIGV4dGVuZHMgQ3VzdG9tRXZlbnQge1xyXG4gICAgY29uc3RydWN0b3IoaW5kZXgsIHZhbHVlLCBjaGVja2VkKSB7XHJcbiAgICAgICAgc3VwZXIoJ3ZhbHVlLXVwZGF0ZScsXHJcbiAgICAgICAgICAgIHtkZXRhaWw6IHtpbmRleDogaW5kZXgsIHZhbHVlOiB2YWx1ZSwgY2hlY2tlZDogY2hlY2tlZH19XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgTXVsdGlwbGVDaG9pY2VQcmVzZW50IGV4dGVuZHMgTmlkZ2V0RWxlbWVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcIm11bHRpcGxlLWNob2ljZS1wcmVzZW50LXRlbXBsYXRlXCIpO1xyXG4gICAgICAgIHRoaXMudGltZW91dHMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUaW1lb3V0KGluZGV4LCB2YWx1ZSl7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZW91dHNbaW5kZXhdKSBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0c1tpbmRleF0pO1xyXG4gICAgICAgIHRoaXMudGltZW91dHNbaW5kZXhdID0gc2V0VGltZW91dCgoKT0+e1xyXG4gICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBWYWx1ZVVwZGF0ZShpbmRleCwgdmFsdWUsIHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVvdXRzW2luZGV4XSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9LCAzMDApO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJlYWR5KCkge1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLnJlYWR5KCk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCJjaGVjay1ib3hcIikpe1xyXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2YWx1ZS11cGRhdGVcIiwgZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBlbGVtZW50LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBldmVudC5kZXRhaWwudmFsdWUgPT09IFwidHJ1ZVwiO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi53YWdlclwiKS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud2FnZXJcIikuZGlzYWJsZWQgPSAhY2hlY2tlZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVmFsdWVVcGRhdGUoaW5kZXgsIHBhcnNlSW50KHZhbHVlKSwgY2hlY2tlZCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCIud2FnZXJcIikpe1xyXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudD0+e1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jb250ZW50ID0gXCJcIjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRleHQtdXBkYXRlXCIsIGV2ZW50PT57XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGVsZW1lbnQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBldmVudC5kZXRhaWwuY29udGVudDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVmFsdWVVcGRhdGUoaW5kZXgsIHBhcnNlSW50KHZhbHVlKSwgdHJ1ZSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TW9kZShtb2RlKSB7XHJcbiAgICAgICAgc3dpdGNoIChtb2RlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzaG93XCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoXCJzaG93LW1vZGVcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImRhdGEtZW50ZXJcIjpcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcInNob3ctbW9kZVwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRBbnN3ZXJUZXh0KGluZGV4LCB0ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKGAuaW5uZXJbZGF0YS1pbmRleD1cIiR7aW5kZXh9XCJdIC5hbnN3ZXJgKS50ZXh0ID0gdGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBzZXRDaGVja2VkKGluZGV4LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihgLmlubmVyW2RhdGEtaW5kZXg9XCIke2luZGV4fVwiXSBjaGVjay1ib3hgKS5jaGVja2VkID0gdmFsdWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ211bHRpcGxlLWNob2ljZS1wcmVzZW50JywgTXVsdGlwbGVDaG9pY2VQcmVzZW50KTtcclxubW9kdWxlLmV4cG9ydHMgPSBNdWx0aXBsZUNob2ljZVByZXNlbnQ7IiwiY29uc3QgTmlkZ2V0RWxlbWVudCA9IHJlcXVpcmUoXCJAdGhhZXJpb3VzL25pZGdldFwiKS5OaWRnZXRFbGVtZW50O1xyXG5cclxuY2xhc3MgTmlkZ2V0QnV0dG9uIGV4dGVuZHMgIE5pZGdldEVsZW1lbnR7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcIm5pZGdldC1idXR0b24tdGVtcGxhdGVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVhZHkoKXtcclxuICAgICAgIGF3YWl0IHN1cGVyLnJlYWR5KCk7XHJcbiAgICAgICB0aGlzLkRPTS50ZXh0LmlubmVySFRNTCA9IHRoaXMuaW5uZXJIVE1MO1xyXG4gICAgICAgdGhpcy5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc2FibGUoKXtcclxuICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBlbmFibGUoKXtcclxuICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlZFwiKTtcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbmlkZ2V0LWJ1dHRvbicsIE5pZGdldEJ1dHRvbik7XHJcbm1vZHVsZS5leHBvcnRzID0gTmlkZ2V0QnV0dG9uOyIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuY29uc3QgTmlkZ2V0RWxlbWVudCA9IHJlcXVpcmUoXCJAdGhhZXJpb3VzL25pZGdldFwiKS5OaWRnZXRFbGVtZW50O1xyXG5pbXBvcnQgUGxheWVyUGFuZWwgZnJvbSBcIi4vUGxheWVyUGFuZWwuanNcIjtcclxuXHJcbmNsYXNzIFBsYXllckNvbnRhaW5lciBleHRlbmRzIE5pZGdldEVsZW1lbnQge1xyXG4gICAgY29uc3RydWN0b3IodGVtcGxhdGVJZCA9IFwicGxheWVyLWNvbnRhaW5lci10ZW1wbGF0ZVwiKSB7XHJcbiAgICAgICAgc3VwZXIodGVtcGxhdGVJZCk7XHJcbiAgICAgICAgdGhpcy5leHRyYVBsYXllcnNIaWRkZW4gPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJlYWR5KCl7XHJcbiAgICAgICAgYXdhaXQgc3VwZXIucmVhZHkoKTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZXh0cmFQbGF5ZXJzSGlkZGVuKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIub3V0ZXJcIikuY2xhc3NMaXN0LmFkZChcImhpZGUtZXh0cmFcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIjZXhwYW5kLWJ1dHRvbiAudGV4dFwiKS5pbm5lckhUTUwgPSBcIiYjOTY1NDtcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFQbGF5ZXJzSGlkZGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIiNleHBhbmQtYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudCA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmV4dHJhUGxheWVyc0hpZGRlbil7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIub3V0ZXJcIikuY2xhc3NMaXN0LnJlbW92ZShcImhpZGUtZXh0cmFcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIjZXhwYW5kLWJ1dHRvbiAudGV4dFwiKS5pbm5lckhUTUwgPSBcIiYjOTY2NDtcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFQbGF5ZXJzSGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFBsYXllcihuYW1lLCBzY29yZSA9IDApe1xyXG4gICAgICAgIGxldCBvdXRlciA9IHRoaXMucXVlcnlTZWxlY3RvcihcIi5vdXRlclwiKTtcclxuICAgICAgICBsZXQgZXhwYW5kQnV0dG9uID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiI2V4cGFuZC1idXR0b25cIik7XHJcblxyXG4gICAgICAgIGxldCBwbGF5ZXJQYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwbGF5ZXItcGFuZWxcIik7XHJcbiAgICAgICAgcGxheWVyUGFuZWwubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgcGxheWVyUGFuZWwuc2NvcmUgPSBzY29yZTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRQbGF5ZXJQYW5lbChwbGF5ZXJQYW5lbCk7XHJcbiAgICAgICAgd2luZG93Lmxhc3RQYW5lbCA9IHBsYXllclBhbmVsO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zaXplID4gNikgZXhwYW5kQnV0dG9uLnNob3coKTtcclxuICAgICAgICByZXR1cm4gcGxheWVyUGFuZWw7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkSW5uZXIoKXtcclxuICAgICAgICBjb25zdCBvdXRlciA9IHRoaXMucXVlcnlTZWxlY3RvcihcIi5vdXRlclwiKTtcclxuICAgICAgICBjb25zdCBuZXh0SW5kZXggPSB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaW5uZXJcIikubGVuZ3RoO1xyXG5cclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm5pZGdldC1lbGVtZW50XCIpO1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImlubmVyXCIpO1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImV4dHJhXCIpO1xyXG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgYC0taW5kZXg6ICR7bmV4dEluZGV4fWApO1xyXG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleFwiLCBuZXh0SW5kZXgpO1xyXG4gICAgICAgIG91dGVyLmFwcGVuZChlbGVtZW50KTtcclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbm5lcihpbmRleCl7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMucXVlcnlTZWxlY3RvckFsbChcIi5pbm5lclwiKS5sZW5ndGggPD0gaW5kZXgpe1xyXG4gICAgICAgICAgICB0aGlzLmFkZElubmVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBzZWxlY3RvciA9IGAuaW5uZXJbZGF0YS1pbmRleD0nJHtpbmRleH0nXWBcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5xdWVyeVNlbGVjdG9yKGAuaW5uZXJbZGF0YS1pbmRleD0nJHtpbmRleH0nXWApO1xyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFBsYXllclBhbmVsKGVsZW1lbnQpe1xyXG4gICAgICAgIGNvbnN0IGlubmVySW5kZXggPSBNYXRoLnRydW5jKCh0aGlzLnNpemUpIC8gNik7XHJcbiAgICAgICAgY29uc3QgaW5uZXJFbGVtZW50ID0gdGhpcy5nZXRJbm5lcihpbm5lckluZGV4KTtcclxuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIGAtLWluZGV4OiAke3RoaXMuc2l6ZSAlIDZ9YCk7XHJcbiAgICAgICAgaW5uZXJFbGVtZW50LmFwcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2l6ZSgpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCJwbGF5ZXItcGFuZWxcIikubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIHRvcFBsYXllcigpe1xyXG4gICAgICAgIGxldCBjdXJyZW50SW5uZXIgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIuaW5uZXIuZmlyc3RcIik7XHJcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRJbm5lci5xdWVyeVNlbGVjdG9yKFwicGxheWVyLXBhbmVsXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFBsYXllcihuYW1lKXtcclxuICAgICAgICBmb3IgKGxldCBwYW5lbCBvZiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCJwbGF5ZXItcGFuZWxcIikpe1xyXG4gICAgICAgICAgICBpZiAocGFuZWwubmFtZSA9PT0gbmFtZSkgcmV0dXJuIHBhbmVsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBtb3ZlVG9Ub3AobmFtZSl7XHJcbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IFtdO1xyXG4gICAgICAgIGlmICghdGhpcy5nZXRQbGF5ZXIobmFtZSkpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29tcG9uZW50cy5wdXNoKHRoaXMuZ2V0UGxheWVyKG5hbWUpKTtcclxuICAgICAgICB0aGlzLmdldFBsYXllcihuYW1lKS5kZXRhY2goKTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMucXVlcnlTZWxlY3RvckFsbChcInBsYXllci1wYW5lbFwiKSl7XHJcbiAgICAgICAgICAgIGNvbXBvbmVudHMucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgZWxlbWVudC5kZXRhY2goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGNvbXBvbmVudCBvZiBjb21wb25lbnRzKXtcclxuICAgICAgICAgICAgdGhpcy5hZGRQbGF5ZXJQYW5lbChjb21wb25lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudHNbMF07XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKXtcclxuICAgICAgICBmb3IgKGxldCBpbm5lciBvZiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZXh0cmFcIikpe1xyXG4gICAgICAgICAgICBpbm5lci5kZXRhY2goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIi5pbm5lclwiKS50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB9XHJcbn1cclxuXHJcbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3BsYXllci1jb250YWluZXInLCBQbGF5ZXJDb250YWluZXIpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IFBsYXllckNvbnRhaW5lcjsiLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmNvbnN0IE5pZGdldEVsZW1lbnQgPSByZXF1aXJlKFwiQHRoYWVyaW91cy9uaWRnZXRcIikuTmlkZ2V0RWxlbWVudDtcclxuaW1wb3J0IFwiLi9QbGF5ZXJQYW5lbC5qc1wiO1xyXG5cclxuY2xhc3MgUGxheWVyUGFuZWwgZXh0ZW5kcyBOaWRnZXRFbGVtZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlSWQgPSBcInBsYXllci1wYW5lbC10ZW1wbGF0ZVwiKSB7XHJcbiAgICAgICAgc3VwZXIodGVtcGxhdGVJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVhZHkoKXtcclxuICAgICAgICBhd2FpdCBzdXBlci5yZWFkeSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBuYW1lKHZhbHVlKXtcclxuICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKS5pbm5lckhUTUwgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgc2NvcmUodmFsdWUpe1xyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIiNzY29yZVwiKS5pbm5lckhUTUwgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbmFtZSgpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKS5pbm5lckhUTUw7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNjb3JlKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIiNzY29yZVwiKS5pbm5lckhUTUw7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGRpbSh2YWx1ZSl7XHJcbiAgICAgICAgaWYgKHZhbHVlKSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIub3V0ZXJcIikuY2xhc3NMaXN0LmFkZChcImRpbVwiKTtcclxuICAgICAgICBlbHNlIHRoaXMucXVlcnlTZWxlY3RvcihcIi5vdXRlclwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiZGltXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBoaWdobGlnaHQodmFsdWUpe1xyXG4gICAgICAgIGlmICh2YWx1ZSkgdGhpcy5xdWVyeVNlbGVjdG9yKFwiLm91dGVyXCIpLmNsYXNzTGlzdC5hZGQoXCJoaWdobGlnaHRcIik7XHJcbiAgICAgICAgZWxzZSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIub3V0ZXJcIikuY2xhc3NMaXN0LnJlbW92ZShcImhpZ2hsaWdodFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgYWN0aXZlKHZhbHVlKXtcclxuICAgICAgICBpZiAodmFsdWUpIHRoaXMucXVlcnlTZWxlY3RvcihcIiNidXp6LWxpZ2h0XCIpLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgZWxzZSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIjYnV6ei1saWdodFwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVDbG9jaygpe1xyXG4gICAgICAgIHRoaXMuRE9NLmNsb2NrLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgYnV6eigpe1xyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIiNidXp6LWxpZ2h0XCIpLmNsYXNzTGlzdC5hZGQoXCJzd2VlcC1yaWdodFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpe1xyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIiNidXp6LWxpZ2h0XCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJzd2VlcC1yaWdodFwiKTtcclxuICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIiNzY29yZVwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvckFsbChcIi5jbG9jay10aWNrXCIpLmZvckVhY2goZSA9PiBlLmNsYXNzTGlzdC5yZW1vdmUoXCJzcGVudFwiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VGltZXIocGVyY2VudCl7XHJcbiAgICAgICAgaWYgKHBlcmNlbnQgPD0gODApIHRoaXMucXVlcnlTZWxlY3RvcihcIi5jbG9jay10aWNrW2RhdGEtaW5kZXg9JzQnXVwiKS5jbGFzc0xpc3QuYWRkKFwic3BlbnRcIik7XHJcbiAgICAgICAgaWYgKHBlcmNlbnQgPD0gNjApIHRoaXMucXVlcnlTZWxlY3RvcihcIi5jbG9jay10aWNrW2RhdGEtaW5kZXg9JzMnXVwiKS5jbGFzc0xpc3QuYWRkKFwic3BlbnRcIik7XHJcbiAgICAgICAgaWYgKHBlcmNlbnQgPD0gNDApIHRoaXMucXVlcnlTZWxlY3RvcihcIi5jbG9jay10aWNrW2RhdGEtaW5kZXg9JzInXVwiKS5jbGFzc0xpc3QuYWRkKFwic3BlbnRcIik7XHJcbiAgICAgICAgaWYgKHBlcmNlbnQgPD0gMjApIHRoaXMucXVlcnlTZWxlY3RvcihcIi5jbG9jay10aWNrW2RhdGEtaW5kZXg9JzEnXVwiKS5jbGFzc0xpc3QuYWRkKFwic3BlbnRcIik7XHJcbiAgICAgICAgaWYgKHBlcmNlbnQgPD0gMCkgIHRoaXMucXVlcnlTZWxlY3RvcihcIi5jbG9jay10aWNrW2RhdGEtaW5kZXg9JzAnXVwiKS5jbGFzc0xpc3QuYWRkKFwic3BlbnRcIik7XHJcbiAgICB9XHJcbn1cclxuXHJcbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3BsYXllci1wYW5lbCcsIFBsYXllclBhbmVsKTtcclxubW9kdWxlLmV4cG9ydHMgPSBQbGF5ZXJQYW5lbDsiLCJjb25zdCBOaWRnZXRFbGVtZW50ID0gcmVxdWlyZShcIkB0aGFlcmlvdXMvbmlkZ2V0XCIpLk5pZGdldEVsZW1lbnQ7XHJcblxyXG5jbGFzcyBUZXh0VXBkYXRlIGV4dGVuZHMgQ3VzdG9tRXZlbnQge1xyXG4gICAgY29uc3RydWN0b3IodGV4dCkge1xyXG4gICAgICAgIHN1cGVyKCd0ZXh0LXVwZGF0ZScsXHJcbiAgICAgICAgICAgIHtkZXRhaWw6IHt0ZXh0OiB0ZXh0fX1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBRdWVzdGlvblBhbmUgZXh0ZW5kcyBOaWRnZXRFbGVtZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwicXVlc3Rpb24tcGFuZS10ZW1wbGF0ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZWFkeSgpIHtcclxuICAgICAgICBhd2FpdCBzdXBlci5yZWFkeSgpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMucXVlcnlTZWxlY3RvcihcIi50ZXh0LWNvbnRlbnRzXCIpLmZvY3VzKCkpO1xyXG5cclxuICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIjdGV4dC1jb250ZW50c1wiKS5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0ZXh0ID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiLnRleHQtY29udGVudHNcIikudGV4dDtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBUZXh0VXBkYXRlKHRleHQudHJpbSgpKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKFwiLnRleHQtY29udGVudHNcIikudGV4dCA9IFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VGV4dCh0ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKFwiLnRleHQtY29udGVudHNcIikudGV4dCA9IHRleHQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3F1ZXN0aW9uLXBhbmUnLCBRdWVzdGlvblBhbmUpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IFF1ZXN0aW9uUGFuZTtcclxuXHJcblxyXG5cclxuIiwiY29uc3QgTmlkZ2V0RWxlbWVudCA9IHJlcXVpcmUoXCJAdGhhZXJpb3VzL25pZGdldFwiKS5OaWRnZXRFbGVtZW50O1xyXG5cclxuY2xhc3MgVGV4dElucHV0IGV4dGVuZHMgTmlkZ2V0RWxlbWVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcInRleHQtaW5wdXQtdGVtcGxhdGVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAgICAgdGhpcy5zb3VyY2VJbm5lckhUTUwgPSB0aGlzLmlubmVySFRNTDtcclxuICAgICAgICBhd2FpdCBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJlYWR5KCkge1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLnJlYWR5KCk7XHJcblxyXG4gICAgICAgIHRoaXMuZmlsdGVyID0gdGhpcy5nZXRBdHRyaWJ1dGUoVGV4dElucHV0LkZJTFRFUikgPz8gXCIuKlwiO1xyXG4gICAgICAgIGNvbnN0IGhpbnQgPSB0aGlzLmdldEF0dHJpYnV0ZShUZXh0SW5wdXQuSElOVF9BVFRSSUJVVEUpO1xyXG4gICAgICAgIHRoaXMuRE9NWydoaW50J10uaW5uZXJIVE1MID0gaGludDtcclxuXHJcbiAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy5zb3VyY2VJbm5lckhUTUw7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsICgpPT57XHJcbiAgICAgICAgICAgIHRoaXMuRE9NWydjb250ZW50J10uZm9jdXMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5ET01bJ2NvbnRlbnQnXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PntcclxuICAgICAgICAgICAgdGhpcy5ET01bJ2hpbnQnXS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLkRPTVsnY29udGVudCddLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsICgpPT57XHJcbiAgICAgICAgICAgIGlmICh0aGlzLkRPTVsnY29udGVudCddLmlubmVySFRNTC50cmltKCkgPT09IFwiXCIpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET01bJ2hpbnQnXS5pbm5lckhUTUwgPSBoaW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuRE9NWydjb250ZW50J10uYWRkRXZlbnRMaXN0ZW5lcihcImtleXByZXNzXCIsIChldmVudCk9PnRoaXMub25LZXlwcmVzcyhldmVudCkpO1xyXG4gICAgICAgIHRoaXMuRE9NWydjb250ZW50J10uYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldmVudCk9PnRoaXMub25JbnB1dChldmVudCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb250ZW50KCl7XHJcbiAgICAgICAgY29uc3Qgc3RyaW5nID0gdGhpcy5ET01bJ2NvbnRlbnQnXS5pbm5lckhUTUw7XHJcbiAgICAgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlQWxsKFwiJm5ic3A7XCIsIFwiIFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgY29udGVudCh2YWx1ZSl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRE9NWydjb250ZW50J10udGV4dCA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldENhcmV0KGluZGV4KSB7XHJcbiAgICAgICAgbGV0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKVxyXG4gICAgICAgIGxldCBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKClcclxuXHJcbiAgICAgICAgcmFuZ2Uuc2V0U3RhcnQodGhpcy5ET01bJ2NvbnRlbnQnXS5jaGlsZE5vZGVzWzBdLCBpbmRleCk7XHJcbiAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSlcclxuXHJcbiAgICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpXHJcbiAgICAgICAgc2VsLmFkZFJhbmdlKHJhbmdlKVxyXG4gICAgfVxyXG5cclxuICAgIG9uSW5wdXQoZXZlbnQpe1xyXG4gICAgICAgIGlmICh0aGlzLmZpbHRlciA9PT0gXCJcIikgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGNoZWNrID0gdGhpcy5jb250ZW50LnRyaW0oKTtcclxuICAgICAgICBsZXQgciA9IGNoZWNrLm1hdGNoKFwiXlwiICsgdGhpcy5maWx0ZXIgKyBcIiRcIik7XHJcbiAgICAgICAgaWYgKCFjaGVjay5tYXRjaChcIl5cIiArIHRoaXMuZmlsdGVyICsgXCIkXCIpKXtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy5wcmV2Q29udGVudDtcclxuICAgICAgICAgICAgdGhpcy5zZXRDYXJldCh0aGlzLnByZXZDYXJldCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXHJcbiAgICAgICAgICAgICAgICBcInRleHQtdXBkYXRlXCIsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnViYmxlcyA6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9zZWQgOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbCA6IHtjb250ZW50IDogdGhpcy5jb250ZW50fVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25LZXlwcmVzcyhldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC53aGljaCA9PT0gMTMpe1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcclxuICAgICAgICAgICAgICAgIFwidGV4dC1lbnRlclwiLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1YmJsZXMgOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvc2VkIDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWwgOiB7Y29udGVudCA6IHRoaXMuY29udGVudH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnByZXZDb250ZW50ID0gdGhpcy5jb250ZW50O1xyXG4gICAgICAgIHRoaXMucHJldkNhcmV0ID0gdGhpcy5zaGFkb3dSb290LmdldFNlbGVjdGlvbigpLmFuY2hvck9mZnNldDtcclxuICAgIH1cclxufVxyXG5cclxuVGV4dElucHV0LkZJTFRFUiA9IFwiZmlsdGVyXCI7XHJcblRleHRJbnB1dC5ISU5UX0FUVFJJQlVURSA9IFwiaGludFwiO1xyXG53aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCd0ZXh0LWlucHV0JywgVGV4dElucHV0KTtcclxubW9kdWxlLmV4cG9ydHMgPSBUZXh0SW5wdXQ7IiwiY29uc3QgTmlkZ2V0RWxlbWVudCA9IHJlcXVpcmUoXCJAdGhhZXJpb3VzL25pZGdldFwiKS5OaWRnZXRFbGVtZW50O1xyXG5cclxuY2xhc3MgVHJpdmlhVGltZXIgZXh0ZW5kcyBOaWRnZXRFbGVtZW50e1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwidHJpdmlhLXRpbWVyLXRlbXBsYXRlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0KHZhbHVlKXtcclxuICAgICAgICBpZiAodmFsdWUpIHRoaXMuc2V0KHZhbHVlKTtcclxuICAgICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpPT50aGlzLnN0ZXAoKSwgNTAwKTtcclxuICAgICAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0b3AoKXtcclxuICAgICAgICBpZiAodGhpcy50aW1lb3V0KXtcclxuICAgICAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzaG93KHZhbHVlKXtcclxuICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIub3V0ZXJcIikuY2xhc3NMaXN0LnJlbW92ZShcImN5Y2xlXCIpO1xyXG4gICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIjY3VycmVudC10aWNrIC50ZXh0XCIpLmlubmVySFRNTCA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdXBlci5zaG93KCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3Bpbigpe1xyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIi5vdXRlclwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiY3ljbGVcIik7XHJcbiAgICAgICAgc2V0VGltZW91dChcclxuICAgICAgICAgICAgKCk9PnRoaXMucXVlcnlTZWxlY3RvcihcIi5vdXRlclwiKS5jbGFzc0xpc3QuYWRkKFwiY3ljbGVcIiksXHJcbiAgICAgICAgICAgIDEwXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgc2V0VGltZW91dChcclxuICAgICAgICAgICAgKCk9PnRoaXMucXVlcnlTZWxlY3RvcihcIiNjdXJyZW50LXRpY2sgLnRleHRcIikuaW5uZXJIVE1MID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiI3ByZXYtdGlja1wiKS5pbm5lckhUTUwsXHJcbiAgICAgICAgICAgIDUwMFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RlcCgpe1xyXG4gICAgICAgIGlmICh0aGlzLnZhbHVlID4gMCAmJiB0aGlzLnJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgdGhpcy50aWNrKCk7XHJcbiAgICAgICAgICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQoKCk9PnRoaXMuc3RlcCgpLCAxMDAwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0KHZhbHVlKXtcclxuICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIjcHJldi10aWNrIC50ZXh0XCIpLmlubmVySFRNTCA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuc3BpbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHRpY2sobmV4dFZhbHVlKXtcclxuICAgICAgICBuZXh0VmFsdWUgPSBuZXh0VmFsdWUgPz8gLS10aGlzLnZhbHVlO1xyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIiNwcmV2LXRpY2tcIikuaW5uZXJIVE1MID0gbmV4dFZhbHVlO1xyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIi5vdXRlclwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiY3ljbGVcIik7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoXHJcbiAgICAgICAgICAgICgpPT50aGlzLnF1ZXJ5U2VsZWN0b3IoXCIub3V0ZXJcIikuY2xhc3NMaXN0LmFkZChcImN5Y2xlXCIpLFxyXG4gICAgICAgICAgICA1MDBcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KFxyXG4gICAgICAgICAgICAoKT0+dGhpcy5xdWVyeVNlbGVjdG9yKFwiI2N1cnJlbnQtdGljayAudGV4dFwiKS5pbm5lckhUTUwgPSBuZXh0VmFsdWUsXHJcbiAgICAgICAgICAgIDkwMFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3RyaXZpYS10aW1lcicsIFRyaXZpYVRpbWVyKTtcclxubW9kdWxlLmV4cG9ydHMgPSBUcml2aWFUaW1lcjsiLCJjbGFzcyBHYW1lTWFuYWdlclNlcnZpY2Uge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGRhdGEgb2JqZWN0IHRvIHNlbmQsIHdpbGwgZ2V0IHN0cmluZ2lmaWVkIGJ5IHRoaXMgbWV0aG9kXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHNlbmQoZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cclxuICAgICAgICAgICAgeGh0dHAuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh4aHR0cC5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlID0gSlNPTi5wYXJzZSh4aHR0cC5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSByZWplY3QocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSByZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB4aHR0cC5vcGVuKFwiUE9TVFwiLCBHYW1lTWFuYWdlclNlcnZpY2UuVVJMKTtcclxuICAgICAgICAgICAgeGh0dHAuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XHJcbiAgICAgICAgICAgIHhodHRwLnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmUgdGhlIHB1YmxpYyBnYW1lLWhhc2ggYXNzb2NpYXRlZCB3aXRoIHRoaXNcclxuICAgICAqIHNlc3Npb24uXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx1bmtub3duPn1cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0R2FtZUhhc2goKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VuZCh7XHJcbiAgICAgICAgICAgIGFjdGlvbjogXCJnZXQtZ2FtZS1oYXNoXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0b3AgYSBob3N0ZWQgZ2FtZSBhbmQgY2xlYXIgcGxheWVycy5cclxuICAgICAqIEBwYXJhbSB0b2tlbiBHb29nbGUgQVBJIHVzZXIgdG9rZW5cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHVua25vd24+fVxyXG4gICAgICovXHJcbiAgICBhc3luYyBsYXVuY2godG9rZW4sIG1vZGVsKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VuZCh7XHJcbiAgICAgICAgICAgIHRva2VuOiB0b2tlbixcclxuICAgICAgICAgICAgbW9kZWw6IG1vZGVsLFxyXG4gICAgICAgICAgICBhY3Rpb246IFwibGF1bmNoXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0b3AgYSBob3N0ZWQgZ2FtZSBhbmQgY2xlYXIgcGxheWVycy5cclxuICAgICAqIEBwYXJhbSB0b2tlbiBHb29nbGUgQVBJIHVzZXIgdG9rZW5cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHVua25vd24+fVxyXG4gICAgICovXHJcbiAgICBhc3luYyB0ZXJtaW5hdGUodG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5zZW5kKHtcclxuICAgICAgICAgICAgdG9rZW46IHRva2VuLFxyXG4gICAgICAgICAgICBhY3Rpb246IFwidGVybWluYXRlXCJcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERldGVybWluZSBpZiBhIGdhbWUgYXMgYmVlbiBob3N0ZWQuXHJcbiAgICAgKiBAcGFyYW0gdG9rZW4gR29vZ2xlIEFQSSB1c2VyIHRva2VuXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx1bmtub3duPn1cclxuICAgICAqL1xyXG4gICAgYXN5bmMgaGFzR2FtZSh0b2tlbikge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNlbmQoe1xyXG4gICAgICAgICAgICB0b2tlbjogdG9rZW4sXHJcbiAgICAgICAgICAgIGFjdGlvbjogXCJoYXMtZ2FtZVwiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2V0TmFtZShoYXNoLCBuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VuZCh7XHJcbiAgICAgICAgICAgICdnYW1lLWhhc2gnOiBoYXNoLFxyXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgICAgICBhY3Rpb246IFwic2V0LW5hbWVcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5HYW1lTWFuYWdlclNlcnZpY2UuVVJMID0gXCJnYW1lLW1hbmFnZXItc2VydmljZVwiO1xyXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWVNYW5hZ2VyU2VydmljZTsiLCJleHBvcnQgZGVmYXVsdCB7XHJcbiAgICBzYXZlUGF0aCA6IFwiZGF0YVwiLFxyXG4gICAgVElNRVMgOiB7XHJcbiAgICAgICAgQU5TV0VSOiAxMCxcclxuICAgICAgICBCVVpaOiAxMCxcclxuICAgICAgICBNVUxUSVBMRV9DSE9JQ0U6IDVcclxuICAgIH0sXHJcbiAgICBzZXNzaW9ucyA6IHtcclxuICAgICAgICBTRVNTSU9OX0VYUElSRV9IT1VSUzogMjQsXHJcbiAgICAgICAgU0VTU0lPTl9DT09LSUVfTkFNRTogXCJ0cml2aWEtc2Vzc2lvblwiLFxyXG4gICAgICAgIFNFU1NJT05fQ0xFQVJfREVMQVlfTUlOOiAzMFxyXG4gICAgfSxcclxuICAgIG5pZGdldHMgOiB7XHJcbiAgICAgICAgU0NSSVBUX1BBVEg6IFwiLi9zcmMvY2xpZW50L25pZGdldHNcIlxyXG4gICAgfSxcclxuICAgIGxvY2F0aW9ucyA6IHtcclxuICAgICAgICBIT1NUIDogXCJob3N0LmVqc1wiXHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyBzZXQgU0VTU0lPTl9DTEVBUl9ERUxBWV9NSU4gdG8gLTEgdG8gZGlzYWJsZS4iXX0=
