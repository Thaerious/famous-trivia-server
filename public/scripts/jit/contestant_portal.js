// generated by JITBrowserify on 5/26/2021, 4:04:39 PM
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';

module.exports = {
    prefix: "data-nidget",
    elementAttribute: "data-nidget-element",
    srcAttribute: "src",
    templateSrcAttribute: "template-src",
    nameAttribute: "name",
    interfaceAttribute: "interfaces",
    templateAttribute: "template-id",
    interfaceDataField: "interfaceData",
    modelDataField: "modelData",
    styleAttribute: "nidget-style"
};
},{}],2:[function(require,module,exports){
'use strict';
const NidgetElement = require("./NidgetElement");

/* global Utility */
class FileOperations {
    /**
     * Create a new dom element from a file (url).  Map variables (${...}) to 
     * a value.
     * @param {type} url
     * @param {type} map
     * @returns {node|FileOperations.loadDOMElement.domElement}
     */
    static async loadNidget(url, map){        
        let element = await FileOperations.loadDOMElement(url, map);
        return new NidgetElement(element);
    }    
    
    /**
     * Create a new dom element from a file (url).  Map variables (${...}) to 
     * a value.
     * @param {type} url
     * @param {type} map
     * @returns {node|FileOperations.loadDOMElement.domElement}
     */
    static async loadDOMElement(url, map = new Map()){        
        if (map instanceof Map === false) map = FileOperations.objectToMap(map);       
        let text = await FileOperations.getURL(url);
        return FileOperations.stringToDOMElement(text, map);
    }

    /**
     * Create a new dom element from text.
     * @param {type} text
     * @param {type} map
     * @returns {node|FileOperations.loadDOMElement.domElement}
     */
    static stringToDOMElement(text, map = new Map()){
        /* replace variables with values */
        for (let key of map.keys()){                  
            let value = map.get(key);
            let regex = new RegExp(`[$][{]?${key}[}]`, `g`);
            text = text.replace(regex, value);    
        }

        /* replace unfilled variables with empty */
        let regex = new RegExp(`[$][{][^}]*[}]`, `g`);
        text = text.replace(regex, ""); 

        let element = document.createElement('div');
        element.innerHTML = text;
        let domElement = null;
        console.log(element);

        return element;
    }

    static objectToMap(object){
        let map = new Map();
        for (let field in object){            
            if (typeof object[field] === "string" || typeof object[field] === "number"){
                map.set(field, object[field]);
            }
        }
        return map;
    }

    

    /*
     * Transfer contents of 'filename' from server to client.
     * @param {String} filename
     * @param {Function} successCallback
     * @param {Function} errorCallback
     * @returns {String} contents of file
     */
    static getURL(url) {
        let callback = function (resolve, reject) {
            var xhttp = new XMLHttpRequest();

            xhttp.onreadystatechange = function () {
                if (xhttp.readyState === 4) {
                    if (xhttp.status === 200) {
                        resolve(xhttp.responseText);
                    } else {
                        reject({
                            xhttp : xhttp,
                            status : xhttp.status, 
                            text : xhttp.responseText,
                            url : url
                        });
                    }
                }
            };
            
            xhttp.open("GET", url, true);
            xhttp.send(null);
        };

        return new Promise(callback);
    }

    /**
     * Create a new dom element from text.
     * @param {type} text
     * @param {type} map
     * @returns {node|FileOperations.loadDOMElement.domElement}
     */
    static async getFile(url, map = new Map()){
        let text = await FileOperations.getURL(url);

        /* replace variables with values */
        for (let key of map.keys()){
            let value = map.get(key);
            let regex = new RegExp(`[$][{]?${key}[}]`, `g`);
            text = text.replace(regex, value);
        }

        /* replace unfilled variables with empty */
        let regex = new RegExp(`[$][{][^}]*[}]`, `g`);
        text = text.replace(regex, "");

        return text;
    }

    /*
     * Transfer contents of 'filename' from server to client using current window location.
     * @param {String} filename
     * @param {Function} successCallback
     * @param {Function} errorCallback
     * @returns {undefined}
     */
    static getLocal(filename) {
        let callback = function (resolve, reject) {
            var xhttp = new XMLHttpRequest();
            var data = {};
            var url = window.location.href + "/" + filename;

            xhttp.onreadystatechange = function () {
                if (xhttp.readyState === 4) {
                    if (xhttp.status === 200) {
                        resolve(xhttp.responseText);
                    } else {
                        reject(xhttp.status, xhttp.responseText);
                    }
                }
            };

            xhttp.open("GET", url, true);
            xhttp.send(JSON.stringify(data));
        };

        return new Promise(callback);
    }
    
    /**
     * Cause 'text' to be saved as 'filename' client side.
     * @param {type} filename The default filename to save the text as.
     * @param {type} text The text to save to filename.
     * @returns {undefined}
     */
    static saveToFile(text, filename) {
        let anchor = document.createElement('a');
        let data = "text;charset=utf-8," + encodeURIComponent(text);
        anchor.setAttribute("href", "data:" + data);
        anchor.setAttribute("download", filename);
        anchor.click();
    }
}

FileOperations.NodeType = {
    ELEMENT : 1,
    ATTRIBUTE : 2,
    TEXT : 3, 
    CDATASECTION : 4,
    ENTITYREFERNCE : 5,
    ENTITY : 6,
    PROCESSINGINSTRUCTION : 7,
    COMMENT : 8,
    DOCUMENT : 9,
    DOCUMENTTYPE : 10,
    DOCUMENTFRAGMENT : 11,
    NOTATION : 12
};

module.exports = FileOperations;
},{"./NidgetElement":3}],3:[function(require,module,exports){
"use strict";
const FileOperations = require("./FileOperations");
const Nidget = require("./Constants");

/**
 * Calling methods on the nidget will treat shadow contents as regular contents.
 */
class NidgetElement extends HTMLElement {
    /**
     * Create a new Nidget associated with 'element'.  An error will be thrown
     * if the 'element' is already associated with a Nidget.
     * 
     * Disabled class indicates this nidget will ignore mouse events.
     * 
     * @param {type} element JQuery selector
     * @return {nm$_Nidget.NidgetElement}
     */
    constructor(templateId) {
        super();
        this.observers = {};

        if (templateId){
            this.applyTemplate(templateId);
        }
    }
    /**
        connectedCallback is invoked each time the custom element is appended into a document-connected element
     */
    async connectedCallback() {
        this.shadowContents = this;

        if (this.hasAttribute(Nidget.templateAttribute)){
            await this.applyTemplate(this.getAttribute(Nidget.templateAttribute));
        }

        this.detectDOM();
        this.ready();
    }

    detectDOM(){
        this.DOM = {};
        for (const element of this.querySelectorAll("[id]")){
            this.DOM[toCamelCase(element.id)] = element;
        }
    }

    /**
     * Retrieve a map of all data attributes
     * @returns {Map<any, any>}
     */
    dataAttributes() {
        let map = new Map();
        for (let attr of this.attributes) {
            if (attr.name.startsWith("data-")) {
                let name = attr.name.substr(5);
                map[name] = attr.value;
            }
        }
        return map;
    }

    /**
     * Attach a shadow element with the contents of the template named (templateID).
     * @return {undefined}
     */
    async applyTemplate(templateId) {
        if (this.shadowRoot !== null) return;
        let template = document.getElementById(templateId);

        if (!template){
            throw new Error(
                "Template '" + templateId + "' not found\n" +
                "Has the .ejs directive been added to the source file?\n" +
                "<%- include('../partials/nidget-templates'); %>"
            );
        }
        if (template.tagName.toUpperCase() !== "TEMPLATE") throw new Error("Element with id '" + templateId + "' is not a template.");

        this.attachShadow({mode: 'open'}).appendChild(template.content.cloneNode(true));
    }

    async ready(){}

    /**
     * Load contents of file into this element.
     * Replace all ${} variables with contents of 'map'.
     */
    async retrieveSource(map){
        let src = this.getAttribute(Nidget.srcAttribute);
        let text = await FileOperations.getFile(src, map);
        this.innerHTML = text;
    }

    static async loadTemplateSnippet(filename, tagname){
        let id = filename.replace(/[\// .-]+/g, "_");

        if (!document.querySelector(`#${id}`)){
            let text = await FileOperations.getFile(filename);
            let template = document.createElement("template");
            template.innerHTML = text;
            template.setAttribute("id", id);
            if (tagname) template.setAttribute("data-nidget", tagname);
            document.body.append(template);
        }

        let template = document.querySelector(`#${id}`);

        for (let ele of document.querySelectorAll(tagname)){
            await ele.injectTemplate(template);
        }
    }

    /**
     * Remove 'hidden' class.
     */
    show() {
        this.classList.remove("hidden");
        this.classList.add("shown");
    }

    /**
     * Add 'hidden' class.
     */
    hide() {
        this.classList.remove("shown");
        this.classList.add("hidden");
    }

    /**
     * Set the disabled flag that is read by nidget mouse functions.
     * @param value
     */
    set disabled(value){
        this.setAttribute(NidgetElement.DISABLED_ATTRIBUTE, value);
    }

    /**
     * Get the disabled flag that is read by nidget mouse functions.
     * @param value
     */
    get disabled(){
        if (!this.hasAttribute(NidgetElement.DISABLED_ATTRIBUTE)) return false;
        return this.getAttribute(NidgetElement.DISABLED_ATTRIBUTE);
    }

    /**
     * Return true if this element was under the mouse for the event.
     * @param {type} event
     * @param {type} element
     * @return {Boolean}
     */
    isUnderMouse(event) {
        let x = event.clientX;
        let y = event.clientY;
        let current = document.elementFromPoint(x, y);

        while (current) {
            if (current === this) return true;
            current = current.parentElement;
        }
        return false;
    }

    /**
     * Perform a query selection on the element, not the shadow root.
     */
    outerSelector(selectors){
        return super.querySelector(selectors);
    }

    /**
     * Perform a query select all on the element, not the shadow root.
     */
    outerSelectorAll(selectors){
        return super.querySelectorAll(selectors);
    }

    /**
     * Run the query selector on this element.
     * If this element has a shadow, run it on that instead.
     * @param selectors
     * @returns {HTMLElementTagNameMap[K]}
     */
   querySelector(selectors) {
        if (this.shadowRoot){
            return this.shadowRoot.querySelector(selectors);
        } else {
            return super.querySelector(selectors);
        }
    }

    /**
     * Run the query selector on this element.
     * If this element has a shadow, run it on that instead.
     * @param selectors
     * @returns {HTMLElementTagNameMap[K]}
     */
    querySelectorAll(selectors) {
        if (this.shadowRoot){
            return this.shadowRoot.querySelectorAll(selectors);
        } else {
            return super.querySelectorAll(selectors);
        }
    }

    /**
     * Remove this element from it's parent.
     */
    detach(){
        this.parentNode.removeChild(this);
    }

    /**
     * Index within the parent element.
     */
    index(){
        return Array.from(this.parentElement.children).indexOf(this);
    }
}

function toCamelCase(input){
    const split = input.split("-");
    for (let i = 1; i < split.length; i++) {
        split[i] = split[i].charAt(0).toUpperCase() + split[i].slice(1);
    }
    return split.join('');
}

NidgetElement.DISABLED_ATTRIBUTE = "nidget-disabled";
if (!window.customElements.get('nidget-element')) {
    window.customElements.define('nidget-element', NidgetElement);
}

module.exports = NidgetElement;
},{"./Constants":1,"./FileOperations":2}],4:[function(require,module,exports){
(function (setImmediate){(function (){
"use strict";
const NidgetElement = require("../NidgetElement");

/**
 * Set the font-size as a multiple of the css variable --fit-text-unit.
 * Style example: calc(45 * var(--fit-text-unit))
 */
class FitText {
    constructor(nidget){
        this.nidget = nidget;
        this.parseArguments();
        this.coefficient = this.extractUnits();
        this.lastCoefficient = 0;

        this.last = {
            hDiff: this.nidget.parentElement.offsetHeight - this.nidget.scrollHeight,
            wDiff: this.nidget.parentElement.offsetWidth - this.nidget.scrollWidth
        };
    }

    extractUnits(){
        const fontSize = this.nidget.style.fontSize;
        if (fontSize === "") return 1;
        if (!fontSize.endsWith(" * var(--fit-text-unit))")) return 1;
        if (!fontSize.startsWith("calc(")) return 1;
        const value = parseInt(fontSize.substr("calc(".length));
        if (!value || value < 1) return 1;
        return value;
    }

    notify(cb){
        this.direction = 0;
        setImmediate(()=>this.onResize(cb));
    }

    /**
     * Retrieve the settings from css
     */
    parseArguments(){
        let args = getComputedStyle(this.nidget).getPropertyValue("--nidget-fit-text");

        if (!args || args === false){
            this.hValue = 1;
            this.wValue = 1;
            return;
        }

        if (typeof(args) == "string"){
            if (args.search("height") !== -1) this.hValue = 1;
            if (args.search("width") !== -1) this.wValue = 1;
        }
    }

    /**
     * Fit the text element to it's parent element.
     * @param hValue true, fit the height
     * @param wValue true, fit the width
     */
    onResize(cb){
        delete this.timeout;
        cb = cb ?? function(){};

        if (this.nidget.textContent === "") return;
        if (this.nidget.parentElement.offsetHeight === 0) return;
        if (this.nidget.parentElement.offsetWidth === 0) return;
        if (this.nidget.style.display === "none") return;
        if (!this.hValue && !this.wValue) return;

        // hDiff growth direction due to height
        // wDiff growth direction due to width
        let hDiff = this.nidget.parentElement.offsetHeight - this.nidget.scrollHeight;
        let wDiff = this.nidget.parentElement.offsetWidth - this.nidget.scrollWidth;

        if (this.last.hDiff === hDiff && this.last.wDiff === wDiff) {
            cb(this.nidget.style.fontSize);
            return;
        }

        if (!this.hValue) hDiff = 0;
        if (!this.wValue) wDiff = 0;

        let dir = Math.sign(hDiff | wDiff); // will prefer to shrink
        const newCoefficient = this.coefficient + dir;

        const fontSize = `calc(${newCoefficient} * var(--fit-text-unit))`;
        if (newCoefficient !== this.coefficient && newCoefficient !== this.lastCoefficient) {
            this.nidget.style.opacity = 0.0;
            this.nidget.style.fontSize = fontSize;
            this.lastCoefficient = this.coefficient;
            this.coefficient = newCoefficient;
            this.timeout = setImmediate(()=>this.onResize(cb));
        } else {
            this.nidget.style.opacity = 1.0;
            this.lastCoefficient = 0;
            this.last = {hDiff: hDiff, wDiff: wDiff};
            cb(fontSize);
        }
    }
}

/**
 * A nidget element for displaying text.
 * put '--nidget-fit-text: 1.0;' into css for this element to enable scaling.
 * see: NidgetStyle.js
 */
class NidgetText extends NidgetElement {

    constructor() {
        super();
    }

    remove(){
        super.remove();
    }

    get fitText(){
        if (!this._fitText) this._fitText = new FitText(this);
        return this._fitText;
    }

    connectedCallback() {
        super.connectedCallback();
    }

    set text(value){
        this.innerText = value;
    }

    get text(){
        return this.innerText;
    }
}
;

if (!window.customElements.get('nidget-text')) {
    window.customElements.define('nidget-text', NidgetText);
}
module.exports = NidgetText;
}).call(this)}).call(this,require("timers").setImmediate)

},{"../NidgetElement":3,"timers":25}],5:[function(require,module,exports){
'use strict';
module.exports = {
    NidgetElement : require("./NidgetElement"),
    NidgetText : require("./nidget-components/NidgetText"),
    Constants: require("./Constants"),
};
},{"./Constants":1,"./NidgetElement":3,"./nidget-components/NidgetText":4}],6:[function(require,module,exports){
function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return self;
}

module.exports = _assertThisInitialized;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],7:[function(require,module,exports){
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }

  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}

function _asyncToGenerator(fn) {
  return function () {
    var self = this,
        args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);

      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }

      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }

      _next(undefined);
    });
  };
}

module.exports = _asyncToGenerator;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],8:[function(require,module,exports){
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

module.exports = _classCallCheck;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],9:[function(require,module,exports){
var setPrototypeOf = require("./setPrototypeOf.js");

var isNativeReflectConstruct = require("./isNativeReflectConstruct.js");

function _construct(Parent, args, Class) {
  if (isNativeReflectConstruct()) {
    module.exports = _construct = Reflect.construct;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  } else {
    module.exports = _construct = function _construct(Parent, args, Class) {
      var a = [null];
      a.push.apply(a, args);
      var Constructor = Function.bind.apply(Parent, a);
      var instance = new Constructor();
      if (Class) setPrototypeOf(instance, Class.prototype);
      return instance;
    };

    module.exports["default"] = module.exports, module.exports.__esModule = true;
  }

  return _construct.apply(null, arguments);
}

module.exports = _construct;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{"./isNativeReflectConstruct.js":16,"./setPrototypeOf.js":18}],10:[function(require,module,exports){
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  return Constructor;
}

module.exports = _createClass;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],11:[function(require,module,exports){
var superPropBase = require("./superPropBase.js");

function _get(target, property, receiver) {
  if (typeof Reflect !== "undefined" && Reflect.get) {
    module.exports = _get = Reflect.get;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  } else {
    module.exports = _get = function _get(target, property, receiver) {
      var base = superPropBase(target, property);
      if (!base) return;
      var desc = Object.getOwnPropertyDescriptor(base, property);

      if (desc.get) {
        return desc.get.call(receiver);
      }

      return desc.value;
    };

    module.exports["default"] = module.exports, module.exports.__esModule = true;
  }

  return _get(target, property, receiver || target);
}

module.exports = _get;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{"./superPropBase.js":19}],12:[function(require,module,exports){
function _getPrototypeOf(o) {
  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {
    return o.__proto__ || Object.getPrototypeOf(o);
  };
  module.exports["default"] = module.exports, module.exports.__esModule = true;
  return _getPrototypeOf(o);
}

module.exports = _getPrototypeOf;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],13:[function(require,module,exports){
var setPrototypeOf = require("./setPrototypeOf.js");

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function");
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      writable: true,
      configurable: true
    }
  });
  if (superClass) setPrototypeOf(subClass, superClass);
}

module.exports = _inherits;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{"./setPrototypeOf.js":18}],14:[function(require,module,exports){
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

module.exports = _interopRequireDefault;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],15:[function(require,module,exports){
function _isNativeFunction(fn) {
  return Function.toString.call(fn).indexOf("[native code]") !== -1;
}

module.exports = _isNativeFunction;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],16:[function(require,module,exports){
function _isNativeReflectConstruct() {
  if (typeof Reflect === "undefined" || !Reflect.construct) return false;
  if (Reflect.construct.sham) return false;
  if (typeof Proxy === "function") return true;

  try {
    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    return true;
  } catch (e) {
    return false;
  }
}

module.exports = _isNativeReflectConstruct;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],17:[function(require,module,exports){
var _typeof = require("@babel/runtime/helpers/typeof")["default"];

var assertThisInitialized = require("./assertThisInitialized.js");

function _possibleConstructorReturn(self, call) {
  if (call && (_typeof(call) === "object" || typeof call === "function")) {
    return call;
  }

  return assertThisInitialized(self);
}

module.exports = _possibleConstructorReturn;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{"./assertThisInitialized.js":6,"@babel/runtime/helpers/typeof":20}],18:[function(require,module,exports){
function _setPrototypeOf(o, p) {
  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };

  module.exports["default"] = module.exports, module.exports.__esModule = true;
  return _setPrototypeOf(o, p);
}

module.exports = _setPrototypeOf;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],19:[function(require,module,exports){
var getPrototypeOf = require("./getPrototypeOf.js");

function _superPropBase(object, property) {
  while (!Object.prototype.hasOwnProperty.call(object, property)) {
    object = getPrototypeOf(object);
    if (object === null) break;
  }

  return object;
}

module.exports = _superPropBase;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{"./getPrototypeOf.js":12}],20:[function(require,module,exports){
function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    module.exports = _typeof = function _typeof(obj) {
      return typeof obj;
    };

    module.exports["default"] = module.exports, module.exports.__esModule = true;
  } else {
    module.exports = _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };

    module.exports["default"] = module.exports, module.exports.__esModule = true;
  }

  return _typeof(obj);
}

module.exports = _typeof;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{}],21:[function(require,module,exports){
var getPrototypeOf = require("./getPrototypeOf.js");

var setPrototypeOf = require("./setPrototypeOf.js");

var isNativeFunction = require("./isNativeFunction.js");

var construct = require("./construct.js");

function _wrapNativeSuper(Class) {
  var _cache = typeof Map === "function" ? new Map() : undefined;

  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {
    if (Class === null || !isNativeFunction(Class)) return Class;

    if (typeof Class !== "function") {
      throw new TypeError("Super expression must either be null or a function");
    }

    if (typeof _cache !== "undefined") {
      if (_cache.has(Class)) return _cache.get(Class);

      _cache.set(Class, Wrapper);
    }

    function Wrapper() {
      return construct(Class, arguments, getPrototypeOf(this).constructor);
    }

    Wrapper.prototype = Object.create(Class.prototype, {
      constructor: {
        value: Wrapper,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
    return setPrototypeOf(Wrapper, Class);
  };

  module.exports["default"] = module.exports, module.exports.__esModule = true;
  return _wrapNativeSuper(Class);
}

module.exports = _wrapNativeSuper;
module.exports["default"] = module.exports, module.exports.__esModule = true;
},{"./construct.js":9,"./getPrototypeOf.js":12,"./isNativeFunction.js":15,"./setPrototypeOf.js":18}],22:[function(require,module,exports){
module.exports = require("regenerator-runtime");

},{"regenerator-runtime":24}],23:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],24:[function(require,module,exports){
/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var runtime = (function (exports) {
  "use strict";

  var Op = Object.prototype;
  var hasOwn = Op.hasOwnProperty;
  var undefined; // More compressible than void 0.
  var $Symbol = typeof Symbol === "function" ? Symbol : {};
  var iteratorSymbol = $Symbol.iterator || "@@iterator";
  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";

  function define(obj, key, value) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
    return obj[key];
  }
  try {
    // IE 8 has a broken Object.defineProperty that only works on DOM objects.
    define({}, "");
  } catch (err) {
    define = function(obj, key, value) {
      return obj[key] = value;
    };
  }

  function wrap(innerFn, outerFn, self, tryLocsList) {
    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
    var generator = Object.create(protoGenerator.prototype);
    var context = new Context(tryLocsList || []);

    // The ._invoke method unifies the implementations of the .next,
    // .throw, and .return methods.
    generator._invoke = makeInvokeMethod(innerFn, self, context);

    return generator;
  }
  exports.wrap = wrap;

  // Try/catch helper to minimize deoptimizations. Returns a completion
  // record like context.tryEntries[i].completion. This interface could
  // have been (and was previously) designed to take a closure to be
  // invoked without arguments, but in all the cases we care about we
  // already have an existing method we want to call, so there's no need
  // to create a new function object. We can even get away with assuming
  // the method takes exactly one argument, since that happens to be true
  // in every case, so we don't have to touch the arguments object. The
  // only additional allocation required is the completion record, which
  // has a stable shape and so hopefully should be cheap to allocate.
  function tryCatch(fn, obj, arg) {
    try {
      return { type: "normal", arg: fn.call(obj, arg) };
    } catch (err) {
      return { type: "throw", arg: err };
    }
  }

  var GenStateSuspendedStart = "suspendedStart";
  var GenStateSuspendedYield = "suspendedYield";
  var GenStateExecuting = "executing";
  var GenStateCompleted = "completed";

  // Returning this object from the innerFn has the same effect as
  // breaking out of the dispatch switch statement.
  var ContinueSentinel = {};

  // Dummy constructor functions that we use as the .constructor and
  // .constructor.prototype properties for functions that return Generator
  // objects. For full spec compliance, you may wish to configure your
  // minifier not to mangle the names of these two functions.
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}

  // This is a polyfill for %IteratorPrototype% for environments that
  // don't natively support it.
  var IteratorPrototype = {};
  IteratorPrototype[iteratorSymbol] = function () {
    return this;
  };

  var getProto = Object.getPrototypeOf;
  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  if (NativeIteratorPrototype &&
      NativeIteratorPrototype !== Op &&
      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
    // This environment has a native %IteratorPrototype%; use it instead
    // of the polyfill.
    IteratorPrototype = NativeIteratorPrototype;
  }

  var Gp = GeneratorFunctionPrototype.prototype =
    Generator.prototype = Object.create(IteratorPrototype);
  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;
  GeneratorFunctionPrototype.constructor = GeneratorFunction;
  GeneratorFunction.displayName = define(
    GeneratorFunctionPrototype,
    toStringTagSymbol,
    "GeneratorFunction"
  );

  // Helper for defining the .next, .throw, and .return methods of the
  // Iterator interface in terms of a single ._invoke method.
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function(method) {
      define(prototype, method, function(arg) {
        return this._invoke(method, arg);
      });
    });
  }

  exports.isGeneratorFunction = function(genFun) {
    var ctor = typeof genFun === "function" && genFun.constructor;
    return ctor
      ? ctor === GeneratorFunction ||
        // For the native GeneratorFunction constructor, the best we can
        // do is to check its .name property.
        (ctor.displayName || ctor.name) === "GeneratorFunction"
      : false;
  };

  exports.mark = function(genFun) {
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
    } else {
      genFun.__proto__ = GeneratorFunctionPrototype;
      define(genFun, toStringTagSymbol, "GeneratorFunction");
    }
    genFun.prototype = Object.create(Gp);
    return genFun;
  };

  // Within the body of any async function, `await x` is transformed to
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
  // `hasOwn.call(value, "__await")` to determine if the yielded value is
  // meant to be awaited.
  exports.awrap = function(arg) {
    return { __await: arg };
  };

  function AsyncIterator(generator, PromiseImpl) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);
      if (record.type === "throw") {
        reject(record.arg);
      } else {
        var result = record.arg;
        var value = result.value;
        if (value &&
            typeof value === "object" &&
            hasOwn.call(value, "__await")) {
          return PromiseImpl.resolve(value.__await).then(function(value) {
            invoke("next", value, resolve, reject);
          }, function(err) {
            invoke("throw", err, resolve, reject);
          });
        }

        return PromiseImpl.resolve(value).then(function(unwrapped) {
          // When a yielded Promise is resolved, its final value becomes
          // the .value of the Promise<{value,done}> result for the
          // current iteration.
          result.value = unwrapped;
          resolve(result);
        }, function(error) {
          // If a rejected Promise was yielded, throw the rejection back
          // into the async generator function so it can be handled there.
          return invoke("throw", error, resolve, reject);
        });
      }
    }

    var previousPromise;

    function enqueue(method, arg) {
      function callInvokeWithMethodAndArg() {
        return new PromiseImpl(function(resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      }

      return previousPromise =
        // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : callInvokeWithMethodAndArg();
    }

    // Define the unified helper method that is used to implement .next,
    // .throw, and .return (see defineIteratorMethods).
    this._invoke = enqueue;
  }

  defineIteratorMethods(AsyncIterator.prototype);
  AsyncIterator.prototype[asyncIteratorSymbol] = function () {
    return this;
  };
  exports.AsyncIterator = AsyncIterator;

  // Note that simple async functions are implemented on top of
  // AsyncIterator objects; they just return a Promise for the value of
  // the final result produced by the iterator.
  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {
    if (PromiseImpl === void 0) PromiseImpl = Promise;

    var iter = new AsyncIterator(
      wrap(innerFn, outerFn, self, tryLocsList),
      PromiseImpl
    );

    return exports.isGeneratorFunction(outerFn)
      ? iter // If outerFn is a generator, return the full iterator.
      : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
  };

  function makeInvokeMethod(innerFn, self, context) {
    var state = GenStateSuspendedStart;

    return function invoke(method, arg) {
      if (state === GenStateExecuting) {
        throw new Error("Generator is already running");
      }

      if (state === GenStateCompleted) {
        if (method === "throw") {
          throw arg;
        }

        // Be forgiving, per 25.3.3.3.3 of the spec:
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
        return doneResult();
      }

      context.method = method;
      context.arg = arg;

      while (true) {
        var delegate = context.delegate;
        if (delegate) {
          var delegateResult = maybeInvokeDelegate(delegate, context);
          if (delegateResult) {
            if (delegateResult === ContinueSentinel) continue;
            return delegateResult;
          }
        }

        if (context.method === "next") {
          // Setting context._sent for legacy support of Babel's
          // function.sent implementation.
          context.sent = context._sent = context.arg;

        } else if (context.method === "throw") {
          if (state === GenStateSuspendedStart) {
            state = GenStateCompleted;
            throw context.arg;
          }

          context.dispatchException(context.arg);

        } else if (context.method === "return") {
          context.abrupt("return", context.arg);
        }

        state = GenStateExecuting;

        var record = tryCatch(innerFn, self, context);
        if (record.type === "normal") {
          // If an exception is thrown from innerFn, we leave state ===
          // GenStateExecuting and loop back for another invocation.
          state = context.done
            ? GenStateCompleted
            : GenStateSuspendedYield;

          if (record.arg === ContinueSentinel) {
            continue;
          }

          return {
            value: record.arg,
            done: context.done
          };

        } else if (record.type === "throw") {
          state = GenStateCompleted;
          // Dispatch the exception by looping back around to the
          // context.dispatchException(context.arg) call above.
          context.method = "throw";
          context.arg = record.arg;
        }
      }
    };
  }

  // Call delegate.iterator[context.method](context.arg) and handle the
  // result, either by returning a { value, done } result from the
  // delegate iterator, or by modifying context.method and context.arg,
  // setting context.delegate to null, and returning the ContinueSentinel.
  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];
    if (method === undefined) {
      // A .throw or .return when the delegate iterator has no .throw
      // method always terminates the yield* loop.
      context.delegate = null;

      if (context.method === "throw") {
        // Note: ["return"] must be used for ES3 parsing compatibility.
        if (delegate.iterator["return"]) {
          // If the delegate iterator has a return method, give it a
          // chance to clean up.
          context.method = "return";
          context.arg = undefined;
          maybeInvokeDelegate(delegate, context);

          if (context.method === "throw") {
            // If maybeInvokeDelegate(context) changed context.method from
            // "return" to "throw", let that override the TypeError below.
            return ContinueSentinel;
          }
        }

        context.method = "throw";
        context.arg = new TypeError(
          "The iterator does not provide a 'throw' method");
      }

      return ContinueSentinel;
    }

    var record = tryCatch(method, delegate.iterator, context.arg);

    if (record.type === "throw") {
      context.method = "throw";
      context.arg = record.arg;
      context.delegate = null;
      return ContinueSentinel;
    }

    var info = record.arg;

    if (! info) {
      context.method = "throw";
      context.arg = new TypeError("iterator result is not an object");
      context.delegate = null;
      return ContinueSentinel;
    }

    if (info.done) {
      // Assign the result of the finished delegate to the temporary
      // variable specified by delegate.resultName (see delegateYield).
      context[delegate.resultName] = info.value;

      // Resume execution at the desired location (see delegateYield).
      context.next = delegate.nextLoc;

      // If context.method was "throw" but the delegate handled the
      // exception, let the outer generator proceed normally. If
      // context.method was "next", forget context.arg since it has been
      // "consumed" by the delegate iterator. If context.method was
      // "return", allow the original .return call to continue in the
      // outer generator.
      if (context.method !== "return") {
        context.method = "next";
        context.arg = undefined;
      }

    } else {
      // Re-yield the result returned by the delegate method.
      return info;
    }

    // The delegate iterator is finished, so forget it and continue with
    // the outer generator.
    context.delegate = null;
    return ContinueSentinel;
  }

  // Define Generator.prototype.{next,throw,return} in terms of the
  // unified ._invoke helper method.
  defineIteratorMethods(Gp);

  define(Gp, toStringTagSymbol, "Generator");

  // A Generator should always return itself as the iterator object when the
  // @@iterator function is called on it. Some browsers' implementations of the
  // iterator prototype chain incorrectly implement this, causing the Generator
  // object to not be returned from this call. This ensures that doesn't happen.
  // See https://github.com/facebook/regenerator/issues/274 for more details.
  Gp[iteratorSymbol] = function() {
    return this;
  };

  Gp.toString = function() {
    return "[object Generator]";
  };

  function pushTryEntry(locs) {
    var entry = { tryLoc: locs[0] };

    if (1 in locs) {
      entry.catchLoc = locs[1];
    }

    if (2 in locs) {
      entry.finallyLoc = locs[2];
      entry.afterLoc = locs[3];
    }

    this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal";
    delete record.arg;
    entry.completion = record;
  }

  function Context(tryLocsList) {
    // The root entry object (effectively a try statement without a catch
    // or a finally block) gives us a place to store values thrown from
    // locations where there is no enclosing try statement.
    this.tryEntries = [{ tryLoc: "root" }];
    tryLocsList.forEach(pushTryEntry, this);
    this.reset(true);
  }

  exports.keys = function(object) {
    var keys = [];
    for (var key in object) {
      keys.push(key);
    }
    keys.reverse();

    // Rather than returning an object with a next method, we keep
    // things simple and return the next function itself.
    return function next() {
      while (keys.length) {
        var key = keys.pop();
        if (key in object) {
          next.value = key;
          next.done = false;
          return next;
        }
      }

      // To avoid creating an additional object, we just hang the .value
      // and .done properties off the next function object itself. This
      // also ensures that the minifier will not anonymize the function.
      next.done = true;
      return next;
    };
  };

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) {
        return iteratorMethod.call(iterable);
      }

      if (typeof iterable.next === "function") {
        return iterable;
      }

      if (!isNaN(iterable.length)) {
        var i = -1, next = function next() {
          while (++i < iterable.length) {
            if (hasOwn.call(iterable, i)) {
              next.value = iterable[i];
              next.done = false;
              return next;
            }
          }

          next.value = undefined;
          next.done = true;

          return next;
        };

        return next.next = next;
      }
    }

    // Return an iterator with no values.
    return { next: doneResult };
  }
  exports.values = values;

  function doneResult() {
    return { value: undefined, done: true };
  }

  Context.prototype = {
    constructor: Context,

    reset: function(skipTempReset) {
      this.prev = 0;
      this.next = 0;
      // Resetting context._sent for legacy support of Babel's
      // function.sent implementation.
      this.sent = this._sent = undefined;
      this.done = false;
      this.delegate = null;

      this.method = "next";
      this.arg = undefined;

      this.tryEntries.forEach(resetTryEntry);

      if (!skipTempReset) {
        for (var name in this) {
          // Not sure about the optimal order of these conditions:
          if (name.charAt(0) === "t" &&
              hasOwn.call(this, name) &&
              !isNaN(+name.slice(1))) {
            this[name] = undefined;
          }
        }
      }
    },

    stop: function() {
      this.done = true;

      var rootEntry = this.tryEntries[0];
      var rootRecord = rootEntry.completion;
      if (rootRecord.type === "throw") {
        throw rootRecord.arg;
      }

      return this.rval;
    },

    dispatchException: function(exception) {
      if (this.done) {
        throw exception;
      }

      var context = this;
      function handle(loc, caught) {
        record.type = "throw";
        record.arg = exception;
        context.next = loc;

        if (caught) {
          // If the dispatched exception was caught by a catch block,
          // then let that catch block handle the exception normally.
          context.method = "next";
          context.arg = undefined;
        }

        return !! caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        var record = entry.completion;

        if (entry.tryLoc === "root") {
          // Exception thrown outside of any try block that could handle
          // it, so set the completion value of the entire function to
          // throw the exception.
          return handle("end");
        }

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc");
          var hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            } else if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            }

          } else if (hasFinally) {
            if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else {
            throw new Error("try statement without catch or finally");
          }
        }
      }
    },

    abrupt: function(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev &&
            hasOwn.call(entry, "finallyLoc") &&
            this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      if (finallyEntry &&
          (type === "break" ||
           type === "continue") &&
          finallyEntry.tryLoc <= arg &&
          arg <= finallyEntry.finallyLoc) {
        // Ignore the finally entry if control is not jumping to a
        // location outside the try/catch block.
        finallyEntry = null;
      }

      var record = finallyEntry ? finallyEntry.completion : {};
      record.type = type;
      record.arg = arg;

      if (finallyEntry) {
        this.method = "next";
        this.next = finallyEntry.finallyLoc;
        return ContinueSentinel;
      }

      return this.complete(record);
    },

    complete: function(record, afterLoc) {
      if (record.type === "throw") {
        throw record.arg;
      }

      if (record.type === "break" ||
          record.type === "continue") {
        this.next = record.arg;
      } else if (record.type === "return") {
        this.rval = this.arg = record.arg;
        this.method = "return";
        this.next = "end";
      } else if (record.type === "normal" && afterLoc) {
        this.next = afterLoc;
      }

      return ContinueSentinel;
    },

    finish: function(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) {
          this.complete(entry.completion, entry.afterLoc);
          resetTryEntry(entry);
          return ContinueSentinel;
        }
      }
    },

    "catch": function(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if (record.type === "throw") {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }

      // The context.catch method must only be called with a location
      // argument that corresponds to a known catch block.
      throw new Error("illegal catch attempt");
    },

    delegateYield: function(iterable, resultName, nextLoc) {
      this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      };

      if (this.method === "next") {
        // Deliberately forget the last sent value so that we don't
        // accidentally pass it on to the delegate.
        this.arg = undefined;
      }

      return ContinueSentinel;
    }
  };

  // Regardless of whether this script is executing as a CommonJS module
  // or not, return the runtime object so that we can declare the variable
  // regeneratorRuntime in the outer scope, which allows this module to be
  // injected easily by `bin/regenerator --include-runtime script.js`.
  return exports;

}(
  // If this script is executing as a CommonJS module, use module.exports
  // as the regeneratorRuntime namespace. Otherwise create a new empty
  // object. Either way, the resulting object will be used to initialize
  // the regeneratorRuntime variable at the top of this file.
  typeof module === "object" ? module.exports : {}
));

try {
  regeneratorRuntime = runtime;
} catch (accidentalStrictMode) {
  // This module should not be running in strict mode, so the above
  // assignment should always work unless something is misconfigured. Just
  // in case runtime.js accidentally runs in strict mode, we can escape
  // strict mode using a global Function call. This could conceivably fail
  // if a Content Security Policy forbids using Function, but in that case
  // the proper solution is to fix the accidental strict mode problem. If
  // you've misconfigured your bundler to force strict mode and applied a
  // CSP to forbid Function, and you're not willing to fix either of those
  // problems, please detail your unique predicament in a GitHub issue.
  Function("r", "regeneratorRuntime = r")(runtime);
}

},{}],25:[function(require,module,exports){
(function (setImmediate,clearImmediate){(function (){
var nextTick = require('process/browser.js').nextTick;
var apply = Function.prototype.apply;
var slice = Array.prototype.slice;
var immediateIds = {};
var nextImmediateId = 0;

// DOM APIs, for completeness

exports.setTimeout = function() {
  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);
};
exports.setInterval = function() {
  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);
};
exports.clearTimeout =
exports.clearInterval = function(timeout) { timeout.close(); };

function Timeout(id, clearFn) {
  this._id = id;
  this._clearFn = clearFn;
}
Timeout.prototype.unref = Timeout.prototype.ref = function() {};
Timeout.prototype.close = function() {
  this._clearFn.call(window, this._id);
};

// Does not start the time, just sets up the members needed.
exports.enroll = function(item, msecs) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = msecs;
};

exports.unenroll = function(item) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = -1;
};

exports._unrefActive = exports.active = function(item) {
  clearTimeout(item._idleTimeoutId);

  var msecs = item._idleTimeout;
  if (msecs >= 0) {
    item._idleTimeoutId = setTimeout(function onTimeout() {
      if (item._onTimeout)
        item._onTimeout();
    }, msecs);
  }
};

// That's not how node.js implements it but the exposed api is the same.
exports.setImmediate = typeof setImmediate === "function" ? setImmediate : function(fn) {
  var id = nextImmediateId++;
  var args = arguments.length < 2 ? false : slice.call(arguments, 1);

  immediateIds[id] = true;

  nextTick(function onNextTick() {
    if (immediateIds[id]) {
      // fn.call() is faster so we optimize for the common use-case
      // @see http://jsperf.com/call-apply-segu
      if (args) {
        fn.apply(null, args);
      } else {
        fn.call(null);
      }
      // Prevent ids from leaking
      exports.clearImmediate(id);
    }
  });

  return id;
};

exports.clearImmediate = typeof clearImmediate === "function" ? clearImmediate : function(id) {
  delete immediateIds[id];
};
}).call(this)}).call(this,require("timers").setImmediate,require("timers").clearImmediate)

},{"process/browser.js":23,"timers":25}],26:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AbstractView = /*#__PURE__*/function (_EventTarget) {
  (0, _inherits2["default"])(AbstractView, _EventTarget);

  var _super = _createSuper(AbstractView);

  function AbstractView() {
    var _this;

    (0, _classCallCheck2["default"])(this, AbstractView);
    _this = _super.call(this);
    _this.DOM = {};
    _this.DOM.gameBoard = document.querySelector("game-board");
    _this.DOM.questionPane = document.querySelector("#question-pane");
    _this.DOM.multipleChoice = document.querySelector("#multiple-choice-present");
    _this.DOM.playing_indicator = document.querySelector("#playing");
    _this.DOM.timer = document.querySelector("trivia-timer");
    _this.DOM.menuIndicator = document.querySelector("#menu-indicator");
    _this.DOM.menuArea = document.querySelector("#menu-area");
    _this.DOM.menuLogout = document.querySelector("#menu-logout");
    _this.DOM.playerContainer = document.querySelector("#player-container-left");
    return _this;
  }

  (0, _createClass2["default"])(AbstractView, [{
    key: "startTimer",
    value: function startTimer(update) {
      this.DOM.timer.show(update.time);
    }
  }, {
    key: "updateTimer",
    value: function updateTimer(update) {
      if (this.lastUpdate.model.players.length <= 0) return;
      this.DOM.timer.show();
      this.DOM.timer.set(update.time);

      if (this.lastUpdate.state === 6 || this.lastUpdate.state === 8) {
        var currentName = this.lastUpdate.model.players[0].name;
        var currentPanel = this.DOM.playerContainer.topPlayer();
        currentPanel.setTimer(update.progress);
      }
    }
  }, {
    key: "updateModel",
    value: function updateModel(update) {
      this.fillPlayers(update);
      this.lastUpdate = update;
      this.DOM.multipleChoice.hide();

      switch (update.state) {
        case 0:
          break;

        case 1:
          this.DOM.multipleChoice.hide();
          this.DOM.gameBoard.hide();
          this.DOM.questionPane.show();
          this.DOM.questionPane.setText(update.model.round.question);
          this.DOM.timer.hide();
          break;

        case 2:
          this.DOM.questionPane.hide();
          this.DOM.multipleChoice.show();
          this.DOM.multipleChoice.setMode("show");
          this.DOM.multipleChoice.querySelector(".inner.total").hide();
          this.DOM.multipleChoice.querySelector(".inner.bonus > .amount").text = update.model.round.bonus;

          for (var i = 0; i < 6; i++) {
            this.DOM.multipleChoice.querySelector("[data-index=\"".concat(i, "\"] check-box")).checked = false;
            this.DOM.multipleChoice.setAnswerText(i, update.model.round.answers[i]);
            this.DOM.multipleChoice.querySelector("[data-index=\"".concat(i, "\"] check-box")).locked = false;
          }

          break;

        case 3:
          this.DOM.questionPane.hide();
          this.DOM.multipleChoice.show();
          this.DOM.multipleChoice.setMode("show");

          for (var _i = 0; _i < 6; _i++) {
            this.DOM.multipleChoice.setAnswerText(_i, update.model.round.answers[_i]);
            this.DOM.multipleChoice.querySelector("[data-index=\"".concat(_i, "\"] check-box")).checked = update.model.round.values[_i];
            this.DOM.multipleChoice.querySelector("[data-index=\"".concat(_i, "\"] check-box")).locked = true;
          }

          break;

        case 4:
          this.DOM.gameBoard.show();
          this.fillJeopardyCategories(update);
          this.fillJeopardyCells(update);
          this.DOM.timer.hide();
          break;

        case 5:
          this.DOM.gameBoard.hide();
          this.DOM.questionPane.show();
          this.DOM.questionPane.setText(update.model.round.question);
          this.DOM.timer.hide();
          break;

        case 6:
          this.DOM.gameBoard.hide();
          this.DOM.questionPane.show();
          this.DOM.questionPane.setText(update.model.round.question);
          this.DOM.playerContainer.moveToTop(update.model.round.current_player);
          break;

        case 7:
          this.DOM.gameBoard.hide();
          this.DOM.questionPane.show();
          this.DOM.questionPane.setText(update.model.round.question);
          break;

        case 8:
          this.DOM.gameBoard.hide();
          this.DOM.questionPane.show();
          this.DOM.questionPane.setText(update.model.round.question);
          this.DOM.playerContainer.moveToTop(update.model.round.current_player);
          break;

        case 9:
          this.DOM.gameBoard.hide();
          this.DOM.questionPane.show();
          this.DOM.questionPane.setText(update.model.round.answer);
          this.DOM.timer.hide();
          break;

        case 10:
          this.DOM.gameBoard.hide();
          this.DOM.questionPane.show();
          this.DOM.questionPane.setText("GAME OVER");
          this.DOM.timer.hide();
          break;

        default:
          break;
      }
    }
  }, {
    key: "fillPlayers",
    value: function fillPlayers(update) {
      this.DOM.playerContainer.clear();
      if (update.model.players.length <= 0) return;

      var _iterator = _createForOfIteratorHelper(update.model.players),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var player = _step.value;
          this.DOM.playerContainer.addPlayer(player.name, player.score);

          if (update.model.round && update.model.round.style === 'j') {
            // TODO remove magic string
            if (update.model.round.current_player === player.name) {
              this.DOM.playerContainer.getPlayer(player.name).highlight = true;
              this.DOM.playerContainer.getPlayer(player.name).active = true;
            } else if (update.model.round.spentPlayers.indexOf(player.name) !== -1) {
              this.DOM.playerContainer.getPlayer(player.name).dim = true;
              window.x = this.DOM.playerContainer.getPlayer(player.name);
            }
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }, {
    key: "fillJeopardyCategories",
    value: function fillJeopardyCategories(update) {
      for (var i = 0; i < 6; i++) {
        var category = update.model.round.categories[i];
        this.DOM.gameBoard.setHeader(i, category["text"], category["font-size"], true);
      }
    }
  }, {
    key: "fillJeopardyCells",
    value: function fillJeopardyCells(update) {
      var round = update.model.round;

      for (var c = 0; c < 6; c++) {
        for (var r = 0; r < 5; r++) {
          if (round.spent[c][r]) {
            this.DOM.gameBoard.setCell(r, c, "");
          } else {
            this.DOM.gameBoard.setCell(r, c, round.values[c][r]);
          }
        }
      }
    }
  }]);
  return AbstractView;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(EventTarget));

module.exports = AbstractView;

},{"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/helpers/wrapNativeSuper":21}],27:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _AbstractView2 = _interopRequireDefault(require("./AbstractView.js"));

var _ViewEvent = _interopRequireDefault(require("./ViewEvent.js"));

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ContestantPortalView = /*#__PURE__*/function (_AbstractView) {
  (0, _inherits2["default"])(ContestantPortalView, _AbstractView);

  var _super = _createSuper(ContestantPortalView);

  function ContestantPortalView() {
    var _this;

    (0, _classCallCheck2["default"])(this, ContestantPortalView);
    _this = _super.call(this);
    _this.DOM.buzzButton = document.querySelector("#buzz");
    _this.DOM.selfPanel = document.querySelector("#self-panel");

    _this.DOM.buzzButton.addEventListener("click", function (e) {
      return _this.dispatchEvent(new _ViewEvent["default"]("buzz"));
    });

    _this.DOM.gameBoard.addEventListener("cell-select", function (e) {
      return _this.dispatchEvent(new _ViewEvent["default"]("select", e.detail));
    });

    _this.DOM.multipleChoice.addEventListener("value-update", function (e) {
      return _this.dispatchEvent(new _ViewEvent["default"]("update", e.detail));
    });

    _this.DOM.selfPanel.hideClock();

    return _this;
  }

  (0, _createClass2["default"])(ContestantPortalView, [{
    key: "setName",
    value: function setName(name) {
      this.name = name;
      this.DOM.selfPanel.name = "Score";
      document.title = name;
    }
  }, {
    key: "updateModel",
    value: function updateModel(update) {
      (0, _get2["default"])((0, _getPrototypeOf2["default"])(ContestantPortalView.prototype), "updateModel", this).call(this, update);
      this.DOM.buzzButton.hide();

      var _iterator = _createForOfIteratorHelper(update.model.players),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var player = _step.value;

          if (player.name === this.name) {
            this.DOM.selfPanel.score = player.score;
            break;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      switch (update.state) {
        case 2:
          this.DOM.multipleChoice.setMode("data-enter");

          for (var i = 0; i < 6; i++) {
            this.DOM.multipleChoice.setAnswerText(i, update.model.round.answers[i]);
          }

          break;

        case 3:
          this.DOM.multipleChoice.setMode("data-enter");
          this.DOM.multipleChoice.querySelector(".inner.total").show();
          this.DOM.multipleChoice.querySelector(".inner.total > .amount").text = update.bets[this.name].total;

          if (update.bets[this.name].bonus === "true") {
            this.DOM.multipleChoice.querySelector(".inner.bonus > .amount").text = update.model.round.bonus;
          } else {
            this.DOM.multipleChoice.querySelector(".inner.bonus > .amount").text = 0;
          }

          for (var _i = 0; _i < 6; _i++) {
            var wagerElement = this.DOM.multipleChoice.querySelector("[data-index=\"".concat(_i, "\"] .wager"));
            var value = update.bets[this.name].bets[_i];

            if (value !== "") {
              wagerElement.content = parseInt(value);
            } else {
              wagerElement.content = "";
            }
          }

          break;

        case 7:
          var check = update.model.round.spentPlayers.indexOf(this.name);

          if (update.model.round.spentPlayers.indexOf(this.name) === -1) {
            this.DOM.buzzButton.show();
          }

          break;
      }
    }
  }]);
  return ContestantPortalView;
}(_AbstractView2["default"]);

var _default = ContestantPortalView;
exports["default"] = _default;

},{"./AbstractView.js":26,"./ViewEvent.js":29,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17}],28:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var PortalController = /*#__PURE__*/function () {
  function PortalController(ws, view) {
    var _this = this;

    (0, _classCallCheck2["default"])(this, PortalController);
    this.ws = ws;
    this.view = view;
    this.name = "";
    this.ws.addEventListener('message', function (event) {
      return _this.process(JSON.parse(event.data));
    });
    this.ws.addEventListener('close', function (event) {
      return _this.onClose(event);
    });
    this.view.addEventListener('click', function (event) {
      return _this.send(event.detail);
    });
    this.view.addEventListener('cell-select', function (event) {
      return _this.send(event.detail);
    });
  }
  /**
   * Incoming messages get processed here.
   * @param message
   */


  (0, _createClass2["default"])(PortalController, [{
    key: "process",
    value: function process(message) {
      if (message.action !== "ping" && message.action !== "update_timer") {
        console.log(message);
        window.lastMessage = message;
      }

      switch (message.action) {
        case "connection_established":
          this.name = message.data.name;
          if (this.view.setName) this.view.setName(message.data.name);
          break;

        case "provide_answer":
          this.view.updateAnswer(message.data.answer);
          break;

        case "update_model":
          this.view.updateModel(message.data);
          break;

        case "start_timer":
          this.view.startTimer(message.data);
          break;

        case "update_timer":
          this.view.updateTimer(message.data);
          break;

        case "stop_timer":
          break;
      }
    }
  }, {
    key: "onClose",
    value: function onClose(event) {
      if (this.name === "@HOST") {
        window.location = "host.ejs";
      } else {
        window.location = "contestant_join.ejs";
      }
    }
  }, {
    key: "send",
    value: function send(msg) {
      console.log("send: ".concat(JSON.stringify(msg)));
      this.ws.send(JSON.stringify(msg));
    }
  }]);
  return PortalController;
}();

var _default = PortalController;
exports["default"] = _default;

},{"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/interopRequireDefault":14}],29:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var ViewEvent = /*#__PURE__*/function (_CustomEvent) {
  (0, _inherits2["default"])(ViewEvent, _CustomEvent);

  var _super = _createSuper(ViewEvent);

  function ViewEvent(action) {
    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    (0, _classCallCheck2["default"])(this, ViewEvent);
    return _super.call(this, 'click', {
      detail: {
        action: action,
        data: data
      }
    });
  }

  return ViewEvent;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(CustomEvent));

var _default = ViewEvent;
exports["default"] = _default;

},{"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/helpers/wrapNativeSuper":21}],30:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

function connectWebsocket() {
  var url = window.origin;

  if (url.startsWith("http:")) {
    url = "ws" + url.substr(4) + "/game-service.ws";
  } else {
    url = "wss" + url.substr(5) + "/game-service.ws";
  }

  return new Promise(function (resolve, reject) {
    var socket = new WebSocket(url);
    socket.addEventListener('error', function (event) {
      return reject(event);
    });
    socket.addEventListener('open', function (event) {
      return resolve(socket);
    });
  });
}

var _default = connectWebsocket;
exports["default"] = _default;

},{}],31:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _ContestantPortalView = _interopRequireDefault(require("./ContestantPortalView.js"));

var _PortalController = _interopRequireDefault(require("./PortalController"));

var _connectWebsocket = _interopRequireDefault(require("./connectWebsocket.js"));

var _SetupSizeListener = _interopRequireDefault(require("./modules/SetupSizeListener"));

window.onload = /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
  var start, ws, end, time;
  return _regenerator["default"].wrap(function _callee$(_context) {
    while (1) {
      switch (_context.prev = _context.next) {
        case 0:
          start = new Date();
          (0, _SetupSizeListener["default"])();
          window.view = new _ContestantPortalView["default"]();
          _context.next = 5;
          return (0, _connectWebsocket["default"])();

        case 5:
          ws = _context.sent;
          new _PortalController["default"](ws, window.view);
          end = new Date();
          time = end - start;
          console.log("Load Time " + time + " ms");

        case 10:
        case "end":
          return _context.stop();
      }
    }
  }, _callee);
}));

},{"./ContestantPortalView.js":27,"./PortalController":28,"./connectWebsocket.js":30,"./modules/SetupSizeListener":32,"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/regenerator":22}],32:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

function setupSizeListener() {
  function reportWindowSize() {
    var pageContainer = document.querySelector("#page-container");
    var ratio = window.innerWidth / window.innerHeight;

    if (ratio >= 16 / 9) {
      pageContainer.classList.add("aspect-fit");
      pageContainer.classList.remove("shrink-horz");
    } else {
      pageContainer.classList.remove("aspect-fit");
      pageContainer.classList.add("shrink-horz");
    }
  }

  window.addEventListener("resize", function (e) {
    return reportWindowSize();
  });
  reportWindowSize();
}

var _default = setupSizeListener;
exports["default"] = _default;

},{}],33:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _typeof2 = _interopRequireDefault(require("@babel/runtime/helpers/typeof"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var ValueUpdate = /*#__PURE__*/function (_CustomEvent) {
  (0, _inherits2["default"])(ValueUpdate, _CustomEvent);

  var _super = _createSuper(ValueUpdate);

  function ValueUpdate(value) {
    (0, _classCallCheck2["default"])(this, ValueUpdate);
    return _super.call(this, 'value-update', {
      detail: {
        value: value
      }
    });
  }

  return ValueUpdate;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(CustomEvent));

var CheckBox = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(CheckBox, _NidgetElement);

  var _super2 = _createSuper(CheckBox);

  function CheckBox() {
    (0, _classCallCheck2["default"])(this, CheckBox);
    return _super2.apply(this, arguments);
  }

  (0, _createClass2["default"])(CheckBox, [{
    key: "connectedCallback",
    value: function () {
      var _connectedCallback = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        var _this = this;

        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(CheckBox.prototype), "connectedCallback", this).call(this);

              case 2:
                this.addEventListener("click", function () {
                  console.log((0, _typeof2["default"])(_this.locked));
                  if (_this.locked) return;

                  _this.toggle();
                });

              case 3:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function connectedCallback() {
        return _connectedCallback.apply(this, arguments);
      }

      return connectedCallback;
    }()
  }, {
    key: "toggle",
    value: function toggle() {
      var dispatch = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      if (this.checked === 'true') this.setChecked('false', dispatch);else this.setChecked('true', dispatch);
    }
  }, {
    key: "checked",
    get: function get() {
      if (!this.hasAttribute(CheckBox.CHECKED_ATTRIBUTE)) {
        this.setAttribute(CheckBox.CHECKED_ATTRIBUTE, 'false');
      }

      return this.getAttribute(CheckBox.CHECKED_ATTRIBUTE);
    },
    set: function set(value) {
      if (value === this.checked) return;
      this.setAttribute(CheckBox.CHECKED_ATTRIBUTE, value);
      this.dispatchEvent(new ValueUpdate(value));
    }
  }, {
    key: "setChecked",
    value: function setChecked(value) {
      var dispatch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      if (value === this.checked) return;
      this.setAttribute(CheckBox.CHECKED_ATTRIBUTE, value);
      if (dispatch) this.dispatchEvent(new ValueUpdate(value));
    }
    /**
     * Set the locked attribute.
     * If true prevents changing value.
     * @param value
     */

  }, {
    key: "locked",
    get:
    /**
     * Retrieve the locked attribute.
     */
    function get() {
      return this.getAttribute(CheckBox.LOCKED_ATTRIBUTE) === "true";
    },
    set: function set(value) {
      this.setAttribute(CheckBox.LOCKED_ATTRIBUTE, value);
    }
  }]);
  return CheckBox;
}(NidgetElement);

CheckBox.CHECKED_ATTRIBUTE = "checked";
CheckBox.LOCKED_ATTRIBUTE = "locked";
window.customElements.define('check-box', CheckBox);
module.exports = CheckBox;

},{"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/helpers/typeof":20,"@babel/runtime/helpers/wrapNativeSuper":21,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],34:[function(require,module,exports){
"use strict";
/** View-Controller for the HTML game board element
    This is the classical "Jeopardy" type board
    This is model agnostic, see EditorPane.js for model methods
    generates the following events:
        cell-select (row, col): when a user clicks a cell
        header-update (value, col, fontsize) : when the header text changes (and blurs)
 **/

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var CellSelectEvent = /*#__PURE__*/function (_CustomEvent) {
  (0, _inherits2["default"])(CellSelectEvent, _CustomEvent);

  var _super = _createSuper(CellSelectEvent);

  function CellSelectEvent(row, col) {
    (0, _classCallCheck2["default"])(this, CellSelectEvent);
    return _super.call(this, 'cell-select', {
      detail: {
        row: row,
        col: col
      }
    });
  }

  return CellSelectEvent;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(CustomEvent));

var HeaderUpdateEvent = /*#__PURE__*/function (_CustomEvent2) {
  (0, _inherits2["default"])(HeaderUpdateEvent, _CustomEvent2);

  var _super2 = _createSuper(HeaderUpdateEvent);

  function HeaderUpdateEvent(col, value, fontSize) {
    (0, _classCallCheck2["default"])(this, HeaderUpdateEvent);
    return _super2.call(this, 'header-update', {
      detail: {
        value: value,
        col: col,
        fontSize: fontSize
      }
    });
  }

  return HeaderUpdateEvent;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(CustomEvent));

var GameBoard = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(GameBoard, _NidgetElement);

  var _super3 = _createSuper(GameBoard);

  function GameBoard() {
    (0, _classCallCheck2["default"])(this, GameBoard);
    return _super3.call(this, "game-board-template");
  }

  (0, _createClass2["default"])(GameBoard, [{
    key: "ready",
    value: function () {
      var _ready = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        var _this = this;

        var _iterator, _step, _loop2, _loop, col;

        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(GameBoard.prototype), "ready", this).call(this);

              case 2:
                _iterator = _createForOfIteratorHelper(this.querySelectorAll(".text-buffer"));

                try {
                  _loop2 = function _loop2() {
                    var element = _step.value;
                    var value = element.querySelector(".value");
                    element.addEventListener("click", function (e) {
                      if (value.innerHTML === "") value.innerHTML = " "; // makes the cursor show up when focused

                      value.focus();
                    });
                  };

                  for (_iterator.s(); !(_step = _iterator.n()).done;) {
                    _loop2();
                  }
                } catch (err) {
                  _iterator.e(err);
                } finally {
                  _iterator.f();
                }

                _loop = function _loop(col) {
                  _this.getHeader(col).addEventListener("input", function (event) {
                    event.target.fitText.notify();
                  });

                  _this.getHeader(col).addEventListener("blur", function (event) {
                    event.target.innerHTML = event.target.text.trim();
                    event.target.fitText.notify(function (fontSize) {
                      _this.dispatchEvent(new HeaderUpdateEvent(col, _this.getHeader(col).text, fontSize));
                    });
                  });

                  var _loop3 = function _loop3(row) {
                    _this.getCell(row, col).addEventListener("click", function () {
                      _this.dispatchEvent(new CellSelectEvent(row, col));
                    });
                  };

                  for (var row = 0; row < 5; row++) {
                    _loop3(row);
                  }
                };

                for (col = 0; col < 6; col++) {
                  _loop(col);
                }

              case 6:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function ready() {
        return _ready.apply(this, arguments);
      }

      return ready;
    }()
    /**
     * Set the category text.
     * @param index The column to set
     * @param value The text to set it to.
     * @param fontSize
     * @param lock turn off content-editable, default false (on).
     */

  }, {
    key: "setHeader",
    value: function setHeader(index, value, fontSize) {
      var lock = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
      var element = this.getHeader(index);
      element.text = value;
      element.style.fontSize = fontSize;

      if (lock) {
        element.setAttribute("contentEditable", "false");
      }
    }
    /**
     * Retrieve the header html element
     * @param index
     * @param value
     */

  }, {
    key: "getHeader",
    value: function getHeader(index) {
      if (typeof index !== "number" || index < 0 || index > 6) throw new Error("Invalid index: " + index);
      var selector = "[data-row='h'][data-col='".concat(index, "'] .value");
      return this.querySelector(selector);
    }
    /**
     * Set the value of a non-category cell.
     * @param row
     * @param col
     * @param value
     */

  }, {
    key: "setCell",
    value: function setCell(row, col) {
      var value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "";
      this.getCell(row, col).textContent = value;
    }
  }, {
    key: "getCell",
    value: function getCell(row, col) {
      var selector = "[data-row=\"".concat(row, "\"][data-col=\"").concat(col, "\"] .value");
      return this.querySelector(selector);
    }
  }, {
    key: "setComplete",
    value: function setComplete(row, col, value) {
      if (typeof row !== "number" || row < 0 || row > 6) throw new Error("Invalid row: " + row);
      if (typeof col !== "number" || col < 0 || col > 5) throw new Error("Invalid col: " + col);
      this.getCell(row, col).setAttribute("data-complete", value);
    }
  }]);
  return GameBoard;
}(NidgetElement);

window.customElements.define('game-board', GameBoard);
module.exports = GameBoard;

},{"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/helpers/wrapNativeSuper":21,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],35:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var MenuContainer = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(MenuContainer, _NidgetElement);

  var _super = _createSuper(MenuContainer);

  function MenuContainer(props) {
    (0, _classCallCheck2["default"])(this, MenuContainer);
    return _super.call(this, "menu-container-template");
  }

  (0, _createClass2["default"])(MenuContainer, [{
    key: "ready",
    value: function () {
      var _ready = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        var _this = this;

        var _iterator, _step, _loop;

        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(MenuContainer.prototype), "ready", this).call(this);

              case 2:
                this.querySelector("#menu-icon").setAttribute("src", this.getAttribute("image-src"));
                _iterator = _createForOfIteratorHelper(this.outerSelectorAll("menu-item"));

                try {
                  _loop = function _loop() {
                    var item = _step.value;
                    item.detach();

                    _this.menuArea.append(item);

                    item.addEventListener("click", function (event) {
                      _this.dispatchEvent(new CustomEvent(item.getAttribute("event-name"), {
                        bubbles: true,
                        composed: true
                      }));
                    });
                  };

                  for (_iterator.s(); !(_step = _iterator.n()).done;) {
                    _loop();
                  }
                } catch (err) {
                  _iterator.e(err);
                } finally {
                  _iterator.f();
                }

                this.positionMenu();
                this.menuButton.addEventListener("click", function () {
                  return _this.toggleMenu();
                });
                this.menuArea.addEventListener("mouseleave", function () {
                  return _this.mouseLeave();
                });
                this.menuButton.addEventListener("mouseleave", function () {
                  return _this.mouseLeave();
                });
                this.menuArea.addEventListener("mouseenter", function () {
                  return _this.mouseEnter();
                });
                this.menuButton.addEventListener("mouseenter", function () {
                  return _this.mouseEnter();
                });

              case 11:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function ready() {
        return _ready.apply(this, arguments);
      }

      return ready;
    }()
  }, {
    key: "init",
    value: function init(menuSelector) {
      var _this2 = this;

      document.querySelectorAll("[data-autoclose='true']").forEach(function (ele) {
        ele.addEventListener("click", function () {
          return _this2.close();
        });
      });
      document.querySelectorAll(".sub-menu").forEach(function (ele) {
        ele.querySelector(".menu-label").addEventListener("click", function () {
          _this2.toggleMenu(ele);
        });
      });
      return this;
    }
  }, {
    key: "close",
    value: function close() {
      this.menuArea.classList.add("hidden");
      document.querySelectorAll(".sub-menu > .menu-area").forEach(function (ele) {
        ele.classList.add("hidden");
      });
    }
  }, {
    key: "open",
    value: function open() {
      this.menuArea.classList.remove("hidden");
      this.positionMenu();
    }
  }, {
    key: "mouseLeave",
    value: function mouseLeave() {
      var _this3 = this;

      if (this.timeout) return;
      this.timeout = setTimeout(function () {
        _this3.close();

        _this3.timeout = null;
      }, 500);
    }
  }, {
    key: "mouseEnter",
    value: function mouseEnter() {
      if (!this.timeout) return;
      clearTimeout(this.timeout);
      this.timeout = null;
    }
  }, {
    key: "showMenu",
    value: function showMenu() {
      this.menuArea.classList.remove("hidden");
      this.positionMenu();
    }
  }, {
    key: "hideMenu",
    value: function hideMenu() {
      this.menuArea.classList.add("hidden");
    }
  }, {
    key: "isMenuHidden",
    value: function isMenuHidden() {
      return this.menuArea.classList.contains("hidden");
    }
  }, {
    key: "toggleMenu",
    value: function toggleMenu() {
      if (this.isMenuHidden()) this.showMenu();else this.hideMenu();
    }
  }, {
    key: "positionMenu",
    value: function positionMenu() {
      var left = this.menuButton.getBoundingClientRect().left;
      var bWidth = this.menuButton.getBoundingClientRect().width;
      var mWidth = this.menuArea.getBoundingClientRect().width;

      if (left + bWidth + mWidth + 2 > window.innerWidth) {
        this.setMenuLeft();
      } else {
        this.setMenuRight();
      }
    }
  }, {
    key: "setMenuLeft",
    value: function setMenuLeft() {
      var left = this.menuButton.offsetLeft;
      var width = this.menuArea.offsetWidth;
      this.menuArea.style.left = left - width - 2 + "px";
    }
  }, {
    key: "setMenuRight",
    value: function setMenuRight() {
      var left = this.menuButton.offsetLeft;
      var width = this.menuButton.offsetWidth;
      this.menuArea.style.left = left + width + 2 + "px";
    }
  }, {
    key: "menuButton",
    get: function get() {
      return this.querySelector("#menu-icon");
    }
  }, {
    key: "menuArea",
    get: function get() {
      return this.querySelector("#outer");
    }
  }]);
  return MenuContainer;
}(NidgetElement);

var MenuItem = /*#__PURE__*/function (_NidgetElement2) {
  (0, _inherits2["default"])(MenuItem, _NidgetElement2);

  var _super2 = _createSuper(MenuItem);

  function MenuItem() {
    (0, _classCallCheck2["default"])(this, MenuItem);
    return _super2.call(this);
  }

  (0, _createClass2["default"])(MenuItem, [{
    key: "ready",
    value: function () {
      var _ready2 = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2() {
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(MenuItem.prototype), "ready", this).call(this);

              case 2:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function ready() {
        return _ready2.apply(this, arguments);
      }

      return ready;
    }()
  }]);
  return MenuItem;
}(NidgetElement);

window.customElements.define('menu-item', MenuItem);
window.customElements.define('menu-container', MenuContainer);
module.exports = MenuContainer;

},{"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],36:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

require("./CheckBox.js");

var ValueUpdate = /*#__PURE__*/function (_CustomEvent) {
  (0, _inherits2["default"])(ValueUpdate, _CustomEvent);

  var _super = _createSuper(ValueUpdate);

  function ValueUpdate(index, value, checked) {
    (0, _classCallCheck2["default"])(this, ValueUpdate);
    return _super.call(this, 'value-update', {
      detail: {
        index: index,
        value: value,
        checked: checked
      }
    });
  }

  return ValueUpdate;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(CustomEvent));

var MultipleChoicePresent = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(MultipleChoicePresent, _NidgetElement);

  var _super2 = _createSuper(MultipleChoicePresent);

  function MultipleChoicePresent() {
    var _this;

    (0, _classCallCheck2["default"])(this, MultipleChoicePresent);
    _this = _super2.call(this, "multiple-choice-present-template");
    _this.timeouts = [];
    return _this;
  }

  (0, _createClass2["default"])(MultipleChoicePresent, [{
    key: "setTimeout",
    value: function (_setTimeout) {
      function setTimeout(_x, _x2) {
        return _setTimeout.apply(this, arguments);
      }

      setTimeout.toString = function () {
        return _setTimeout.toString();
      };

      return setTimeout;
    }(function (index, value) {
      var _this2 = this;

      if (this.timeouts[index]) clearTimeout(this.timeouts[index]);
      this.timeouts[index] = setTimeout(function () {
        var event = new ValueUpdate(index, value, true);

        _this2.dispatchEvent(event);

        _this2.timeouts[index] = undefined;
      }, 300);
    })
  }, {
    key: "ready",
    value: function () {
      var _ready = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        var _this3 = this;

        var _iterator, _step, _loop, _iterator2, _step2, _loop2;

        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(MultipleChoicePresent.prototype), "ready", this).call(this);

              case 2:
                _iterator = _createForOfIteratorHelper(this.querySelectorAll("check-box"));

                try {
                  _loop = function _loop() {
                    var element = _step.value;
                    element.addEventListener("value-update", function (event) {
                      var index = element.parentElement.getAttribute("data-index");
                      var checked = event.detail.value === "true";
                      var value = element.parentElement.querySelector(".wager").content;
                      element.parentElement.querySelector(".wager").disabled = !checked;

                      _this3.dispatchEvent(new ValueUpdate(index, parseInt(value), checked));
                    });
                  };

                  for (_iterator.s(); !(_step = _iterator.n()).done;) {
                    _loop();
                  }
                } catch (err) {
                  _iterator.e(err);
                } finally {
                  _iterator.f();
                }

                _iterator2 = _createForOfIteratorHelper(this.querySelectorAll(".wager"));

                try {
                  _loop2 = function _loop2() {
                    var element = _step2.value;
                    element.addEventListener("click", function (event) {
                      element.content = "";
                    });
                    element.addEventListener("text-update", function (event) {
                      var index = element.parentElement.getAttribute("data-index");
                      var value = event.detail.content;

                      _this3.dispatchEvent(new ValueUpdate(index, parseInt(value), true));
                    });
                  };

                  for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                    _loop2();
                  }
                } catch (err) {
                  _iterator2.e(err);
                } finally {
                  _iterator2.f();
                }

              case 6:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function ready() {
        return _ready.apply(this, arguments);
      }

      return ready;
    }()
  }, {
    key: "setMode",
    value: function setMode(mode) {
      switch (mode) {
        case "show":
          this.classList.add("show-mode");
          break;

        case "data-enter":
        default:
          this.classList.remove("show-mode");
          break;
      }
    }
  }, {
    key: "setAnswerText",
    value: function setAnswerText(index, text) {
      this.querySelector(".inner[data-index=\"".concat(index, "\"] .answer")).text = text;
    }
  }, {
    key: "setChecked",
    value: function setChecked(index, value) {
      this.querySelector(".inner[data-index=\"".concat(index, "\"] check-box")).checked = value;
    }
  }]);
  return MultipleChoicePresent;
}(NidgetElement);

window.customElements.define('multiple-choice-present', MultipleChoicePresent);
module.exports = MultipleChoicePresent;

},{"./CheckBox.js":33,"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/helpers/wrapNativeSuper":21,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],37:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var NidgetButton = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(NidgetButton, _NidgetElement);

  var _super = _createSuper(NidgetButton);

  function NidgetButton() {
    (0, _classCallCheck2["default"])(this, NidgetButton);
    return _super.call(this, "nidget-button-template");
  }

  (0, _createClass2["default"])(NidgetButton, [{
    key: "ready",
    value: function () {
      var _ready = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(NidgetButton.prototype), "ready", this).call(this);

              case 2:
                this.DOM.text.innerHTML = this.innerHTML;
                this.innerHTML = "";

              case 4:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function ready() {
        return _ready.apply(this, arguments);
      }

      return ready;
    }()
  }, {
    key: "disable",
    value: function disable() {
      this.classList.add("disabled");
    }
  }, {
    key: "enable",
    value: function enable() {
      this.classList.remove("disabled");
    }
  }]);
  return NidgetButton;
}(NidgetElement);

window.customElements.define('nidget-button', NidgetButton);
module.exports = NidgetButton;

},{"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],38:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _PlayerPanel = _interopRequireDefault(require("./PlayerPanel.js"));

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var PlayerContainer = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(PlayerContainer, _NidgetElement);

  var _super = _createSuper(PlayerContainer);

  function PlayerContainer() {
    var _this;

    var templateId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "player-container-template";
    (0, _classCallCheck2["default"])(this, PlayerContainer);
    _this = _super.call(this, templateId);
    _this.extraPlayersHidden = true;
    return _this;
  }

  (0, _createClass2["default"])(PlayerContainer, [{
    key: "ready",
    value: function () {
      var _ready = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        var _this2 = this;

        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(PlayerContainer.prototype), "ready", this).call(this);

              case 2:
                document.body.addEventListener("click", function (event) {
                  if (_this2.extraPlayersHidden) return;

                  _this2.querySelector(".outer").classList.add("hide-extra");

                  _this2.querySelector("#expand-button .text").innerHTML = "&#9654;";
                  _this2.extraPlayersHidden = true;
                });
                this.querySelector("#expand-button").addEventListener("click", function (event) {
                  if (_this2.extraPlayersHidden) {
                    _this2.querySelector(".outer").classList.remove("hide-extra");

                    _this2.querySelector("#expand-button .text").innerHTML = "&#9664;";
                    _this2.extraPlayersHidden = false;
                    event.stopPropagation();
                  }
                });

              case 4:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function ready() {
        return _ready.apply(this, arguments);
      }

      return ready;
    }()
  }, {
    key: "addPlayer",
    value: function addPlayer(name) {
      var score = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var outer = this.querySelector(".outer");
      var expandButton = this.querySelector("#expand-button");
      var playerPanel = document.createElement("player-panel");
      playerPanel.name = name;
      playerPanel.score = score;
      this.addPlayerPanel(playerPanel);
      window.lastPanel = playerPanel;
      if (this.size > 6) expandButton.show();
      return playerPanel;
    }
  }, {
    key: "addInner",
    value: function addInner() {
      var outer = this.querySelector(".outer");
      var nextIndex = this.querySelectorAll(".inner").length;
      var element = document.createElement("nidget-element");
      element.classList.add("inner");
      element.classList.add("extra");
      element.setAttribute("style", "--index: ".concat(nextIndex));
      element.setAttribute("data-index", nextIndex);
      outer.append(element);
      return element;
    }
  }, {
    key: "getInner",
    value: function getInner(index) {
      while (this.querySelectorAll(".inner").length <= index) {
        this.addInner();
      }

      var selector = ".inner[data-index='".concat(index, "']");
      var element = this.querySelector(".inner[data-index='".concat(index, "']"));
      return element;
    }
  }, {
    key: "addPlayerPanel",
    value: function addPlayerPanel(element) {
      var innerIndex = Math.trunc(this.size / 6);
      var innerElement = this.getInner(innerIndex);
      element.setAttribute("style", "--index: ".concat(this.size % 6));
      innerElement.append(element);
    }
  }, {
    key: "size",
    get: function get() {
      return this.querySelectorAll("player-panel").length;
    }
  }, {
    key: "topPlayer",
    value: function topPlayer() {
      var currentInner = this.querySelector(".inner.first");
      return currentInner.querySelector("player-panel");
    }
  }, {
    key: "getPlayer",
    value: function getPlayer(name) {
      var _iterator = _createForOfIteratorHelper(this.querySelectorAll("player-panel")),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var panel = _step.value;
          if (panel.name === name) return panel;
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      return null;
    }
  }, {
    key: "moveToTop",
    value: function moveToTop(name) {
      var components = [];
      if (!this.getPlayer(name)) return;
      components.push(this.getPlayer(name));
      this.getPlayer(name).detach();

      var _iterator2 = _createForOfIteratorHelper(this.querySelectorAll("player-panel")),
          _step2;

      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var element = _step2.value;
          components.push(element);
          element.detach();
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }

      for (var _i = 0, _components = components; _i < _components.length; _i++) {
        var component = _components[_i];
        this.addPlayerPanel(component);
      }

      return components[0];
    }
  }, {
    key: "clear",
    value: function clear() {
      var _iterator3 = _createForOfIteratorHelper(this.querySelectorAll(".extra")),
          _step3;

      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var inner = _step3.value;
          inner.detach();
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }

      this.querySelector(".inner").textContent = "";
    }
  }]);
  return PlayerContainer;
}(NidgetElement);

window.customElements.define('player-container', PlayerContainer);
module.exports = PlayerContainer;

},{"./PlayerPanel.js":39,"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],39:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

require("./PlayerPanel.js");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var PlayerPanel = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(PlayerPanel, _NidgetElement);

  var _super = _createSuper(PlayerPanel);

  function PlayerPanel() {
    var templateId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "player-panel-template";
    (0, _classCallCheck2["default"])(this, PlayerPanel);
    return _super.call(this, templateId);
  }

  (0, _createClass2["default"])(PlayerPanel, [{
    key: "ready",
    value: function () {
      var _ready = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(PlayerPanel.prototype), "ready", this).call(this);

              case 2:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function ready() {
        return _ready.apply(this, arguments);
      }

      return ready;
    }()
  }, {
    key: "name",
    get: function get() {
      return this.querySelector("#name").innerHTML;
    },
    set: function set(value) {
      this.querySelector("#name").innerHTML = value;
    }
  }, {
    key: "score",
    get: function get() {
      return this.querySelector("#score").innerHTML;
    },
    set: function set(value) {
      this.querySelector("#score").innerHTML = value;
    }
  }, {
    key: "dim",
    set: function set(value) {
      if (value) this.querySelector(".outer").classList.add("dim");else this.querySelector(".outer").classList.remove("dim");
    }
  }, {
    key: "highlight",
    set: function set(value) {
      if (value) this.querySelector(".outer").classList.add("highlight");else this.querySelector(".outer").classList.remove("highlight");
    }
  }, {
    key: "active",
    set: function set(value) {
      if (value) this.querySelector("#buzz-light").classList.add("active");else this.querySelector("#buzz-light").classList.remove("active");
    }
  }, {
    key: "hideClock",
    value: function hideClock() {
      this.DOM.clock.classList.add("hidden");
    }
  }, {
    key: "buzz",
    value: function buzz() {
      this.querySelector("#buzz-light").classList.add("sweep-right");
    }
  }, {
    key: "clear",
    value: function clear() {
      this.querySelector("#buzz-light").classList.remove("sweep-right");
      this.querySelector("#name").classList.remove("active");
      this.querySelector("#score").classList.remove("active");
      this.querySelectorAll(".clock-tick").forEach(function (e) {
        return e.classList.remove("spent");
      });
    }
  }, {
    key: "setTimer",
    value: function setTimer(percent) {
      if (percent <= 80) this.querySelector(".clock-tick[data-index='4']").classList.add("spent");
      if (percent <= 60) this.querySelector(".clock-tick[data-index='3']").classList.add("spent");
      if (percent <= 40) this.querySelector(".clock-tick[data-index='2']").classList.add("spent");
      if (percent <= 20) this.querySelector(".clock-tick[data-index='1']").classList.add("spent");
      if (percent <= 0) this.querySelector(".clock-tick[data-index='0']").classList.add("spent");
    }
  }]);
  return PlayerPanel;
}(NidgetElement);

window.customElements.define('player-panel', PlayerPanel);
module.exports = PlayerPanel;

},{"./PlayerPanel.js":39,"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],40:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _wrapNativeSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var TextUpdate = /*#__PURE__*/function (_CustomEvent) {
  (0, _inherits2["default"])(TextUpdate, _CustomEvent);

  var _super = _createSuper(TextUpdate);

  function TextUpdate(text) {
    (0, _classCallCheck2["default"])(this, TextUpdate);
    return _super.call(this, 'text-update', {
      detail: {
        text: text
      }
    });
  }

  return TextUpdate;
}( /*#__PURE__*/(0, _wrapNativeSuper2["default"])(CustomEvent));

var QuestionPane = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(QuestionPane, _NidgetElement);

  var _super2 = _createSuper(QuestionPane);

  function QuestionPane() {
    (0, _classCallCheck2["default"])(this, QuestionPane);
    return _super2.call(this, "question-pane-template");
  }

  (0, _createClass2["default"])(QuestionPane, [{
    key: "ready",
    value: function () {
      var _ready = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2() {
        var _this = this;

        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(QuestionPane.prototype), "ready", this).call(this);

              case 2:
                this.addEventListener("click", function () {
                  return _this.querySelector(".text-contents").focus();
                });
                this.querySelector("#text-contents").addEventListener("blur", /*#__PURE__*/(0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
                  var text;
                  return _regenerator["default"].wrap(function _callee$(_context) {
                    while (1) {
                      switch (_context.prev = _context.next) {
                        case 0:
                          text = _this.querySelector(".text-contents").text;

                          _this.dispatchEvent(new TextUpdate(text.trim()));

                        case 2:
                        case "end":
                          return _context.stop();
                      }
                    }
                  }, _callee);
                })));

              case 4:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function ready() {
        return _ready.apply(this, arguments);
      }

      return ready;
    }()
  }, {
    key: "clear",
    value: function clear() {
      this.querySelector(".text-contents").text = "";
    }
  }, {
    key: "setText",
    value: function setText(text) {
      this.querySelector(".text-contents").text = text;
    }
  }]);
  return QuestionPane;
}(NidgetElement);

window.customElements.define('question-pane', QuestionPane);
module.exports = QuestionPane;

},{"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/helpers/wrapNativeSuper":21,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],41:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var TextInput = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(TextInput, _NidgetElement);

  var _super = _createSuper(TextInput);

  function TextInput() {
    (0, _classCallCheck2["default"])(this, TextInput);
    return _super.call(this, "text-input-template");
  }

  (0, _createClass2["default"])(TextInput, [{
    key: "connectedCallback",
    value: function () {
      var _connectedCallback = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
        return _regenerator["default"].wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                this.sourceInnerHTML = this.innerHTML;
                _context.next = 3;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(TextInput.prototype), "connectedCallback", this).call(this);

              case 3:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));

      function connectedCallback() {
        return _connectedCallback.apply(this, arguments);
      }

      return connectedCallback;
    }()
  }, {
    key: "ready",
    value: function () {
      var _ready = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2() {
        var _this$getAttribute,
            _this = this;

        var hint;
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.next = 2;
                return (0, _get2["default"])((0, _getPrototypeOf2["default"])(TextInput.prototype), "ready", this).call(this);

              case 2:
                this.filter = (_this$getAttribute = this.getAttribute(TextInput.FILTER)) !== null && _this$getAttribute !== void 0 ? _this$getAttribute : ".*";
                hint = this.getAttribute(TextInput.HINT_ATTRIBUTE);
                this.DOM['hint'].innerHTML = hint;
                this.content = this.sourceInnerHTML;
                this.addEventListener("focus", function () {
                  _this.DOM['content'].focus();
                });
                this.DOM['content'].addEventListener("click", function () {
                  _this.DOM['hint'].innerHTML = "";
                });
                this.DOM['content'].addEventListener("blur", function () {
                  if (_this.DOM['content'].innerHTML.trim() === "") {
                    _this.DOM['hint'].innerHTML = hint;
                  }
                });
                this.DOM['content'].addEventListener("keypress", function (event) {
                  return _this.onKeypress(event);
                });
                this.DOM['content'].addEventListener("input", function (event) {
                  return _this.onInput(event);
                });

              case 11:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));

      function ready() {
        return _ready.apply(this, arguments);
      }

      return ready;
    }()
  }, {
    key: "content",
    get: function get() {
      var string = this.DOM['content'].innerHTML;
      return string.replaceAll("&nbsp;", " ");
    },
    set: function set(value) {
      return this.DOM['content'].text = value;
    }
  }, {
    key: "setCaret",
    value: function setCaret(index) {
      var range = document.createRange();
      var sel = window.getSelection();
      range.setStart(this.DOM['content'].childNodes[0], index);
      range.collapse(true);
      sel.removeAllRanges();
      sel.addRange(range);
    }
  }, {
    key: "onInput",
    value: function onInput(event) {
      if (this.filter === "") return;
      var check = this.content.trim();
      var r = check.match("^" + this.filter + "$");

      if (!check.match("^" + this.filter + "$")) {
        this.content = this.prevContent;
        this.setCaret(this.prevCaret);
        event.stopPropagation();
        event.preventDefault();
      } else {
        this.dispatchEvent(new CustomEvent("text-update", {
          bubbles: true,
          composed: true,
          detail: {
            content: this.content
          }
        }));
      }
    }
  }, {
    key: "onKeypress",
    value: function onKeypress(event) {
      if (event.which === 13) {
        event.stopPropagation();
        event.preventDefault();
        this.dispatchEvent(new CustomEvent("text-enter", {
          bubbles: true,
          composed: true,
          detail: {
            content: this.content
          }
        }));
      }

      this.prevContent = this.content;
      this.prevCaret = this.shadowRoot.getSelection().anchorOffset;
    }
  }]);
  return TextInput;
}(NidgetElement);

TextInput.FILTER = "filter";
TextInput.HINT_ATTRIBUTE = "hint";
window.customElements.define('text-input', TextInput);
module.exports = TextInput;

},{"@babel/runtime/helpers/asyncToGenerator":7,"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@babel/runtime/regenerator":22,"@thaerious/nidget":5}],42:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2["default"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2["default"])(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var NidgetElement = require("@thaerious/nidget").NidgetElement;

var TriviaTimer = /*#__PURE__*/function (_NidgetElement) {
  (0, _inherits2["default"])(TriviaTimer, _NidgetElement);

  var _super = _createSuper(TriviaTimer);

  function TriviaTimer() {
    (0, _classCallCheck2["default"])(this, TriviaTimer);
    return _super.call(this, "trivia-timer-template");
  }

  (0, _createClass2["default"])(TriviaTimer, [{
    key: "start",
    value: function start(value) {
      var _this = this;

      if (value) this.set(value);
      this.timeout = setTimeout(function () {
        return _this.step();
      }, 500);
      this.running = true;
    }
  }, {
    key: "stop",
    value: function stop() {
      if (this.timeout) {
        this.running = false;
        clearTimeout();
      }
    }
  }, {
    key: "show",
    value: function show(value) {
      this.querySelector(".outer").classList.remove("cycle");

      if (value) {
        this.querySelector("#current-tick .text").innerHTML = value;
      }

      (0, _get2["default"])((0, _getPrototypeOf2["default"])(TriviaTimer.prototype), "show", this).call(this);
    }
  }, {
    key: "spin",
    value: function spin() {
      var _this2 = this;

      this.querySelector(".outer").classList.remove("cycle");
      setTimeout(function () {
        return _this2.querySelector(".outer").classList.add("cycle");
      }, 10);
      setTimeout(function () {
        return _this2.querySelector("#current-tick .text").innerHTML = _this2.querySelector("#prev-tick").innerHTML;
      }, 500);
    }
  }, {
    key: "step",
    value: function step() {
      var _this3 = this;

      if (this.value > 0 && this.running) {
        this.tick();
        this.timeout = setTimeout(function () {
          return _this3.step();
        }, 1000);
      }
    }
  }, {
    key: "set",
    value: function set(value) {
      this.querySelector("#prev-tick .text").innerHTML = value;
      this.spin();
    }
  }, {
    key: "tick",
    value: function tick(nextValue) {
      var _nextValue,
          _this4 = this;

      nextValue = (_nextValue = nextValue) !== null && _nextValue !== void 0 ? _nextValue : --this.value;
      this.querySelector("#prev-tick").innerHTML = nextValue;
      this.querySelector(".outer").classList.remove("cycle");
      setTimeout(function () {
        return _this4.querySelector(".outer").classList.add("cycle");
      }, 500);
      setTimeout(function () {
        return _this4.querySelector("#current-tick .text").innerHTML = nextValue;
      }, 900);
    }
  }]);
  return TriviaTimer;
}(NidgetElement);

window.customElements.define('trivia-timer', TriviaTimer);
module.exports = TriviaTimer;

},{"@babel/runtime/helpers/classCallCheck":8,"@babel/runtime/helpers/createClass":10,"@babel/runtime/helpers/get":11,"@babel/runtime/helpers/getPrototypeOf":12,"@babel/runtime/helpers/inherits":13,"@babel/runtime/helpers/interopRequireDefault":14,"@babel/runtime/helpers/possibleConstructorReturn":17,"@thaerious/nidget":5}]},{},[31,34,35,36,33,41,37,38,39,40,42])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi8uLi9uaWRnZXQvc3JjL0NvbnN0YW50cy5qcyIsIi4uLy4uL25pZGdldC9zcmMvRmlsZU9wZXJhdGlvbnMuanMiLCIuLi8uLi9uaWRnZXQvc3JjL05pZGdldEVsZW1lbnQuanMiLCIuLi8uLi9uaWRnZXQvc3JjL25pZGdldC1jb21wb25lbnRzL05pZGdldFRleHQuanMiLCIuLi8uLi9uaWRnZXQvc3JjL3Byb2plY3RGaWxlLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvci5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY29uc3RydWN0LmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXQuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZi5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaXNOYXRpdmVGdW5jdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdC5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4uanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9zZXRQcm90b3R5cGVPZi5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3N1cGVyUHJvcEJhc2UuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2YuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy93cmFwTmF0aXZlU3VwZXIuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyIsIm5vZGVfbW9kdWxlcy90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwic3JjL2NsaWVudC9BYnN0cmFjdFZpZXcuanMiLCJzcmMvY2xpZW50L0NvbnRlc3RhbnRQb3J0YWxWaWV3LmpzIiwic3JjL2NsaWVudC9Qb3J0YWxDb250cm9sbGVyLmpzIiwic3JjL2NsaWVudC9WaWV3RXZlbnQuanMiLCJzcmMvY2xpZW50L2Nvbm5lY3RXZWJzb2NrZXQuanMiLCJzcmMvY2xpZW50L2NvbnRlc3RhbnRfcG9ydGFsLmpzIiwic3JjL2NsaWVudC9tb2R1bGVzL1NldHVwU2l6ZUxpc3RlbmVyLmpzIiwic3JjL2NsaWVudC9uaWRnZXRzL0NoZWNrQm94LmpzIiwic3JjL2NsaWVudC9uaWRnZXRzL0dhbWVCb2FyZC5qcyIsInNyYy9jbGllbnQvbmlkZ2V0cy9NZW51Q29udGFpbmVyLmpzIiwic3JjL2NsaWVudC9uaWRnZXRzL011bHRpcGxlQ2hvaWNlUHJlc2VudC5qcyIsInNyYy9jbGllbnQvbmlkZ2V0cy9OaWRnZXRCdXR0b24uanMiLCJzcmMvY2xpZW50L25pZGdldHMvUGxheWVyQ29udGFpbmVyLmpzIiwic3JjL2NsaWVudC9uaWRnZXRzL1BsYXllclBhbmVsLmpzIiwic3JjL2NsaWVudC9uaWRnZXRzL1F1ZXN0aW9uUGFuZS5qcyIsInNyYy9jbGllbnQvbmlkZ2V0cy9UZXh0SW5wdXQuanMiLCJzcmMvY2xpZW50L25pZGdldHMvVHJpdmlhVGltZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDek9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3pJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVDQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzV1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQzNFTSxZOzs7OztBQUNGLDBCQUFjO0FBQUE7O0FBQUE7QUFDVjtBQUNBLFVBQUssR0FBTCxHQUFXLEVBQVg7QUFFQSxVQUFLLEdBQUwsQ0FBUyxTQUFULEdBQXFCLFFBQVEsQ0FBQyxhQUFULENBQXVCLFlBQXZCLENBQXJCO0FBQ0EsVUFBSyxHQUFMLENBQVMsWUFBVCxHQUF3QixRQUFRLENBQUMsYUFBVCxDQUF1QixnQkFBdkIsQ0FBeEI7QUFDQSxVQUFLLEdBQUwsQ0FBUyxjQUFULEdBQTBCLFFBQVEsQ0FBQyxhQUFULENBQXVCLDBCQUF2QixDQUExQjtBQUVBLFVBQUssR0FBTCxDQUFTLGlCQUFULEdBQTZCLFFBQVEsQ0FBQyxhQUFULENBQXVCLFVBQXZCLENBQTdCO0FBQ0EsVUFBSyxHQUFMLENBQVMsS0FBVCxHQUFpQixRQUFRLENBQUMsYUFBVCxDQUF1QixjQUF2QixDQUFqQjtBQUVBLFVBQUssR0FBTCxDQUFTLGFBQVQsR0FBeUIsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsaUJBQXZCLENBQXpCO0FBQ0EsVUFBSyxHQUFMLENBQVMsUUFBVCxHQUFvQixRQUFRLENBQUMsYUFBVCxDQUF1QixZQUF2QixDQUFwQjtBQUNBLFVBQUssR0FBTCxDQUFTLFVBQVQsR0FBc0IsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsY0FBdkIsQ0FBdEI7QUFFQSxVQUFLLEdBQUwsQ0FBUyxlQUFULEdBQTJCLFFBQVEsQ0FBQyxhQUFULENBQXVCLHdCQUF2QixDQUEzQjtBQWZVO0FBZ0JiOzs7O1dBRUQsb0JBQVcsTUFBWCxFQUFrQjtBQUNkLFdBQUssR0FBTCxDQUFTLEtBQVQsQ0FBZSxJQUFmLENBQW9CLE1BQU0sQ0FBQyxJQUEzQjtBQUNIOzs7V0FFRCxxQkFBWSxNQUFaLEVBQW1CO0FBQ2YsVUFBSSxLQUFLLFVBQUwsQ0FBZ0IsS0FBaEIsQ0FBc0IsT0FBdEIsQ0FBOEIsTUFBOUIsSUFBd0MsQ0FBNUMsRUFBK0M7QUFDL0MsV0FBSyxHQUFMLENBQVMsS0FBVCxDQUFlLElBQWY7QUFDQSxXQUFLLEdBQUwsQ0FBUyxLQUFULENBQWUsR0FBZixDQUFtQixNQUFNLENBQUMsSUFBMUI7O0FBRUEsVUFBSSxLQUFLLFVBQUwsQ0FBZ0IsS0FBaEIsS0FBMEIsQ0FBMUIsSUFBK0IsS0FBSyxVQUFMLENBQWdCLEtBQWhCLEtBQTBCLENBQTdELEVBQWdFO0FBQzVELFlBQUksV0FBVyxHQUFHLEtBQUssVUFBTCxDQUFnQixLQUFoQixDQUFzQixPQUF0QixDQUE4QixDQUE5QixFQUFpQyxJQUFuRDtBQUNBLFlBQUksWUFBWSxHQUFHLEtBQUssR0FBTCxDQUFTLGVBQVQsQ0FBeUIsU0FBekIsRUFBbkI7QUFDQSxRQUFBLFlBQVksQ0FBQyxRQUFiLENBQXNCLE1BQU0sQ0FBQyxRQUE3QjtBQUNIO0FBQ0o7OztXQUVELHFCQUFZLE1BQVosRUFBbUI7QUFDZixXQUFLLFdBQUwsQ0FBaUIsTUFBakI7QUFDQSxXQUFLLFVBQUwsR0FBa0IsTUFBbEI7QUFFQSxXQUFLLEdBQUwsQ0FBUyxjQUFULENBQXdCLElBQXhCOztBQUVBLGNBQVEsTUFBTSxDQUFDLEtBQWY7QUFDSSxhQUFLLENBQUw7QUFDSTs7QUFDSixhQUFLLENBQUw7QUFDSSxlQUFLLEdBQUwsQ0FBUyxjQUFULENBQXdCLElBQXhCO0FBQ0EsZUFBSyxHQUFMLENBQVMsU0FBVCxDQUFtQixJQUFuQjtBQUNBLGVBQUssR0FBTCxDQUFTLFlBQVQsQ0FBc0IsSUFBdEI7QUFDQSxlQUFLLEdBQUwsQ0FBUyxZQUFULENBQXNCLE9BQXRCLENBQThCLE1BQU0sQ0FBQyxLQUFQLENBQWEsS0FBYixDQUFtQixRQUFqRDtBQUNBLGVBQUssR0FBTCxDQUFTLEtBQVQsQ0FBZSxJQUFmO0FBQ0E7O0FBQ0osYUFBSyxDQUFMO0FBQ0ksZUFBSyxHQUFMLENBQVMsWUFBVCxDQUFzQixJQUF0QjtBQUNBLGVBQUssR0FBTCxDQUFTLGNBQVQsQ0FBd0IsSUFBeEI7QUFDQSxlQUFLLEdBQUwsQ0FBUyxjQUFULENBQXdCLE9BQXhCLENBQWdDLE1BQWhDO0FBQ0EsZUFBSyxHQUFMLENBQVMsY0FBVCxDQUF3QixhQUF4QixDQUFzQyxjQUF0QyxFQUFzRCxJQUF0RDtBQUNBLGVBQUssR0FBTCxDQUFTLGNBQVQsQ0FBd0IsYUFBeEIsQ0FBc0Msd0JBQXRDLEVBQWdFLElBQWhFLEdBQXVFLE1BQU0sQ0FBQyxLQUFQLENBQWEsS0FBYixDQUFtQixLQUExRjs7QUFDQSxlQUFLLElBQUksQ0FBQyxHQUFHLENBQWIsRUFBZ0IsQ0FBQyxHQUFHLENBQXBCLEVBQXVCLENBQUMsRUFBeEIsRUFBNEI7QUFDeEIsaUJBQUssR0FBTCxDQUFTLGNBQVQsQ0FBd0IsYUFBeEIseUJBQXNELENBQXRELG9CQUF1RSxPQUF2RSxHQUFpRixLQUFqRjtBQUNBLGlCQUFLLEdBQUwsQ0FBUyxjQUFULENBQXdCLGFBQXhCLENBQXNDLENBQXRDLEVBQXlDLE1BQU0sQ0FBQyxLQUFQLENBQWEsS0FBYixDQUFtQixPQUFuQixDQUEyQixDQUEzQixDQUF6QztBQUNBLGlCQUFLLEdBQUwsQ0FBUyxjQUFULENBQXdCLGFBQXhCLHlCQUFzRCxDQUF0RCxvQkFBdUUsTUFBdkUsR0FBZ0YsS0FBaEY7QUFDSDs7QUFDRDs7QUFDSixhQUFLLENBQUw7QUFDSSxlQUFLLEdBQUwsQ0FBUyxZQUFULENBQXNCLElBQXRCO0FBQ0EsZUFBSyxHQUFMLENBQVMsY0FBVCxDQUF3QixJQUF4QjtBQUNBLGVBQUssR0FBTCxDQUFTLGNBQVQsQ0FBd0IsT0FBeEIsQ0FBZ0MsTUFBaEM7O0FBRUEsZUFBSyxJQUFJLEVBQUMsR0FBRyxDQUFiLEVBQWdCLEVBQUMsR0FBRyxDQUFwQixFQUF1QixFQUFDLEVBQXhCLEVBQTRCO0FBQ3hCLGlCQUFLLEdBQUwsQ0FBUyxjQUFULENBQXdCLGFBQXhCLENBQXNDLEVBQXRDLEVBQXlDLE1BQU0sQ0FBQyxLQUFQLENBQWEsS0FBYixDQUFtQixPQUFuQixDQUEyQixFQUEzQixDQUF6QztBQUNBLGlCQUFLLEdBQUwsQ0FBUyxjQUFULENBQXdCLGFBQXhCLHlCQUFzRCxFQUF0RCxvQkFBdUUsT0FBdkUsR0FBaUYsTUFBTSxDQUFDLEtBQVAsQ0FBYSxLQUFiLENBQW1CLE1BQW5CLENBQTBCLEVBQTFCLENBQWpGO0FBQ0EsaUJBQUssR0FBTCxDQUFTLGNBQVQsQ0FBd0IsYUFBeEIseUJBQXNELEVBQXRELG9CQUF1RSxNQUF2RSxHQUFnRixJQUFoRjtBQUNIOztBQUNEOztBQUNKLGFBQUssQ0FBTDtBQUNJLGVBQUssR0FBTCxDQUFTLFNBQVQsQ0FBbUIsSUFBbkI7QUFDQSxlQUFLLHNCQUFMLENBQTRCLE1BQTVCO0FBQ0EsZUFBSyxpQkFBTCxDQUF1QixNQUF2QjtBQUNBLGVBQUssR0FBTCxDQUFTLEtBQVQsQ0FBZSxJQUFmO0FBQ0E7O0FBQ0osYUFBSyxDQUFMO0FBQ0ksZUFBSyxHQUFMLENBQVMsU0FBVCxDQUFtQixJQUFuQjtBQUNBLGVBQUssR0FBTCxDQUFTLFlBQVQsQ0FBc0IsSUFBdEI7QUFDQSxlQUFLLEdBQUwsQ0FBUyxZQUFULENBQXNCLE9BQXRCLENBQThCLE1BQU0sQ0FBQyxLQUFQLENBQWEsS0FBYixDQUFtQixRQUFqRDtBQUNBLGVBQUssR0FBTCxDQUFTLEtBQVQsQ0FBZSxJQUFmO0FBQ0E7O0FBQ0osYUFBSyxDQUFMO0FBQ0ksZUFBSyxHQUFMLENBQVMsU0FBVCxDQUFtQixJQUFuQjtBQUNBLGVBQUssR0FBTCxDQUFTLFlBQVQsQ0FBc0IsSUFBdEI7QUFDQSxlQUFLLEdBQUwsQ0FBUyxZQUFULENBQXNCLE9BQXRCLENBQThCLE1BQU0sQ0FBQyxLQUFQLENBQWEsS0FBYixDQUFtQixRQUFqRDtBQUNBLGVBQUssR0FBTCxDQUFTLGVBQVQsQ0FBeUIsU0FBekIsQ0FBbUMsTUFBTSxDQUFDLEtBQVAsQ0FBYSxLQUFiLENBQW1CLGNBQXREO0FBQ0E7O0FBQ0osYUFBSyxDQUFMO0FBQ0ksZUFBSyxHQUFMLENBQVMsU0FBVCxDQUFtQixJQUFuQjtBQUNBLGVBQUssR0FBTCxDQUFTLFlBQVQsQ0FBc0IsSUFBdEI7QUFDQSxlQUFLLEdBQUwsQ0FBUyxZQUFULENBQXNCLE9BQXRCLENBQThCLE1BQU0sQ0FBQyxLQUFQLENBQWEsS0FBYixDQUFtQixRQUFqRDtBQUNBOztBQUNKLGFBQUssQ0FBTDtBQUNJLGVBQUssR0FBTCxDQUFTLFNBQVQsQ0FBbUIsSUFBbkI7QUFDQSxlQUFLLEdBQUwsQ0FBUyxZQUFULENBQXNCLElBQXRCO0FBQ0EsZUFBSyxHQUFMLENBQVMsWUFBVCxDQUFzQixPQUF0QixDQUE4QixNQUFNLENBQUMsS0FBUCxDQUFhLEtBQWIsQ0FBbUIsUUFBakQ7QUFDQSxlQUFLLEdBQUwsQ0FBUyxlQUFULENBQXlCLFNBQXpCLENBQW1DLE1BQU0sQ0FBQyxLQUFQLENBQWEsS0FBYixDQUFtQixjQUF0RDtBQUNBOztBQUNKLGFBQUssQ0FBTDtBQUNJLGVBQUssR0FBTCxDQUFTLFNBQVQsQ0FBbUIsSUFBbkI7QUFDQSxlQUFLLEdBQUwsQ0FBUyxZQUFULENBQXNCLElBQXRCO0FBQ0EsZUFBSyxHQUFMLENBQVMsWUFBVCxDQUFzQixPQUF0QixDQUE4QixNQUFNLENBQUMsS0FBUCxDQUFhLEtBQWIsQ0FBbUIsTUFBakQ7QUFDQSxlQUFLLEdBQUwsQ0FBUyxLQUFULENBQWUsSUFBZjtBQUNBOztBQUNKLGFBQUssRUFBTDtBQUNJLGVBQUssR0FBTCxDQUFTLFNBQVQsQ0FBbUIsSUFBbkI7QUFDQSxlQUFLLEdBQUwsQ0FBUyxZQUFULENBQXNCLElBQXRCO0FBQ0EsZUFBSyxHQUFMLENBQVMsWUFBVCxDQUFzQixPQUF0QixDQUE4QixXQUE5QjtBQUNBLGVBQUssR0FBTCxDQUFTLEtBQVQsQ0FBZSxJQUFmO0FBQ0E7O0FBQ0o7QUFDSTtBQTNFUjtBQTZFSDs7O1dBRUQscUJBQVksTUFBWixFQUFtQjtBQUNmLFdBQUssR0FBTCxDQUFTLGVBQVQsQ0FBeUIsS0FBekI7QUFDQSxVQUFJLE1BQU0sQ0FBQyxLQUFQLENBQWEsT0FBYixDQUFxQixNQUFyQixJQUErQixDQUFuQyxFQUFzQzs7QUFGdkIsaURBSUksTUFBTSxDQUFDLEtBQVAsQ0FBYSxPQUpqQjtBQUFBOztBQUFBO0FBSWYsNERBQXdDO0FBQUEsY0FBL0IsTUFBK0I7QUFDcEMsZUFBSyxHQUFMLENBQVMsZUFBVCxDQUF5QixTQUF6QixDQUFtQyxNQUFNLENBQUMsSUFBMUMsRUFBZ0QsTUFBTSxDQUFDLEtBQXZEOztBQUVBLGNBQUksTUFBTSxDQUFDLEtBQVAsQ0FBYSxLQUFiLElBQXNCLE1BQU0sQ0FBQyxLQUFQLENBQWEsS0FBYixDQUFtQixLQUFuQixLQUE2QixHQUF2RCxFQUE0RDtBQUFFO0FBQzFELGdCQUFJLE1BQU0sQ0FBQyxLQUFQLENBQWEsS0FBYixDQUFtQixjQUFuQixLQUFzQyxNQUFNLENBQUMsSUFBakQsRUFBdUQ7QUFDbkQsbUJBQUssR0FBTCxDQUFTLGVBQVQsQ0FBeUIsU0FBekIsQ0FBbUMsTUFBTSxDQUFDLElBQTFDLEVBQWdELFNBQWhELEdBQTRELElBQTVEO0FBQ0EsbUJBQUssR0FBTCxDQUFTLGVBQVQsQ0FBeUIsU0FBekIsQ0FBbUMsTUFBTSxDQUFDLElBQTFDLEVBQWdELE1BQWhELEdBQXlELElBQXpEO0FBQ0gsYUFIRCxNQUdPLElBQUksTUFBTSxDQUFDLEtBQVAsQ0FBYSxLQUFiLENBQW1CLFlBQW5CLENBQWdDLE9BQWhDLENBQXdDLE1BQU0sQ0FBQyxJQUEvQyxNQUF5RCxDQUFDLENBQTlELEVBQWlFO0FBQ3BFLG1CQUFLLEdBQUwsQ0FBUyxlQUFULENBQXlCLFNBQXpCLENBQW1DLE1BQU0sQ0FBQyxJQUExQyxFQUFnRCxHQUFoRCxHQUFzRCxJQUF0RDtBQUNBLGNBQUEsTUFBTSxDQUFDLENBQVAsR0FBVyxLQUFLLEdBQUwsQ0FBUyxlQUFULENBQXlCLFNBQXpCLENBQW1DLE1BQU0sQ0FBQyxJQUExQyxDQUFYO0FBQ0g7QUFDSjtBQUNKO0FBaEJjO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFpQmxCOzs7V0FFRCxnQ0FBdUIsTUFBdkIsRUFBOEI7QUFDMUIsV0FBSyxJQUFJLENBQUMsR0FBRyxDQUFiLEVBQWdCLENBQUMsR0FBRyxDQUFwQixFQUF1QixDQUFDLEVBQXhCLEVBQTJCO0FBQ3ZCLFlBQUksUUFBUSxHQUFHLE1BQU0sQ0FBQyxLQUFQLENBQWEsS0FBYixDQUFtQixVQUFuQixDQUE4QixDQUE5QixDQUFmO0FBQ0EsYUFBSyxHQUFMLENBQVMsU0FBVCxDQUFtQixTQUFuQixDQUE2QixDQUE3QixFQUFnQyxRQUFRLENBQUMsTUFBRCxDQUF4QyxFQUFrRCxRQUFRLENBQUMsV0FBRCxDQUExRCxFQUF5RSxJQUF6RTtBQUNIO0FBQ0o7OztXQUVELDJCQUFrQixNQUFsQixFQUF5QjtBQUNyQixVQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBUCxDQUFhLEtBQXpCOztBQUNBLFdBQUssSUFBSSxDQUFDLEdBQUcsQ0FBYixFQUFnQixDQUFDLEdBQUcsQ0FBcEIsRUFBdUIsQ0FBQyxFQUF4QixFQUEyQjtBQUN2QixhQUFLLElBQUksQ0FBQyxHQUFHLENBQWIsRUFBZ0IsQ0FBQyxHQUFHLENBQXBCLEVBQXVCLENBQUMsRUFBeEIsRUFBMkI7QUFDdkIsY0FBSSxLQUFLLENBQUMsS0FBTixDQUFZLENBQVosRUFBZSxDQUFmLENBQUosRUFBc0I7QUFDbEIsaUJBQUssR0FBTCxDQUFTLFNBQVQsQ0FBbUIsT0FBbkIsQ0FBMkIsQ0FBM0IsRUFBOEIsQ0FBOUIsRUFBaUMsRUFBakM7QUFDSCxXQUZELE1BRU87QUFDSCxpQkFBSyxHQUFMLENBQVMsU0FBVCxDQUFtQixPQUFuQixDQUEyQixDQUEzQixFQUE4QixDQUE5QixFQUFpQyxLQUFLLENBQUMsTUFBTixDQUFhLENBQWIsRUFBZ0IsQ0FBaEIsQ0FBakM7QUFDSDtBQUNKO0FBQ0o7QUFDSjs7O2tEQTdKc0IsVzs7QUFnSzNCLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLFlBQWpCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoS0E7O0FBQ0E7Ozs7Ozs7Ozs7OztJQUVNLG9COzs7OztBQUNGLGtDQUFjO0FBQUE7O0FBQUE7QUFDVjtBQUNBLFVBQUssR0FBTCxDQUFTLFVBQVQsR0FBc0IsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsT0FBdkIsQ0FBdEI7QUFDQSxVQUFLLEdBQUwsQ0FBUyxTQUFULEdBQXFCLFFBQVEsQ0FBQyxhQUFULENBQXVCLGFBQXZCLENBQXJCOztBQUVBLFVBQUssR0FBTCxDQUFTLFVBQVQsQ0FBb0IsZ0JBQXBCLENBQXFDLE9BQXJDLEVBQThDLFVBQUEsQ0FBQztBQUFBLGFBQUksTUFBSyxhQUFMLENBQW1CLElBQUkscUJBQUosQ0FBYyxNQUFkLENBQW5CLENBQUo7QUFBQSxLQUEvQzs7QUFDQSxVQUFLLEdBQUwsQ0FBUyxTQUFULENBQW1CLGdCQUFuQixDQUFvQyxhQUFwQyxFQUFtRCxVQUFBLENBQUM7QUFBQSxhQUFJLE1BQUssYUFBTCxDQUFtQixJQUFJLHFCQUFKLENBQWMsUUFBZCxFQUF3QixDQUFDLENBQUMsTUFBMUIsQ0FBbkIsQ0FBSjtBQUFBLEtBQXBEOztBQUNBLFVBQUssR0FBTCxDQUFTLGNBQVQsQ0FBd0IsZ0JBQXhCLENBQXlDLGNBQXpDLEVBQXlELFVBQUEsQ0FBQztBQUFBLGFBQUksTUFBSyxhQUFMLENBQW1CLElBQUkscUJBQUosQ0FBYyxRQUFkLEVBQXdCLENBQUMsQ0FBQyxNQUExQixDQUFuQixDQUFKO0FBQUEsS0FBMUQ7O0FBRUEsVUFBSyxHQUFMLENBQVMsU0FBVCxDQUFtQixTQUFuQjs7QUFUVTtBQVViOzs7O1dBRUQsaUJBQVEsSUFBUixFQUFjO0FBQ1YsV0FBSyxJQUFMLEdBQVksSUFBWjtBQUNBLFdBQUssR0FBTCxDQUFTLFNBQVQsQ0FBbUIsSUFBbkIsR0FBMEIsT0FBMUI7QUFDQSxNQUFBLFFBQVEsQ0FBQyxLQUFULEdBQWlCLElBQWpCO0FBQ0g7OztXQUVELHFCQUFZLE1BQVosRUFBb0I7QUFDaEIsOEhBQWtCLE1BQWxCO0FBQ0EsV0FBSyxHQUFMLENBQVMsVUFBVCxDQUFvQixJQUFwQjs7QUFGZ0IsaURBSUcsTUFBTSxDQUFDLEtBQVAsQ0FBYSxPQUpoQjtBQUFBOztBQUFBO0FBSWhCLDREQUF5QztBQUFBLGNBQWhDLE1BQWdDOztBQUNyQyxjQUFJLE1BQU0sQ0FBQyxJQUFQLEtBQWdCLEtBQUssSUFBekIsRUFBK0I7QUFDM0IsaUJBQUssR0FBTCxDQUFTLFNBQVQsQ0FBbUIsS0FBbkIsR0FBMkIsTUFBTSxDQUFDLEtBQWxDO0FBQ0E7QUFDSDtBQUNKO0FBVGU7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFXaEIsY0FBUSxNQUFNLENBQUMsS0FBZjtBQUNJLGFBQUssQ0FBTDtBQUNJLGVBQUssR0FBTCxDQUFTLGNBQVQsQ0FBd0IsT0FBeEIsQ0FBZ0MsWUFBaEM7O0FBQ0EsZUFBSyxJQUFJLENBQUMsR0FBRyxDQUFiLEVBQWdCLENBQUMsR0FBRyxDQUFwQixFQUF1QixDQUFDLEVBQXhCLEVBQTRCO0FBQ3hCLGlCQUFLLEdBQUwsQ0FBUyxjQUFULENBQXdCLGFBQXhCLENBQXNDLENBQXRDLEVBQXlDLE1BQU0sQ0FBQyxLQUFQLENBQWEsS0FBYixDQUFtQixPQUFuQixDQUEyQixDQUEzQixDQUF6QztBQUNIOztBQUNEOztBQUNKLGFBQUssQ0FBTDtBQUNJLGVBQUssR0FBTCxDQUFTLGNBQVQsQ0FBd0IsT0FBeEIsQ0FBZ0MsWUFBaEM7QUFDQSxlQUFLLEdBQUwsQ0FBUyxjQUFULENBQXdCLGFBQXhCLENBQXNDLGNBQXRDLEVBQXNELElBQXREO0FBQ0EsZUFBSyxHQUFMLENBQVMsY0FBVCxDQUF3QixhQUF4QixDQUFzQyx3QkFBdEMsRUFBZ0UsSUFBaEUsR0FBdUUsTUFBTSxDQUFDLElBQVAsQ0FBWSxLQUFLLElBQWpCLEVBQXVCLEtBQTlGOztBQUVBLGNBQUksTUFBTSxDQUFDLElBQVAsQ0FBWSxLQUFLLElBQWpCLEVBQXVCLEtBQXZCLEtBQWlDLE1BQXJDLEVBQTZDO0FBQ3pDLGlCQUFLLEdBQUwsQ0FBUyxjQUFULENBQXdCLGFBQXhCLENBQXNDLHdCQUF0QyxFQUFnRSxJQUFoRSxHQUF1RSxNQUFNLENBQUMsS0FBUCxDQUFhLEtBQWIsQ0FBbUIsS0FBMUY7QUFDSCxXQUZELE1BR0s7QUFDRCxpQkFBSyxHQUFMLENBQVMsY0FBVCxDQUF3QixhQUF4QixDQUFzQyx3QkFBdEMsRUFBZ0UsSUFBaEUsR0FBdUUsQ0FBdkU7QUFDSDs7QUFFRCxlQUFLLElBQUksRUFBQyxHQUFHLENBQWIsRUFBZ0IsRUFBQyxHQUFHLENBQXBCLEVBQXVCLEVBQUMsRUFBeEIsRUFBNEI7QUFDeEIsZ0JBQUksWUFBWSxHQUFHLEtBQUssR0FBTCxDQUFTLGNBQVQsQ0FBd0IsYUFBeEIseUJBQXNELEVBQXRELGdCQUFuQjtBQUNBLGdCQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsSUFBUCxDQUFZLEtBQUssSUFBakIsRUFBdUIsSUFBdkIsQ0FBNEIsRUFBNUIsQ0FBWjs7QUFFQSxnQkFBSSxLQUFLLEtBQUssRUFBZCxFQUFpQjtBQUNiLGNBQUEsWUFBWSxDQUFDLE9BQWIsR0FBdUIsUUFBUSxDQUFDLEtBQUQsQ0FBL0I7QUFDSCxhQUZELE1BR0s7QUFDRCxjQUFBLFlBQVksQ0FBQyxPQUFiLEdBQXVCLEVBQXZCO0FBQ0g7QUFDSjs7QUFDRDs7QUFDSixhQUFLLENBQUw7QUFDSSxjQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBUCxDQUFhLEtBQWIsQ0FBbUIsWUFBbkIsQ0FBZ0MsT0FBaEMsQ0FBd0MsS0FBSyxJQUE3QyxDQUFaOztBQUNBLGNBQUksTUFBTSxDQUFDLEtBQVAsQ0FBYSxLQUFiLENBQW1CLFlBQW5CLENBQWdDLE9BQWhDLENBQXdDLEtBQUssSUFBN0MsTUFBdUQsQ0FBQyxDQUE1RCxFQUErRDtBQUMzRCxpQkFBSyxHQUFMLENBQVMsVUFBVCxDQUFvQixJQUFwQjtBQUNIOztBQUNEO0FBcENSO0FBc0NIOzs7RUFwRThCLHlCOztlQXVFcEIsb0I7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDekVULGdCO0FBQ0YsNEJBQVksRUFBWixFQUFnQixJQUFoQixFQUFzQjtBQUFBOztBQUFBO0FBQ2xCLFNBQUssRUFBTCxHQUFVLEVBQVY7QUFDQSxTQUFLLElBQUwsR0FBWSxJQUFaO0FBQ0EsU0FBSyxJQUFMLEdBQVksRUFBWjtBQUVBLFNBQUssRUFBTCxDQUFRLGdCQUFSLENBQXlCLFNBQXpCLEVBQW9DLFVBQUMsS0FBRDtBQUFBLGFBQVcsS0FBSSxDQUFDLE9BQUwsQ0FBYSxJQUFJLENBQUMsS0FBTCxDQUFXLEtBQUssQ0FBQyxJQUFqQixDQUFiLENBQVg7QUFBQSxLQUFwQztBQUNBLFNBQUssRUFBTCxDQUFRLGdCQUFSLENBQXlCLE9BQXpCLEVBQWtDLFVBQUMsS0FBRDtBQUFBLGFBQVcsS0FBSSxDQUFDLE9BQUwsQ0FBYSxLQUFiLENBQVg7QUFBQSxLQUFsQztBQUVBLFNBQUssSUFBTCxDQUFVLGdCQUFWLENBQTJCLE9BQTNCLEVBQW9DLFVBQUMsS0FBRDtBQUFBLGFBQVMsS0FBSSxDQUFDLElBQUwsQ0FBVSxLQUFLLENBQUMsTUFBaEIsQ0FBVDtBQUFBLEtBQXBDO0FBQ0EsU0FBSyxJQUFMLENBQVUsZ0JBQVYsQ0FBMkIsYUFBM0IsRUFBMEMsVUFBQyxLQUFEO0FBQUEsYUFBUyxLQUFJLENBQUMsSUFBTCxDQUFVLEtBQUssQ0FBQyxNQUFoQixDQUFUO0FBQUEsS0FBMUM7QUFDSDtBQUVEO0FBQ0o7QUFDQTtBQUNBOzs7OztXQUNJLGlCQUFRLE9BQVIsRUFBZ0I7QUFDWixVQUFJLE9BQU8sQ0FBQyxNQUFSLEtBQW1CLE1BQW5CLElBQTZCLE9BQU8sQ0FBQyxNQUFSLEtBQW1CLGNBQXBELEVBQW1FO0FBQy9ELFFBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxPQUFaO0FBQ0EsUUFBQSxNQUFNLENBQUMsV0FBUCxHQUFxQixPQUFyQjtBQUNIOztBQUVELGNBQVEsT0FBTyxDQUFDLE1BQWhCO0FBQ0ksYUFBSyx3QkFBTDtBQUNJLGVBQUssSUFBTCxHQUFZLE9BQU8sQ0FBQyxJQUFSLENBQWEsSUFBekI7QUFDQSxjQUFJLEtBQUssSUFBTCxDQUFVLE9BQWQsRUFBdUIsS0FBSyxJQUFMLENBQVUsT0FBVixDQUFrQixPQUFPLENBQUMsSUFBUixDQUFhLElBQS9CO0FBQ3ZCOztBQUNKLGFBQUssZ0JBQUw7QUFDSSxlQUFLLElBQUwsQ0FBVSxZQUFWLENBQXVCLE9BQU8sQ0FBQyxJQUFSLENBQWEsTUFBcEM7QUFDQTs7QUFDSixhQUFLLGNBQUw7QUFDSSxlQUFLLElBQUwsQ0FBVSxXQUFWLENBQXNCLE9BQU8sQ0FBQyxJQUE5QjtBQUNBOztBQUNKLGFBQUssYUFBTDtBQUNJLGVBQUssSUFBTCxDQUFVLFVBQVYsQ0FBcUIsT0FBTyxDQUFDLElBQTdCO0FBQ0E7O0FBQ0osYUFBSyxjQUFMO0FBQ0ksZUFBSyxJQUFMLENBQVUsV0FBVixDQUFzQixPQUFPLENBQUMsSUFBOUI7QUFDQTs7QUFDSixhQUFLLFlBQUw7QUFDSTtBQWxCUjtBQW9CSDs7O1dBRUQsaUJBQVEsS0FBUixFQUFjO0FBQ1YsVUFBSSxLQUFLLElBQUwsS0FBYyxPQUFsQixFQUEwQjtBQUN0QixRQUFBLE1BQU0sQ0FBQyxRQUFQLEdBQWtCLFVBQWxCO0FBQ0gsT0FGRCxNQUVPO0FBQ0gsUUFBQSxNQUFNLENBQUMsUUFBUCxHQUFrQixxQkFBbEI7QUFDSDtBQUNKOzs7V0FFRCxjQUFLLEdBQUwsRUFBUztBQUNMLE1BQUEsT0FBTyxDQUFDLEdBQVIsaUJBQXFCLElBQUksQ0FBQyxTQUFMLENBQWUsR0FBZixDQUFyQjtBQUNBLFdBQUssRUFBTCxDQUFRLElBQVIsQ0FBYSxJQUFJLENBQUMsU0FBTCxDQUFlLEdBQWYsQ0FBYjtBQUNIOzs7OztlQUdVLGdCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUM1RFQsUzs7Ozs7QUFDRixxQkFBWSxNQUFaLEVBQWlDO0FBQUEsUUFBYixJQUFhLHVFQUFOLElBQU07QUFBQTtBQUFBLDZCQUN2QixPQUR1QixFQUV6QjtBQUFDLE1BQUEsTUFBTSxFQUFHO0FBQUMsUUFBQSxNQUFNLEVBQUcsTUFBVjtBQUFrQixRQUFBLElBQUksRUFBRztBQUF6QjtBQUFWLEtBRnlCO0FBSWhDOzs7a0RBTG1CLFc7O2VBUVQsUzs7Ozs7Ozs7Ozs7QUNSZixTQUFTLGdCQUFULEdBQTJCO0FBQ3ZCLE1BQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFqQjs7QUFDQSxNQUFJLEdBQUcsQ0FBQyxVQUFKLENBQWUsT0FBZixDQUFKLEVBQTRCO0FBQ3hCLElBQUEsR0FBRyxHQUFHLE9BQU8sR0FBRyxDQUFDLE1BQUosQ0FBVyxDQUFYLENBQVAsR0FBdUIsa0JBQTdCO0FBQ0gsR0FGRCxNQUVPO0FBQ0gsSUFBQSxHQUFHLEdBQUcsUUFBUSxHQUFHLENBQUMsTUFBSixDQUFXLENBQVgsQ0FBUixHQUF3QixrQkFBOUI7QUFDSDs7QUFFRCxTQUFPLElBQUksT0FBSixDQUFZLFVBQUMsT0FBRCxFQUFVLE1BQVYsRUFBbUI7QUFDbEMsUUFBSSxNQUFNLEdBQUcsSUFBSSxTQUFKLENBQWMsR0FBZCxDQUFiO0FBQ0EsSUFBQSxNQUFNLENBQUMsZ0JBQVAsQ0FBd0IsT0FBeEIsRUFBaUMsVUFBQyxLQUFEO0FBQUEsYUFBVyxNQUFNLENBQUMsS0FBRCxDQUFqQjtBQUFBLEtBQWpDO0FBQ0EsSUFBQSxNQUFNLENBQUMsZ0JBQVAsQ0FBd0IsTUFBeEIsRUFBZ0MsVUFBQyxLQUFEO0FBQUEsYUFBVyxPQUFPLENBQUMsTUFBRCxDQUFsQjtBQUFBLEtBQWhDO0FBQ0gsR0FKTSxDQUFQO0FBS0g7O2VBRWMsZ0I7Ozs7Ozs7Ozs7OztBQ2ZmOztBQUNBOztBQUNBOztBQUNBOztBQUVBLE1BQU0sQ0FBQyxNQUFQLDhGQUFnQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDUixVQUFBLEtBRFEsR0FDQSxJQUFJLElBQUosRUFEQTtBQUdaO0FBQ0EsVUFBQSxNQUFNLENBQUMsSUFBUCxHQUFjLElBQUksZ0NBQUosRUFBZDtBQUpZO0FBQUEsaUJBS0csbUNBTEg7O0FBQUE7QUFLUixVQUFBLEVBTFE7QUFNWixjQUFJLDRCQUFKLENBQXFCLEVBQXJCLEVBQXlCLE1BQU0sQ0FBQyxJQUFoQztBQUNJLFVBQUEsR0FQUSxHQU9GLElBQUksSUFBSixFQVBFO0FBUVIsVUFBQSxJQVJRLEdBUUQsR0FBRyxHQUFHLEtBUkw7QUFTWixVQUFBLE9BQU8sQ0FBQyxHQUFSLENBQVksZUFBZSxJQUFmLEdBQXNCLEtBQWxDOztBQVRZO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLENBQWhCOzs7Ozs7Ozs7O0FDTEEsU0FBUyxpQkFBVCxHQUE0QjtBQUN4QixXQUFTLGdCQUFULEdBQTRCO0FBQ3hCLFFBQU0sYUFBYSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLGlCQUF2QixDQUF0QjtBQUNBLFFBQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxVQUFQLEdBQW9CLE1BQU0sQ0FBQyxXQUF6Qzs7QUFFQSxRQUFJLEtBQUssSUFBSSxLQUFHLENBQWhCLEVBQWtCO0FBQ2QsTUFBQSxhQUFhLENBQUMsU0FBZCxDQUF3QixHQUF4QixDQUE0QixZQUE1QjtBQUNBLE1BQUEsYUFBYSxDQUFDLFNBQWQsQ0FBd0IsTUFBeEIsQ0FBK0IsYUFBL0I7QUFDSCxLQUhELE1BR087QUFDSCxNQUFBLGFBQWEsQ0FBQyxTQUFkLENBQXdCLE1BQXhCLENBQStCLFlBQS9CO0FBQ0EsTUFBQSxhQUFhLENBQUMsU0FBZCxDQUF3QixHQUF4QixDQUE0QixhQUE1QjtBQUNIO0FBQ0o7O0FBRUQsRUFBQSxNQUFNLENBQUMsZ0JBQVAsQ0FBd0IsUUFBeEIsRUFBa0MsVUFBQSxDQUFDO0FBQUEsV0FBRSxnQkFBZ0IsRUFBbEI7QUFBQSxHQUFuQztBQUNBLEVBQUEsZ0JBQWdCO0FBQ25COztlQUVjLGlCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xCZixJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsbUJBQUQsQ0FBUCxDQUE2QixhQUFuRDs7SUFFTSxXOzs7OztBQUNGLHVCQUFZLEtBQVosRUFBbUI7QUFBQTtBQUFBLDZCQUNULGNBRFMsRUFFWDtBQUFDLE1BQUEsTUFBTSxFQUFHO0FBQUMsUUFBQSxLQUFLLEVBQUc7QUFBVDtBQUFWLEtBRlc7QUFJbEI7OztrREFMc0IsVzs7SUFRckIsUTs7Ozs7Ozs7Ozs7Ozs2R0FDRjtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUVJLHFCQUFLLGdCQUFMLENBQXNCLE9BQXRCLEVBQStCLFlBQUk7QUFDL0Isa0JBQUEsT0FBTyxDQUFDLEdBQVIsMEJBQW1CLEtBQUksQ0FBQyxNQUF4QjtBQUNBLHNCQUFJLEtBQUksQ0FBQyxNQUFULEVBQWlCOztBQUNqQixrQkFBQSxLQUFJLENBQUMsTUFBTDtBQUNILGlCQUpEOztBQUZKO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLE87Ozs7Ozs7Ozs7V0FTQSxrQkFBdUI7QUFBQSxVQUFoQixRQUFnQix1RUFBTCxJQUFLO0FBQ25CLFVBQUksS0FBSyxPQUFMLEtBQWlCLE1BQXJCLEVBQTZCLEtBQUssVUFBTCxDQUFnQixPQUFoQixFQUF5QixRQUF6QixFQUE3QixLQUNLLEtBQUssVUFBTCxDQUFnQixNQUFoQixFQUF3QixRQUF4QjtBQUNSOzs7U0FFRCxlQUFhO0FBQ1QsVUFBSSxDQUFDLEtBQUssWUFBTCxDQUFrQixRQUFRLENBQUMsaUJBQTNCLENBQUwsRUFBbUQ7QUFDL0MsYUFBSyxZQUFMLENBQWtCLFFBQVEsQ0FBQyxpQkFBM0IsRUFBOEMsT0FBOUM7QUFDSDs7QUFDRCxhQUFPLEtBQUssWUFBTCxDQUFrQixRQUFRLENBQUMsaUJBQTNCLENBQVA7QUFDSCxLO1NBRUQsYUFBWSxLQUFaLEVBQWtCO0FBQ2QsVUFBSSxLQUFLLEtBQUssS0FBSyxPQUFuQixFQUE0QjtBQUM1QixXQUFLLFlBQUwsQ0FBa0IsUUFBUSxDQUFDLGlCQUEzQixFQUE4QyxLQUE5QztBQUNBLFdBQUssYUFBTCxDQUFtQixJQUFJLFdBQUosQ0FBZ0IsS0FBaEIsQ0FBbkI7QUFDSDs7O1dBRUQsb0JBQVcsS0FBWCxFQUFrQztBQUFBLFVBQWhCLFFBQWdCLHVFQUFMLElBQUs7QUFDOUIsVUFBSSxLQUFLLEtBQUssS0FBSyxPQUFuQixFQUE0QjtBQUM1QixXQUFLLFlBQUwsQ0FBa0IsUUFBUSxDQUFDLGlCQUEzQixFQUE4QyxLQUE5QztBQUNBLFVBQUksUUFBSixFQUFjLEtBQUssYUFBTCxDQUFtQixJQUFJLFdBQUosQ0FBZ0IsS0FBaEIsQ0FBbkI7QUFDakI7QUFFRDtBQUNKO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtJO0FBQ0o7QUFDQTtBQUNJLG1CQUFZO0FBQ1IsYUFBTyxLQUFLLFlBQUwsQ0FBa0IsUUFBUSxDQUFDLGdCQUEzQixNQUFpRCxNQUF4RDtBQUNILEs7U0FURCxhQUFXLEtBQVgsRUFBaUI7QUFDYixXQUFLLFlBQUwsQ0FBa0IsUUFBUSxDQUFDLGdCQUEzQixFQUE2QyxLQUE3QztBQUNIOzs7RUF6Q2tCLGE7O0FBbUR2QixRQUFRLENBQUMsaUJBQVQsR0FBNkIsU0FBN0I7QUFDQSxRQUFRLENBQUMsZ0JBQVQsR0FBNEIsUUFBNUI7QUFDQSxNQUFNLENBQUMsY0FBUCxDQUFzQixNQUF0QixDQUE2QixXQUE3QixFQUEwQyxRQUExQztBQUNBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLFFBQWpCOzs7QUNoRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQSxJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsbUJBQUQsQ0FBUCxDQUE2QixhQUFuRDs7SUFFTSxlOzs7OztBQUNGLDJCQUFZLEdBQVosRUFBaUIsR0FBakIsRUFBc0I7QUFBQTtBQUFBLDZCQUNaLGFBRFksRUFFWjtBQUFDLE1BQUEsTUFBTSxFQUFHO0FBQUMsUUFBQSxHQUFHLEVBQUcsR0FBUDtBQUFZLFFBQUEsR0FBRyxFQUFHO0FBQWxCO0FBQVYsS0FGWTtBQUlyQjs7O2tEQUx5QixXOztJQVF4QixpQjs7Ozs7QUFDRiw2QkFBWSxHQUFaLEVBQWlCLEtBQWpCLEVBQXdCLFFBQXhCLEVBQWtDO0FBQUE7QUFBQSw4QkFDeEIsZUFEd0IsRUFFMUI7QUFBQyxNQUFBLE1BQU0sRUFBRztBQUFDLFFBQUEsS0FBSyxFQUFHLEtBQVQ7QUFBZ0IsUUFBQSxHQUFHLEVBQUcsR0FBdEI7QUFBMkIsUUFBQSxRQUFRLEVBQUc7QUFBdEM7QUFBVixLQUYwQjtBQUlqQzs7O2tEQUw0QixXOztJQVEzQixTOzs7OztBQUNGLHVCQUFjO0FBQUE7QUFBQSw4QkFDSixxQkFESTtBQUViOzs7OztpR0FFRDtBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBLHVEQUd3QixLQUFLLGdCQUFMLENBQXNCLGNBQXRCLENBSHhCOztBQUFBO0FBQUE7QUFBQSx3QkFHYSxPQUhiO0FBSVEsd0JBQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxhQUFSLENBQXNCLFFBQXRCLENBQWQ7QUFDQSxvQkFBQSxPQUFPLENBQUMsZ0JBQVIsQ0FBeUIsT0FBekIsRUFBa0MsVUFBQSxDQUFDLEVBQUc7QUFDbEMsMEJBQUksS0FBSyxDQUFDLFNBQU4sS0FBb0IsRUFBeEIsRUFBNEIsS0FBSyxDQUFDLFNBQU4sR0FBa0IsR0FBbEIsQ0FETSxDQUNpQjs7QUFDbkQsc0JBQUEsS0FBSyxDQUFDLEtBQU47QUFDSCxxQkFIRDtBQUxSOztBQUdJLHNFQUEwRDtBQUFBO0FBTXpEO0FBVEw7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQSx1Q0FXYSxHQVhiO0FBWVEsa0JBQUEsS0FBSSxDQUFDLFNBQUwsQ0FBZSxHQUFmLEVBQW9CLGdCQUFwQixDQUFxQyxPQUFyQyxFQUE4QyxVQUFDLEtBQUQsRUFBUztBQUNuRCxvQkFBQSxLQUFLLENBQUMsTUFBTixDQUFhLE9BQWIsQ0FBcUIsTUFBckI7QUFDSCxtQkFGRDs7QUFJQSxrQkFBQSxLQUFJLENBQUMsU0FBTCxDQUFlLEdBQWYsRUFBb0IsZ0JBQXBCLENBQXFDLE1BQXJDLEVBQTZDLFVBQUMsS0FBRCxFQUFTO0FBQ2xELG9CQUFBLEtBQUssQ0FBQyxNQUFOLENBQWEsU0FBYixHQUF5QixLQUFLLENBQUMsTUFBTixDQUFhLElBQWIsQ0FBa0IsSUFBbEIsRUFBekI7QUFDQSxvQkFBQSxLQUFLLENBQUMsTUFBTixDQUFhLE9BQWIsQ0FBcUIsTUFBckIsQ0FBNEIsVUFBQSxRQUFRLEVBQUU7QUFDbEMsc0JBQUEsS0FBSSxDQUFDLGFBQUwsQ0FBbUIsSUFBSSxpQkFBSixDQUFzQixHQUF0QixFQUEyQixLQUFJLENBQUMsU0FBTCxDQUFlLEdBQWYsRUFBb0IsSUFBL0MsRUFBcUQsUUFBckQsQ0FBbkI7QUFDSCxxQkFGRDtBQUdILG1CQUxEOztBQWhCUiwrQ0F1QmlCLEdBdkJqQjtBQXdCWSxvQkFBQSxLQUFJLENBQUMsT0FBTCxDQUFhLEdBQWIsRUFBa0IsR0FBbEIsRUFBdUIsZ0JBQXZCLENBQXdDLE9BQXhDLEVBQWlELFlBQU07QUFDbkQsc0JBQUEsS0FBSSxDQUFDLGFBQUwsQ0FBbUIsSUFBSSxlQUFKLENBQW9CLEdBQXBCLEVBQXlCLEdBQXpCLENBQW5CO0FBQ0gscUJBRkQ7QUF4Qlo7O0FBdUJRLHVCQUFLLElBQUksR0FBRyxHQUFHLENBQWYsRUFBa0IsR0FBRyxHQUFHLENBQXhCLEVBQTJCLEdBQUcsRUFBOUIsRUFBa0M7QUFBQSwyQkFBekIsR0FBeUI7QUFJakM7QUEzQlQ7O0FBV0kscUJBQVMsR0FBVCxHQUFlLENBQWYsRUFBa0IsR0FBRyxHQUFHLENBQXhCLEVBQTJCLEdBQUcsRUFBOUIsRUFBa0M7QUFBQSx3QkFBekIsR0FBeUI7QUFpQmpDOztBQTVCTDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxPOzs7Ozs7OztBQStCQTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztXQUNJLG1CQUFVLEtBQVYsRUFBaUIsS0FBakIsRUFBd0IsUUFBeEIsRUFBK0M7QUFBQSxVQUFiLElBQWEsdUVBQU4sS0FBTTtBQUMzQyxVQUFNLE9BQU8sR0FBRyxLQUFLLFNBQUwsQ0FBZSxLQUFmLENBQWhCO0FBQ0EsTUFBQSxPQUFPLENBQUMsSUFBUixHQUFlLEtBQWY7QUFDQSxNQUFBLE9BQU8sQ0FBQyxLQUFSLENBQWMsUUFBZCxHQUF5QixRQUF6Qjs7QUFFQSxVQUFJLElBQUosRUFBUztBQUNMLFFBQUEsT0FBTyxDQUFDLFlBQVIsQ0FBcUIsaUJBQXJCLEVBQXdDLE9BQXhDO0FBQ0g7QUFDSjtBQUVEO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7Ozs7V0FDSSxtQkFBVSxLQUFWLEVBQWdCO0FBQ1osVUFBSSxPQUFPLEtBQVAsS0FBaUIsUUFBakIsSUFBNkIsS0FBSyxHQUFHLENBQXJDLElBQTBDLEtBQUssR0FBRyxDQUF0RCxFQUF5RCxNQUFNLElBQUksS0FBSixDQUFVLG9CQUFvQixLQUE5QixDQUFOO0FBQ3pELFVBQUksUUFBUSxzQ0FBK0IsS0FBL0IsY0FBWjtBQUNBLGFBQU8sS0FBSyxhQUFMLENBQW1CLFFBQW5CLENBQVA7QUFDSDtBQUVEO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztXQUNJLGlCQUFRLEdBQVIsRUFBYSxHQUFiLEVBQTZCO0FBQUEsVUFBWCxLQUFXLHVFQUFILEVBQUc7QUFDekIsV0FBSyxPQUFMLENBQWEsR0FBYixFQUFrQixHQUFsQixFQUF1QixXQUF2QixHQUFxQyxLQUFyQztBQUNIOzs7V0FFRCxpQkFBUSxHQUFSLEVBQWEsR0FBYixFQUFpQjtBQUNiLFVBQUksUUFBUSx5QkFBaUIsR0FBakIsNEJBQW9DLEdBQXBDLGVBQVo7QUFDQSxhQUFPLEtBQUssYUFBTCxDQUFtQixRQUFuQixDQUFQO0FBQ0g7OztXQUVELHFCQUFZLEdBQVosRUFBaUIsR0FBakIsRUFBc0IsS0FBdEIsRUFBNEI7QUFDeEIsVUFBSSxPQUFPLEdBQVAsS0FBZSxRQUFmLElBQTJCLEdBQUcsR0FBRyxDQUFqQyxJQUFzQyxHQUFHLEdBQUcsQ0FBaEQsRUFBbUQsTUFBTSxJQUFJLEtBQUosQ0FBVSxrQkFBa0IsR0FBNUIsQ0FBTjtBQUNuRCxVQUFJLE9BQU8sR0FBUCxLQUFlLFFBQWYsSUFBMkIsR0FBRyxHQUFHLENBQWpDLElBQXNDLEdBQUcsR0FBRyxDQUFoRCxFQUFtRCxNQUFNLElBQUksS0FBSixDQUFVLGtCQUFrQixHQUE1QixDQUFOO0FBQ25ELFdBQUssT0FBTCxDQUFhLEdBQWIsRUFBa0IsR0FBbEIsRUFBdUIsWUFBdkIsQ0FBb0MsZUFBcEMsRUFBcUQsS0FBckQ7QUFDSDs7O0VBbkZtQixhOztBQXNGeEIsTUFBTSxDQUFDLGNBQVAsQ0FBc0IsTUFBdEIsQ0FBNkIsWUFBN0IsRUFBMkMsU0FBM0M7QUFDQSxNQUFNLENBQUMsT0FBUCxHQUFpQixTQUFqQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbkhBLElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxtQkFBRCxDQUFQLENBQTZCLGFBQW5EOztJQUVNLGE7Ozs7O0FBRUYseUJBQVksS0FBWixFQUFtQjtBQUFBO0FBQUEsNkJBQ1QseUJBRFM7QUFFbEI7Ozs7O2lHQUVEO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBRUkscUJBQUssYUFBTCxDQUFtQixZQUFuQixFQUFpQyxZQUFqQyxDQUE4QyxLQUE5QyxFQUFzRCxLQUFLLFlBQUwsQ0FBa0IsV0FBbEIsQ0FBdEQ7QUFGSix1REFJcUIsS0FBSyxnQkFBTCxDQUFzQixXQUF0QixDQUpyQjs7QUFBQTtBQUFBO0FBQUEsd0JBSWEsSUFKYjtBQUtRLG9CQUFBLElBQUksQ0FBQyxNQUFMOztBQUNBLG9CQUFBLEtBQUksQ0FBQyxRQUFMLENBQWMsTUFBZCxDQUFxQixJQUFyQjs7QUFDQSxvQkFBQSxJQUFJLENBQUMsZ0JBQUwsQ0FBc0IsT0FBdEIsRUFBK0IsVUFBQyxLQUFELEVBQVM7QUFDcEMsc0JBQUEsS0FBSSxDQUFDLGFBQUwsQ0FBbUIsSUFBSSxXQUFKLENBQWdCLElBQUksQ0FBQyxZQUFMLENBQWtCLFlBQWxCLENBQWhCLEVBQWlEO0FBQUMsd0JBQUEsT0FBTyxFQUFFLElBQVY7QUFBZ0Isd0JBQUEsUUFBUSxFQUFFO0FBQTFCLHVCQUFqRCxDQUFuQjtBQUNILHFCQUZEO0FBUFI7O0FBSUksc0VBQW9EO0FBQUE7QUFNbkQ7QUFWTDtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQVlJLHFCQUFLLFlBQUw7QUFFQSxxQkFBSyxVQUFMLENBQWdCLGdCQUFoQixDQUFpQyxPQUFqQyxFQUEwQztBQUFBLHlCQUFJLEtBQUksQ0FBQyxVQUFMLEVBQUo7QUFBQSxpQkFBMUM7QUFDQSxxQkFBSyxRQUFMLENBQWMsZ0JBQWQsQ0FBK0IsWUFBL0IsRUFBNkM7QUFBQSx5QkFBSyxLQUFJLENBQUMsVUFBTCxFQUFMO0FBQUEsaUJBQTdDO0FBQ0EscUJBQUssVUFBTCxDQUFnQixnQkFBaEIsQ0FBaUMsWUFBakMsRUFBK0M7QUFBQSx5QkFBSyxLQUFJLENBQUMsVUFBTCxFQUFMO0FBQUEsaUJBQS9DO0FBQ0EscUJBQUssUUFBTCxDQUFjLGdCQUFkLENBQStCLFlBQS9CLEVBQTZDO0FBQUEseUJBQUssS0FBSSxDQUFDLFVBQUwsRUFBTDtBQUFBLGlCQUE3QztBQUNBLHFCQUFLLFVBQUwsQ0FBZ0IsZ0JBQWhCLENBQWlDLFlBQWpDLEVBQStDO0FBQUEseUJBQUssS0FBSSxDQUFDLFVBQUwsRUFBTDtBQUFBLGlCQUEvQzs7QUFsQko7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsTzs7Ozs7Ozs7OztXQXFCQSxjQUFLLFlBQUwsRUFBa0I7QUFBQTs7QUFDZCxNQUFBLFFBQVEsQ0FBQyxnQkFBVCxDQUEwQix5QkFBMUIsRUFBcUQsT0FBckQsQ0FBNkQsVUFBQyxHQUFELEVBQVE7QUFDakUsUUFBQSxHQUFHLENBQUMsZ0JBQUosQ0FBcUIsT0FBckIsRUFBOEI7QUFBQSxpQkFBSSxNQUFJLENBQUMsS0FBTCxFQUFKO0FBQUEsU0FBOUI7QUFDSCxPQUZEO0FBSUEsTUFBQSxRQUFRLENBQUMsZ0JBQVQsQ0FBMEIsV0FBMUIsRUFBdUMsT0FBdkMsQ0FBK0MsVUFBQyxHQUFELEVBQU87QUFDbEQsUUFBQSxHQUFHLENBQUMsYUFBSixDQUFrQixhQUFsQixFQUFpQyxnQkFBakMsQ0FBa0QsT0FBbEQsRUFBMkQsWUFBSTtBQUMzRCxVQUFBLE1BQUksQ0FBQyxVQUFMLENBQWdCLEdBQWhCO0FBQ0gsU0FGRDtBQUdILE9BSkQ7QUFNQSxhQUFPLElBQVA7QUFDSDs7O1dBRUQsaUJBQU87QUFDSCxXQUFLLFFBQUwsQ0FBYyxTQUFkLENBQXdCLEdBQXhCLENBQTRCLFFBQTVCO0FBRUEsTUFBQSxRQUFRLENBQUMsZ0JBQVQsQ0FBMEIsd0JBQTFCLEVBQW9ELE9BQXBELENBQTRELFVBQUMsR0FBRCxFQUFPO0FBQy9ELFFBQUEsR0FBRyxDQUFDLFNBQUosQ0FBYyxHQUFkLENBQWtCLFFBQWxCO0FBQ0gsT0FGRDtBQUdIOzs7V0FFRCxnQkFBTTtBQUNGLFdBQUssUUFBTCxDQUFjLFNBQWQsQ0FBd0IsTUFBeEIsQ0FBK0IsUUFBL0I7QUFDQSxXQUFLLFlBQUw7QUFDSDs7O1dBRUQsc0JBQVk7QUFBQTs7QUFDUixVQUFJLEtBQUssT0FBVCxFQUFrQjtBQUNsQixXQUFLLE9BQUwsR0FBZSxVQUFVLENBQUMsWUFBSTtBQUMxQixRQUFBLE1BQUksQ0FBQyxLQUFMOztBQUNBLFFBQUEsTUFBSSxDQUFDLE9BQUwsR0FBZSxJQUFmO0FBQ0gsT0FId0IsRUFHdEIsR0FIc0IsQ0FBekI7QUFJSDs7O1dBRUQsc0JBQVk7QUFDUixVQUFJLENBQUMsS0FBSyxPQUFWLEVBQW1CO0FBQ25CLE1BQUEsWUFBWSxDQUFDLEtBQUssT0FBTixDQUFaO0FBQ0EsV0FBSyxPQUFMLEdBQWUsSUFBZjtBQUNIOzs7V0FFRCxvQkFBVTtBQUNOLFdBQUssUUFBTCxDQUFjLFNBQWQsQ0FBd0IsTUFBeEIsQ0FBK0IsUUFBL0I7QUFDQSxXQUFLLFlBQUw7QUFDSDs7O1dBRUQsb0JBQVU7QUFDTixXQUFLLFFBQUwsQ0FBYyxTQUFkLENBQXdCLEdBQXhCLENBQTRCLFFBQTVCO0FBQ0g7OztXQUVELHdCQUFjO0FBQ1YsYUFBTyxLQUFLLFFBQUwsQ0FBYyxTQUFkLENBQXdCLFFBQXhCLENBQWlDLFFBQWpDLENBQVA7QUFDSDs7O1dBRUQsc0JBQVk7QUFDUixVQUFJLEtBQUssWUFBTCxFQUFKLEVBQXlCLEtBQUssUUFBTCxHQUF6QixLQUNLLEtBQUssUUFBTDtBQUNSOzs7V0FFRCx3QkFBYztBQUNWLFVBQU0sSUFBSSxHQUFHLEtBQUssVUFBTCxDQUFnQixxQkFBaEIsR0FBd0MsSUFBckQ7QUFDQSxVQUFNLE1BQU0sR0FBRyxLQUFLLFVBQUwsQ0FBZ0IscUJBQWhCLEdBQXdDLEtBQXZEO0FBQ0EsVUFBTSxNQUFNLEdBQUcsS0FBSyxRQUFMLENBQWMscUJBQWQsR0FBc0MsS0FBckQ7O0FBRUEsVUFBSyxJQUFJLEdBQUcsTUFBUCxHQUFnQixNQUFoQixHQUF5QixDQUExQixHQUErQixNQUFNLENBQUMsVUFBMUMsRUFBcUQ7QUFDakQsYUFBSyxXQUFMO0FBQ0gsT0FGRCxNQUVPO0FBQ0gsYUFBSyxZQUFMO0FBQ0g7QUFDSjs7O1dBRUQsdUJBQWE7QUFDVCxVQUFNLElBQUksR0FBRyxLQUFLLFVBQUwsQ0FBZ0IsVUFBN0I7QUFDQSxVQUFNLEtBQUssR0FBRyxLQUFLLFFBQUwsQ0FBYyxXQUE1QjtBQUNBLFdBQUssUUFBTCxDQUFjLEtBQWQsQ0FBb0IsSUFBcEIsR0FBNEIsSUFBSSxHQUFHLEtBQVAsR0FBZSxDQUFoQixHQUFxQixJQUFoRDtBQUNIOzs7V0FFRCx3QkFBYztBQUNWLFVBQU0sSUFBSSxHQUFHLEtBQUssVUFBTCxDQUFnQixVQUE3QjtBQUNBLFVBQU0sS0FBSyxHQUFHLEtBQUssVUFBTCxDQUFnQixXQUE5QjtBQUNBLFdBQUssUUFBTCxDQUFjLEtBQWQsQ0FBb0IsSUFBcEIsR0FBNEIsSUFBSSxHQUFHLEtBQVAsR0FBZSxDQUFoQixHQUFxQixJQUFoRDtBQUNIOzs7U0FFRCxlQUFnQjtBQUNaLGFBQU8sS0FBSyxhQUFMLENBQW1CLFlBQW5CLENBQVA7QUFDSDs7O1NBRUQsZUFBYztBQUNWLGFBQU8sS0FBSyxhQUFMLENBQW1CLFFBQW5CLENBQVA7QUFDSDs7O0VBcEh1QixhOztJQXVIdEIsUTs7Ozs7QUFDRixzQkFBYztBQUFBO0FBQUE7QUFFYjs7Ozs7a0dBRUQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsTzs7Ozs7Ozs7OztFQUxtQixhOztBQVV2QixNQUFNLENBQUMsY0FBUCxDQUFzQixNQUF0QixDQUE2QixXQUE3QixFQUEwQyxRQUExQztBQUNBLE1BQU0sQ0FBQyxjQUFQLENBQXNCLE1BQXRCLENBQTZCLGdCQUE3QixFQUErQyxhQUEvQztBQUNBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLGFBQWpCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3JJQSxJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsbUJBQUQsQ0FBUCxDQUE2QixhQUFuRDs7QUFDQSxPQUFPLENBQUMsZUFBRCxDQUFQOztJQUVNLFc7Ozs7O0FBQ0YsdUJBQVksS0FBWixFQUFtQixLQUFuQixFQUEwQixPQUExQixFQUFtQztBQUFBO0FBQUEsNkJBQ3pCLGNBRHlCLEVBRTNCO0FBQUMsTUFBQSxNQUFNLEVBQUU7QUFBQyxRQUFBLEtBQUssRUFBRSxLQUFSO0FBQWUsUUFBQSxLQUFLLEVBQUUsS0FBdEI7QUFBNkIsUUFBQSxPQUFPLEVBQUU7QUFBdEM7QUFBVCxLQUYyQjtBQUlsQzs7O2tEQUxxQixXOztJQVFwQixxQjs7Ozs7QUFDRixtQ0FBYztBQUFBOztBQUFBO0FBQ1YsK0JBQU0sa0NBQU47QUFDQSxVQUFLLFFBQUwsR0FBZ0IsRUFBaEI7QUFGVTtBQUdiOzs7Ozs7Ozs7Ozs7OztNQUVELFVBQVcsS0FBWCxFQUFrQixLQUFsQixFQUF3QjtBQUFBOztBQUNwQixVQUFJLEtBQUssUUFBTCxDQUFjLEtBQWQsQ0FBSixFQUEwQixZQUFZLENBQUMsS0FBSyxRQUFMLENBQWMsS0FBZCxDQUFELENBQVo7QUFDMUIsV0FBSyxRQUFMLENBQWMsS0FBZCxJQUF1QixVQUFVLENBQUMsWUFBSTtBQUNsQyxZQUFNLEtBQUssR0FBRyxJQUFJLFdBQUosQ0FBZ0IsS0FBaEIsRUFBdUIsS0FBdkIsRUFBOEIsSUFBOUIsQ0FBZDs7QUFDQSxRQUFBLE1BQUksQ0FBQyxhQUFMLENBQW1CLEtBQW5COztBQUNBLFFBQUEsTUFBSSxDQUFDLFFBQUwsQ0FBYyxLQUFkLElBQXVCLFNBQXZCO0FBQ0gsT0FKZ0MsRUFJOUIsR0FKOEIsQ0FBakM7QUFLSCxLOzs7O2lHQUVEO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUEsdURBRzBCLEtBQUssZ0JBQUwsQ0FBc0IsV0FBdEIsQ0FIMUI7O0FBQUE7QUFBQTtBQUFBLHdCQUdlLE9BSGY7QUFJUSxvQkFBQSxPQUFPLENBQUMsZ0JBQVIsQ0FBeUIsY0FBekIsRUFBeUMsVUFBQSxLQUFLLEVBQUk7QUFDOUMsMEJBQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxhQUFSLENBQXNCLFlBQXRCLENBQW1DLFlBQW5DLENBQWQ7QUFDQSwwQkFBTSxPQUFPLEdBQUcsS0FBSyxDQUFDLE1BQU4sQ0FBYSxLQUFiLEtBQXVCLE1BQXZDO0FBQ0EsMEJBQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxhQUFSLENBQXNCLGFBQXRCLENBQW9DLFFBQXBDLEVBQThDLE9BQTVEO0FBQ0Esc0JBQUEsT0FBTyxDQUFDLGFBQVIsQ0FBc0IsYUFBdEIsQ0FBb0MsUUFBcEMsRUFBOEMsUUFBOUMsR0FBeUQsQ0FBQyxPQUExRDs7QUFDQSxzQkFBQSxNQUFJLENBQUMsYUFBTCxDQUFtQixJQUFJLFdBQUosQ0FBZ0IsS0FBaEIsRUFBdUIsUUFBUSxDQUFDLEtBQUQsQ0FBL0IsRUFBd0MsT0FBeEMsQ0FBbkI7QUFDSCxxQkFORDtBQUpSOztBQUdJLHNFQUF5RDtBQUFBO0FBUXhEO0FBWEw7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQSx3REFhMEIsS0FBSyxnQkFBTCxDQUFzQixRQUF0QixDQWIxQjs7QUFBQTtBQUFBO0FBQUEsd0JBYWUsT0FiZjtBQWNRLG9CQUFBLE9BQU8sQ0FBQyxnQkFBUixDQUF5QixPQUF6QixFQUFrQyxVQUFBLEtBQUssRUFBRTtBQUNyQyxzQkFBQSxPQUFPLENBQUMsT0FBUixHQUFrQixFQUFsQjtBQUNILHFCQUZEO0FBR0Esb0JBQUEsT0FBTyxDQUFDLGdCQUFSLENBQXlCLGFBQXpCLEVBQXdDLFVBQUEsS0FBSyxFQUFFO0FBQzNDLDBCQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsYUFBUixDQUFzQixZQUF0QixDQUFtQyxZQUFuQyxDQUFkO0FBQ0EsMEJBQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxNQUFOLENBQWEsT0FBM0I7O0FBQ0Esc0JBQUEsTUFBSSxDQUFDLGFBQUwsQ0FBbUIsSUFBSSxXQUFKLENBQWdCLEtBQWhCLEVBQXVCLFFBQVEsQ0FBQyxLQUFELENBQS9CLEVBQXdDLElBQXhDLENBQW5CO0FBQ0gscUJBSkQ7QUFqQlI7O0FBYUkseUVBQXNEO0FBQUE7QUFTckQ7QUF0Qkw7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxPOzs7Ozs7Ozs7O1dBeUJBLGlCQUFRLElBQVIsRUFBYztBQUNWLGNBQVEsSUFBUjtBQUNJLGFBQUssTUFBTDtBQUNJLGVBQUssU0FBTCxDQUFlLEdBQWYsQ0FBbUIsV0FBbkI7QUFDQTs7QUFDSixhQUFLLFlBQUw7QUFDQTtBQUNJLGVBQUssU0FBTCxDQUFlLE1BQWYsQ0FBc0IsV0FBdEI7QUFDQTtBQVBSO0FBU0g7OztXQUVELHVCQUFjLEtBQWQsRUFBcUIsSUFBckIsRUFBMkI7QUFDdkIsV0FBSyxhQUFMLCtCQUF5QyxLQUF6QyxrQkFBNEQsSUFBNUQsR0FBbUUsSUFBbkU7QUFDSDs7O1dBRUQsb0JBQVcsS0FBWCxFQUFrQixLQUFsQixFQUF5QjtBQUNyQixXQUFLLGFBQUwsK0JBQXlDLEtBQXpDLG9CQUE4RCxPQUE5RCxHQUF3RSxLQUF4RTtBQUNIOzs7RUExRCtCLGE7O0FBNkRwQyxNQUFNLENBQUMsY0FBUCxDQUFzQixNQUF0QixDQUE2Qix5QkFBN0IsRUFBd0QscUJBQXhEO0FBQ0EsTUFBTSxDQUFDLE9BQVAsR0FBaUIscUJBQWpCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6RUEsSUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLG1CQUFELENBQVAsQ0FBNkIsYUFBbkQ7O0lBRU0sWTs7Ozs7QUFDRiwwQkFBYztBQUFBO0FBQUEsNkJBQ0osd0JBREk7QUFFYjs7Ozs7aUdBRUQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFFRyxxQkFBSyxHQUFMLENBQVMsSUFBVCxDQUFjLFNBQWQsR0FBMEIsS0FBSyxTQUEvQjtBQUNBLHFCQUFLLFNBQUwsR0FBaUIsRUFBakI7O0FBSEg7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsTzs7Ozs7Ozs7OztXQU1BLG1CQUFTO0FBQ0wsV0FBSyxTQUFMLENBQWUsR0FBZixDQUFtQixVQUFuQjtBQUNIOzs7V0FFRCxrQkFBUTtBQUNKLFdBQUssU0FBTCxDQUFlLE1BQWYsQ0FBc0IsVUFBdEI7QUFDSDs7O0VBakJ1QixhOztBQW9CNUIsTUFBTSxDQUFDLGNBQVAsQ0FBc0IsTUFBdEIsQ0FBNkIsZUFBN0IsRUFBOEMsWUFBOUM7QUFDQSxNQUFNLENBQUMsT0FBUCxHQUFpQixZQUFqQjs7O0FDdkJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBOzs7Ozs7Ozs7Ozs7QUFEQSxJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsbUJBQUQsQ0FBUCxDQUE2QixhQUFuRDs7SUFHTSxlOzs7OztBQUNGLDZCQUFzRDtBQUFBOztBQUFBLFFBQTFDLFVBQTBDLHVFQUE3QiwyQkFBNkI7QUFBQTtBQUNsRCw4QkFBTSxVQUFOO0FBQ0EsVUFBSyxrQkFBTCxHQUEwQixJQUExQjtBQUZrRDtBQUdyRDs7Ozs7aUdBRUQ7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFHSSxnQkFBQSxRQUFRLENBQUMsSUFBVCxDQUFjLGdCQUFkLENBQStCLE9BQS9CLEVBQXdDLFVBQUEsS0FBSyxFQUFJO0FBQ3pDLHNCQUFJLE1BQUksQ0FBQyxrQkFBVCxFQUE2Qjs7QUFDN0Isa0JBQUEsTUFBSSxDQUFDLGFBQUwsQ0FBbUIsUUFBbkIsRUFBNkIsU0FBN0IsQ0FBdUMsR0FBdkMsQ0FBMkMsWUFBM0M7O0FBQ0Esa0JBQUEsTUFBSSxDQUFDLGFBQUwsQ0FBbUIsc0JBQW5CLEVBQTJDLFNBQTNDLEdBQXVELFNBQXZEO0FBQ0Esa0JBQUEsTUFBSSxDQUFDLGtCQUFMLEdBQTBCLElBQTFCO0FBQ0gsaUJBTEw7QUFRQSxxQkFBSyxhQUFMLENBQW1CLGdCQUFuQixFQUFxQyxnQkFBckMsQ0FBc0QsT0FBdEQsRUFBK0QsVUFBQSxLQUFLLEVBQUk7QUFDcEUsc0JBQUksTUFBSSxDQUFDLGtCQUFULEVBQTRCO0FBQ3hCLG9CQUFBLE1BQUksQ0FBQyxhQUFMLENBQW1CLFFBQW5CLEVBQTZCLFNBQTdCLENBQXVDLE1BQXZDLENBQThDLFlBQTlDOztBQUNBLG9CQUFBLE1BQUksQ0FBQyxhQUFMLENBQW1CLHNCQUFuQixFQUEyQyxTQUEzQyxHQUF1RCxTQUF2RDtBQUNBLG9CQUFBLE1BQUksQ0FBQyxrQkFBTCxHQUEwQixLQUExQjtBQUNBLG9CQUFBLEtBQUssQ0FBQyxlQUFOO0FBQ0g7QUFDSixpQkFQRDs7QUFYSjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxPOzs7Ozs7Ozs7O1dBcUJBLG1CQUFVLElBQVYsRUFBMEI7QUFBQSxVQUFWLEtBQVUsdUVBQUYsQ0FBRTtBQUN0QixVQUFJLEtBQUssR0FBRyxLQUFLLGFBQUwsQ0FBbUIsUUFBbkIsQ0FBWjtBQUNBLFVBQUksWUFBWSxHQUFHLEtBQUssYUFBTCxDQUFtQixnQkFBbkIsQ0FBbkI7QUFFQSxVQUFJLFdBQVcsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixjQUF2QixDQUFsQjtBQUNBLE1BQUEsV0FBVyxDQUFDLElBQVosR0FBbUIsSUFBbkI7QUFDQSxNQUFBLFdBQVcsQ0FBQyxLQUFaLEdBQW9CLEtBQXBCO0FBRUEsV0FBSyxjQUFMLENBQW9CLFdBQXBCO0FBQ0EsTUFBQSxNQUFNLENBQUMsU0FBUCxHQUFtQixXQUFuQjtBQUVBLFVBQUksS0FBSyxJQUFMLEdBQVksQ0FBaEIsRUFBbUIsWUFBWSxDQUFDLElBQWI7QUFDbkIsYUFBTyxXQUFQO0FBQ0g7OztXQUVELG9CQUFVO0FBQ04sVUFBTSxLQUFLLEdBQUcsS0FBSyxhQUFMLENBQW1CLFFBQW5CLENBQWQ7QUFDQSxVQUFNLFNBQVMsR0FBRyxLQUFLLGdCQUFMLENBQXNCLFFBQXRCLEVBQWdDLE1BQWxEO0FBRUEsVUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsZ0JBQXZCLENBQWhCO0FBQ0EsTUFBQSxPQUFPLENBQUMsU0FBUixDQUFrQixHQUFsQixDQUFzQixPQUF0QjtBQUNBLE1BQUEsT0FBTyxDQUFDLFNBQVIsQ0FBa0IsR0FBbEIsQ0FBc0IsT0FBdEI7QUFDQSxNQUFBLE9BQU8sQ0FBQyxZQUFSLENBQXFCLE9BQXJCLHFCQUEwQyxTQUExQztBQUNBLE1BQUEsT0FBTyxDQUFDLFlBQVIsQ0FBcUIsWUFBckIsRUFBbUMsU0FBbkM7QUFDQSxNQUFBLEtBQUssQ0FBQyxNQUFOLENBQWEsT0FBYjtBQUNBLGFBQU8sT0FBUDtBQUNIOzs7V0FFRCxrQkFBUyxLQUFULEVBQWU7QUFDWCxhQUFPLEtBQUssZ0JBQUwsQ0FBc0IsUUFBdEIsRUFBZ0MsTUFBaEMsSUFBMEMsS0FBakQsRUFBdUQ7QUFDbkQsYUFBSyxRQUFMO0FBQ0g7O0FBQ0QsVUFBSSxRQUFRLGdDQUF5QixLQUF6QixPQUFaO0FBQ0EsVUFBTSxPQUFPLEdBQUcsS0FBSyxhQUFMLDhCQUF5QyxLQUF6QyxRQUFoQjtBQUNBLGFBQU8sT0FBUDtBQUNIOzs7V0FFRCx3QkFBZSxPQUFmLEVBQXVCO0FBQ25CLFVBQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxLQUFMLENBQVksS0FBSyxJQUFOLEdBQWMsQ0FBekIsQ0FBbkI7QUFDQSxVQUFNLFlBQVksR0FBRyxLQUFLLFFBQUwsQ0FBYyxVQUFkLENBQXJCO0FBQ0EsTUFBQSxPQUFPLENBQUMsWUFBUixDQUFxQixPQUFyQixxQkFBMEMsS0FBSyxJQUFMLEdBQVksQ0FBdEQ7QUFDQSxNQUFBLFlBQVksQ0FBQyxNQUFiLENBQW9CLE9BQXBCO0FBQ0g7OztTQUVELGVBQVU7QUFDTixhQUFPLEtBQUssZ0JBQUwsQ0FBc0IsY0FBdEIsRUFBc0MsTUFBN0M7QUFDSDs7O1dBRUQscUJBQVc7QUFDUCxVQUFJLFlBQVksR0FBRyxLQUFLLGFBQUwsQ0FBbUIsY0FBbkIsQ0FBbkI7QUFDQSxhQUFPLFlBQVksQ0FBQyxhQUFiLENBQTJCLGNBQTNCLENBQVA7QUFDSDs7O1dBRUQsbUJBQVUsSUFBVixFQUFlO0FBQUEsaURBQ08sS0FBSyxnQkFBTCxDQUFzQixjQUF0QixDQURQO0FBQUE7O0FBQUE7QUFDWCw0REFBd0Q7QUFBQSxjQUEvQyxLQUErQztBQUNwRCxjQUFJLEtBQUssQ0FBQyxJQUFOLEtBQWUsSUFBbkIsRUFBeUIsT0FBTyxLQUFQO0FBQzVCO0FBSFU7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFJWCxhQUFPLElBQVA7QUFDSDs7O1dBRUQsbUJBQVUsSUFBVixFQUFlO0FBQ1gsVUFBTSxVQUFVLEdBQUcsRUFBbkI7QUFDQSxVQUFJLENBQUMsS0FBSyxTQUFMLENBQWUsSUFBZixDQUFMLEVBQTJCO0FBRTNCLE1BQUEsVUFBVSxDQUFDLElBQVgsQ0FBZ0IsS0FBSyxTQUFMLENBQWUsSUFBZixDQUFoQjtBQUNBLFdBQUssU0FBTCxDQUFlLElBQWYsRUFBcUIsTUFBckI7O0FBTFcsa0RBT1csS0FBSyxnQkFBTCxDQUFzQixjQUF0QixDQVBYO0FBQUE7O0FBQUE7QUFPWCwrREFBNEQ7QUFBQSxjQUFqRCxPQUFpRDtBQUN4RCxVQUFBLFVBQVUsQ0FBQyxJQUFYLENBQWdCLE9BQWhCO0FBQ0EsVUFBQSxPQUFPLENBQUMsTUFBUjtBQUNIO0FBVlU7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFZWCxxQ0FBc0IsVUFBdEIsaUNBQWlDO0FBQTVCLFlBQUksU0FBUyxrQkFBYjtBQUNELGFBQUssY0FBTCxDQUFvQixTQUFwQjtBQUNIOztBQUVELGFBQU8sVUFBVSxDQUFDLENBQUQsQ0FBakI7QUFDSDs7O1dBRUQsaUJBQU87QUFBQSxrREFDZSxLQUFLLGdCQUFMLENBQXNCLFFBQXRCLENBRGY7QUFBQTs7QUFBQTtBQUNILCtEQUFrRDtBQUFBLGNBQXpDLEtBQXlDO0FBQzlDLFVBQUEsS0FBSyxDQUFDLE1BQU47QUFDSDtBQUhFO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBS0gsV0FBSyxhQUFMLENBQW1CLFFBQW5CLEVBQTZCLFdBQTdCLEdBQTJDLEVBQTNDO0FBQ0g7OztFQWhIeUIsYTs7QUFtSDlCLE1BQU0sQ0FBQyxjQUFQLENBQXNCLE1BQXRCLENBQTZCLGtCQUE3QixFQUFpRCxlQUFqRDtBQUNBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLGVBQWpCOzs7QUN6SEE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7Ozs7OztBQURBLElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxtQkFBRCxDQUFQLENBQTZCLGFBQW5EOztJQUdNLFc7Ozs7O0FBQ0YseUJBQWtEO0FBQUEsUUFBdEMsVUFBc0MsdUVBQXpCLHVCQUF5QjtBQUFBO0FBQUEsNkJBQ3hDLFVBRHdDO0FBRWpEOzs7OztpR0FFRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxPOzs7Ozs7Ozs7O1NBWUEsZUFBVTtBQUNOLGFBQU8sS0FBSyxhQUFMLENBQW1CLE9BQW5CLEVBQTRCLFNBQW5DO0FBQ0gsSztTQVZELGFBQVMsS0FBVCxFQUFlO0FBQ1gsV0FBSyxhQUFMLENBQW1CLE9BQW5CLEVBQTRCLFNBQTVCLEdBQXdDLEtBQXhDO0FBQ0g7OztTQVVELGVBQVc7QUFDUCxhQUFPLEtBQUssYUFBTCxDQUFtQixRQUFuQixFQUE2QixTQUFwQztBQUNILEs7U0FWRCxhQUFVLEtBQVYsRUFBZ0I7QUFDWixXQUFLLGFBQUwsQ0FBbUIsUUFBbkIsRUFBNkIsU0FBN0IsR0FBeUMsS0FBekM7QUFDSDs7O1NBVUQsYUFBUSxLQUFSLEVBQWM7QUFDVixVQUFJLEtBQUosRUFBVyxLQUFLLGFBQUwsQ0FBbUIsUUFBbkIsRUFBNkIsU0FBN0IsQ0FBdUMsR0FBdkMsQ0FBMkMsS0FBM0MsRUFBWCxLQUNLLEtBQUssYUFBTCxDQUFtQixRQUFuQixFQUE2QixTQUE3QixDQUF1QyxNQUF2QyxDQUE4QyxLQUE5QztBQUNSOzs7U0FFRCxhQUFjLEtBQWQsRUFBb0I7QUFDaEIsVUFBSSxLQUFKLEVBQVcsS0FBSyxhQUFMLENBQW1CLFFBQW5CLEVBQTZCLFNBQTdCLENBQXVDLEdBQXZDLENBQTJDLFdBQTNDLEVBQVgsS0FDSyxLQUFLLGFBQUwsQ0FBbUIsUUFBbkIsRUFBNkIsU0FBN0IsQ0FBdUMsTUFBdkMsQ0FBOEMsV0FBOUM7QUFDUjs7O1NBRUQsYUFBVyxLQUFYLEVBQWlCO0FBQ2IsVUFBSSxLQUFKLEVBQVcsS0FBSyxhQUFMLENBQW1CLGFBQW5CLEVBQWtDLFNBQWxDLENBQTRDLEdBQTVDLENBQWdELFFBQWhELEVBQVgsS0FDSyxLQUFLLGFBQUwsQ0FBbUIsYUFBbkIsRUFBa0MsU0FBbEMsQ0FBNEMsTUFBNUMsQ0FBbUQsUUFBbkQ7QUFDUjs7O1dBRUQscUJBQVc7QUFDUCxXQUFLLEdBQUwsQ0FBUyxLQUFULENBQWUsU0FBZixDQUF5QixHQUF6QixDQUE2QixRQUE3QjtBQUNIOzs7V0FFRCxnQkFBTTtBQUNGLFdBQUssYUFBTCxDQUFtQixhQUFuQixFQUFrQyxTQUFsQyxDQUE0QyxHQUE1QyxDQUFnRCxhQUFoRDtBQUNIOzs7V0FFRCxpQkFBTztBQUNILFdBQUssYUFBTCxDQUFtQixhQUFuQixFQUFrQyxTQUFsQyxDQUE0QyxNQUE1QyxDQUFtRCxhQUFuRDtBQUNBLFdBQUssYUFBTCxDQUFtQixPQUFuQixFQUE0QixTQUE1QixDQUFzQyxNQUF0QyxDQUE2QyxRQUE3QztBQUNBLFdBQUssYUFBTCxDQUFtQixRQUFuQixFQUE2QixTQUE3QixDQUF1QyxNQUF2QyxDQUE4QyxRQUE5QztBQUNBLFdBQUssZ0JBQUwsQ0FBc0IsYUFBdEIsRUFBcUMsT0FBckMsQ0FBNkMsVUFBQSxDQUFDO0FBQUEsZUFBSSxDQUFDLENBQUMsU0FBRixDQUFZLE1BQVosQ0FBbUIsT0FBbkIsQ0FBSjtBQUFBLE9BQTlDO0FBQ0g7OztXQUVELGtCQUFTLE9BQVQsRUFBaUI7QUFDYixVQUFJLE9BQU8sSUFBSSxFQUFmLEVBQW1CLEtBQUssYUFBTCxDQUFtQiw2QkFBbkIsRUFBa0QsU0FBbEQsQ0FBNEQsR0FBNUQsQ0FBZ0UsT0FBaEU7QUFDbkIsVUFBSSxPQUFPLElBQUksRUFBZixFQUFtQixLQUFLLGFBQUwsQ0FBbUIsNkJBQW5CLEVBQWtELFNBQWxELENBQTRELEdBQTVELENBQWdFLE9BQWhFO0FBQ25CLFVBQUksT0FBTyxJQUFJLEVBQWYsRUFBbUIsS0FBSyxhQUFMLENBQW1CLDZCQUFuQixFQUFrRCxTQUFsRCxDQUE0RCxHQUE1RCxDQUFnRSxPQUFoRTtBQUNuQixVQUFJLE9BQU8sSUFBSSxFQUFmLEVBQW1CLEtBQUssYUFBTCxDQUFtQiw2QkFBbkIsRUFBa0QsU0FBbEQsQ0FBNEQsR0FBNUQsQ0FBZ0UsT0FBaEU7QUFDbkIsVUFBSSxPQUFPLElBQUksQ0FBZixFQUFtQixLQUFLLGFBQUwsQ0FBbUIsNkJBQW5CLEVBQWtELFNBQWxELENBQTRELEdBQTVELENBQWdFLE9BQWhFO0FBQ3RCOzs7RUE3RHFCLGE7O0FBZ0UxQixNQUFNLENBQUMsY0FBUCxDQUFzQixNQUF0QixDQUE2QixjQUE3QixFQUE2QyxXQUE3QztBQUNBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLFdBQWpCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3RFQSxJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsbUJBQUQsQ0FBUCxDQUE2QixhQUFuRDs7SUFFTSxVOzs7OztBQUNGLHNCQUFZLElBQVosRUFBa0I7QUFBQTtBQUFBLDZCQUNSLGFBRFEsRUFFVjtBQUFDLE1BQUEsTUFBTSxFQUFFO0FBQUMsUUFBQSxJQUFJLEVBQUU7QUFBUDtBQUFULEtBRlU7QUFJakI7OztrREFMb0IsVzs7SUFRbkIsWTs7Ozs7QUFDRiwwQkFBYztBQUFBO0FBQUEsOEJBQ0osd0JBREk7QUFFYjs7Ozs7aUdBRUQ7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFFSSxxQkFBSyxnQkFBTCxDQUFzQixPQUF0QixFQUErQjtBQUFBLHlCQUFNLEtBQUksQ0FBQyxhQUFMLENBQW1CLGdCQUFuQixFQUFxQyxLQUFyQyxFQUFOO0FBQUEsaUJBQS9CO0FBRUEscUJBQUssYUFBTCxDQUFtQixnQkFBbkIsRUFBcUMsZ0JBQXJDLENBQXNELE1BQXRELDZGQUE4RDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDdEQsMEJBQUEsSUFEc0QsR0FDL0MsS0FBSSxDQUFDLGFBQUwsQ0FBbUIsZ0JBQW5CLEVBQXFDLElBRFU7O0FBRTFELDBCQUFBLEtBQUksQ0FBQyxhQUFMLENBQW1CLElBQUksVUFBSixDQUFlLElBQUksQ0FBQyxJQUFMLEVBQWYsQ0FBbkI7O0FBRjBEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLGlCQUE5RDs7QUFKSjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxPOzs7Ozs7Ozs7O1dBVUEsaUJBQVE7QUFDSixXQUFLLGFBQUwsQ0FBbUIsZ0JBQW5CLEVBQXFDLElBQXJDLEdBQTRDLEVBQTVDO0FBQ0g7OztXQUVELGlCQUFRLElBQVIsRUFBYztBQUNWLFdBQUssYUFBTCxDQUFtQixnQkFBbkIsRUFBcUMsSUFBckMsR0FBNEMsSUFBNUM7QUFDSDs7O0VBckJzQixhOztBQXdCM0IsTUFBTSxDQUFDLGNBQVAsQ0FBc0IsTUFBdEIsQ0FBNkIsZUFBN0IsRUFBOEMsWUFBOUM7QUFDQSxNQUFNLENBQUMsT0FBUCxHQUFpQixZQUFqQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbkNBLElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxtQkFBRCxDQUFQLENBQTZCLGFBQW5EOztJQUVNLFM7Ozs7O0FBQ0YsdUJBQWM7QUFBQTtBQUFBLDZCQUNKLHFCQURJO0FBRWI7Ozs7OzZHQUVEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDSSxxQkFBSyxlQUFMLEdBQXVCLEtBQUssU0FBNUI7QUFESjtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLE87Ozs7Ozs7Ozs7O2lHQUtBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUdJLHFCQUFLLE1BQUwseUJBQWMsS0FBSyxZQUFMLENBQWtCLFNBQVMsQ0FBQyxNQUE1QixDQUFkLG1FQUFxRCxJQUFyRDtBQUNNLGdCQUFBLElBSlYsR0FJaUIsS0FBSyxZQUFMLENBQWtCLFNBQVMsQ0FBQyxjQUE1QixDQUpqQjtBQUtJLHFCQUFLLEdBQUwsQ0FBUyxNQUFULEVBQWlCLFNBQWpCLEdBQTZCLElBQTdCO0FBRUEscUJBQUssT0FBTCxHQUFlLEtBQUssZUFBcEI7QUFFQSxxQkFBSyxnQkFBTCxDQUFzQixPQUF0QixFQUErQixZQUFJO0FBQy9CLGtCQUFBLEtBQUksQ0FBQyxHQUFMLENBQVMsU0FBVCxFQUFvQixLQUFwQjtBQUNILGlCQUZEO0FBSUEscUJBQUssR0FBTCxDQUFTLFNBQVQsRUFBb0IsZ0JBQXBCLENBQXFDLE9BQXJDLEVBQThDLFlBQUk7QUFDOUMsa0JBQUEsS0FBSSxDQUFDLEdBQUwsQ0FBUyxNQUFULEVBQWlCLFNBQWpCLEdBQTZCLEVBQTdCO0FBQ0gsaUJBRkQ7QUFJQSxxQkFBSyxHQUFMLENBQVMsU0FBVCxFQUFvQixnQkFBcEIsQ0FBcUMsTUFBckMsRUFBNkMsWUFBSTtBQUM3QyxzQkFBSSxLQUFJLENBQUMsR0FBTCxDQUFTLFNBQVQsRUFBb0IsU0FBcEIsQ0FBOEIsSUFBOUIsT0FBeUMsRUFBN0MsRUFBZ0Q7QUFDNUMsb0JBQUEsS0FBSSxDQUFDLEdBQUwsQ0FBUyxNQUFULEVBQWlCLFNBQWpCLEdBQTZCLElBQTdCO0FBQ0g7QUFDSixpQkFKRDtBQU1BLHFCQUFLLEdBQUwsQ0FBUyxTQUFULEVBQW9CLGdCQUFwQixDQUFxQyxVQUFyQyxFQUFpRCxVQUFDLEtBQUQ7QUFBQSx5QkFBUyxLQUFJLENBQUMsVUFBTCxDQUFnQixLQUFoQixDQUFUO0FBQUEsaUJBQWpEO0FBQ0EscUJBQUssR0FBTCxDQUFTLFNBQVQsRUFBb0IsZ0JBQXBCLENBQXFDLE9BQXJDLEVBQThDLFVBQUMsS0FBRDtBQUFBLHlCQUFTLEtBQUksQ0FBQyxPQUFMLENBQWEsS0FBYixDQUFUO0FBQUEsaUJBQTlDOztBQXhCSjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxPOzs7Ozs7Ozs7O1NBMkJBLGVBQWE7QUFDVCxVQUFNLE1BQU0sR0FBRyxLQUFLLEdBQUwsQ0FBUyxTQUFULEVBQW9CLFNBQW5DO0FBQ0EsYUFBTyxNQUFNLENBQUMsVUFBUCxDQUFrQixRQUFsQixFQUE0QixHQUE1QixDQUFQO0FBQ0gsSztTQUVELGFBQVksS0FBWixFQUFrQjtBQUNkLGFBQU8sS0FBSyxHQUFMLENBQVMsU0FBVCxFQUFvQixJQUFwQixHQUEyQixLQUFsQztBQUNIOzs7V0FFRCxrQkFBUyxLQUFULEVBQWdCO0FBQ1osVUFBSSxLQUFLLEdBQUcsUUFBUSxDQUFDLFdBQVQsRUFBWjtBQUNBLFVBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxZQUFQLEVBQVY7QUFFQSxNQUFBLEtBQUssQ0FBQyxRQUFOLENBQWUsS0FBSyxHQUFMLENBQVMsU0FBVCxFQUFvQixVQUFwQixDQUErQixDQUEvQixDQUFmLEVBQWtELEtBQWxEO0FBQ0EsTUFBQSxLQUFLLENBQUMsUUFBTixDQUFlLElBQWY7QUFFQSxNQUFBLEdBQUcsQ0FBQyxlQUFKO0FBQ0EsTUFBQSxHQUFHLENBQUMsUUFBSixDQUFhLEtBQWI7QUFDSDs7O1dBRUQsaUJBQVEsS0FBUixFQUFjO0FBQ1YsVUFBSSxLQUFLLE1BQUwsS0FBZ0IsRUFBcEIsRUFBd0I7QUFDeEIsVUFBTSxLQUFLLEdBQUcsS0FBSyxPQUFMLENBQWEsSUFBYixFQUFkO0FBQ0EsVUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLEtBQU4sQ0FBWSxNQUFNLEtBQUssTUFBWCxHQUFvQixHQUFoQyxDQUFSOztBQUNBLFVBQUksQ0FBQyxLQUFLLENBQUMsS0FBTixDQUFZLE1BQU0sS0FBSyxNQUFYLEdBQW9CLEdBQWhDLENBQUwsRUFBMEM7QUFDdEMsYUFBSyxPQUFMLEdBQWUsS0FBSyxXQUFwQjtBQUNBLGFBQUssUUFBTCxDQUFjLEtBQUssU0FBbkI7QUFDQSxRQUFBLEtBQUssQ0FBQyxlQUFOO0FBQ0EsUUFBQSxLQUFLLENBQUMsY0FBTjtBQUNILE9BTEQsTUFLTztBQUNILGFBQUssYUFBTCxDQUFtQixJQUFJLFdBQUosQ0FDZixhQURlLEVBRWY7QUFDSSxVQUFBLE9BQU8sRUFBRyxJQURkO0FBRUksVUFBQSxRQUFRLEVBQUcsSUFGZjtBQUdJLFVBQUEsTUFBTSxFQUFHO0FBQUMsWUFBQSxPQUFPLEVBQUcsS0FBSztBQUFoQjtBQUhiLFNBRmUsQ0FBbkI7QUFRSDtBQUNKOzs7V0FFRCxvQkFBVyxLQUFYLEVBQWtCO0FBQ2QsVUFBSSxLQUFLLENBQUMsS0FBTixLQUFnQixFQUFwQixFQUF1QjtBQUNuQixRQUFBLEtBQUssQ0FBQyxlQUFOO0FBQ0EsUUFBQSxLQUFLLENBQUMsY0FBTjtBQUNBLGFBQUssYUFBTCxDQUFtQixJQUFJLFdBQUosQ0FDZixZQURlLEVBRWY7QUFDSSxVQUFBLE9BQU8sRUFBRyxJQURkO0FBRUksVUFBQSxRQUFRLEVBQUcsSUFGZjtBQUdJLFVBQUEsTUFBTSxFQUFHO0FBQUMsWUFBQSxPQUFPLEVBQUcsS0FBSztBQUFoQjtBQUhiLFNBRmUsQ0FBbkI7QUFRSDs7QUFFRCxXQUFLLFdBQUwsR0FBbUIsS0FBSyxPQUF4QjtBQUNBLFdBQUssU0FBTCxHQUFpQixLQUFLLFVBQUwsQ0FBZ0IsWUFBaEIsR0FBK0IsWUFBaEQ7QUFDSDs7O0VBOUZtQixhOztBQWlHeEIsU0FBUyxDQUFDLE1BQVYsR0FBbUIsUUFBbkI7QUFDQSxTQUFTLENBQUMsY0FBVixHQUEyQixNQUEzQjtBQUNBLE1BQU0sQ0FBQyxjQUFQLENBQXNCLE1BQXRCLENBQTZCLFlBQTdCLEVBQTJDLFNBQTNDO0FBQ0EsTUFBTSxDQUFDLE9BQVAsR0FBaUIsU0FBakI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdEdBLElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxtQkFBRCxDQUFQLENBQTZCLGFBQW5EOztJQUVNLFc7Ozs7O0FBRUYseUJBQWM7QUFBQTtBQUFBLDZCQUNKLHVCQURJO0FBRWI7Ozs7V0FFRCxlQUFNLEtBQU4sRUFBWTtBQUFBOztBQUNSLFVBQUksS0FBSixFQUFXLEtBQUssR0FBTCxDQUFTLEtBQVQ7QUFDWCxXQUFLLE9BQUwsR0FBZSxVQUFVLENBQUM7QUFBQSxlQUFJLEtBQUksQ0FBQyxJQUFMLEVBQUo7QUFBQSxPQUFELEVBQWtCLEdBQWxCLENBQXpCO0FBQ0EsV0FBSyxPQUFMLEdBQWUsSUFBZjtBQUNIOzs7V0FFRCxnQkFBTTtBQUNGLFVBQUksS0FBSyxPQUFULEVBQWlCO0FBQ2IsYUFBSyxPQUFMLEdBQWUsS0FBZjtBQUNBLFFBQUEsWUFBWTtBQUNmO0FBQ0o7OztXQUVELGNBQUssS0FBTCxFQUFXO0FBQ1AsV0FBSyxhQUFMLENBQW1CLFFBQW5CLEVBQTZCLFNBQTdCLENBQXVDLE1BQXZDLENBQThDLE9BQTlDOztBQUNBLFVBQUksS0FBSixFQUFXO0FBQ1AsYUFBSyxhQUFMLENBQW1CLHFCQUFuQixFQUEwQyxTQUExQyxHQUFzRCxLQUF0RDtBQUNIOztBQUNEO0FBQ0g7OztXQUVELGdCQUFNO0FBQUE7O0FBQ0YsV0FBSyxhQUFMLENBQW1CLFFBQW5CLEVBQTZCLFNBQTdCLENBQXVDLE1BQXZDLENBQThDLE9BQTlDO0FBQ0EsTUFBQSxVQUFVLENBQ047QUFBQSxlQUFJLE1BQUksQ0FBQyxhQUFMLENBQW1CLFFBQW5CLEVBQTZCLFNBQTdCLENBQXVDLEdBQXZDLENBQTJDLE9BQTNDLENBQUo7QUFBQSxPQURNLEVBRU4sRUFGTSxDQUFWO0FBS0EsTUFBQSxVQUFVLENBQ047QUFBQSxlQUFJLE1BQUksQ0FBQyxhQUFMLENBQW1CLHFCQUFuQixFQUEwQyxTQUExQyxHQUFzRCxNQUFJLENBQUMsYUFBTCxDQUFtQixZQUFuQixFQUFpQyxTQUEzRjtBQUFBLE9BRE0sRUFFTixHQUZNLENBQVY7QUFJSDs7O1dBRUQsZ0JBQU07QUFBQTs7QUFDRixVQUFJLEtBQUssS0FBTCxHQUFhLENBQWIsSUFBa0IsS0FBSyxPQUEzQixFQUFvQztBQUNoQyxhQUFLLElBQUw7QUFDQSxhQUFLLE9BQUwsR0FBZSxVQUFVLENBQUM7QUFBQSxpQkFBSSxNQUFJLENBQUMsSUFBTCxFQUFKO0FBQUEsU0FBRCxFQUFrQixJQUFsQixDQUF6QjtBQUNIO0FBQ0o7OztXQUVELGFBQUksS0FBSixFQUFVO0FBQ04sV0FBSyxhQUFMLENBQW1CLGtCQUFuQixFQUF1QyxTQUF2QyxHQUFtRCxLQUFuRDtBQUNBLFdBQUssSUFBTDtBQUNIOzs7V0FFRCxjQUFLLFNBQUwsRUFBZTtBQUFBO0FBQUE7O0FBQ1gsTUFBQSxTQUFTLGlCQUFHLFNBQUgsbURBQWdCLEVBQUUsS0FBSyxLQUFoQztBQUNBLFdBQUssYUFBTCxDQUFtQixZQUFuQixFQUFpQyxTQUFqQyxHQUE2QyxTQUE3QztBQUNBLFdBQUssYUFBTCxDQUFtQixRQUFuQixFQUE2QixTQUE3QixDQUF1QyxNQUF2QyxDQUE4QyxPQUE5QztBQUVBLE1BQUEsVUFBVSxDQUNOO0FBQUEsZUFBSSxNQUFJLENBQUMsYUFBTCxDQUFtQixRQUFuQixFQUE2QixTQUE3QixDQUF1QyxHQUF2QyxDQUEyQyxPQUEzQyxDQUFKO0FBQUEsT0FETSxFQUVOLEdBRk0sQ0FBVjtBQUtBLE1BQUEsVUFBVSxDQUNOO0FBQUEsZUFBSSxNQUFJLENBQUMsYUFBTCxDQUFtQixxQkFBbkIsRUFBMEMsU0FBMUMsR0FBc0QsU0FBMUQ7QUFBQSxPQURNLEVBRU4sR0FGTSxDQUFWO0FBSUg7OztFQWxFcUIsYTs7QUFxRTFCLE1BQU0sQ0FBQyxjQUFQLENBQXNCLE1BQXRCLENBQTZCLGNBQTdCLEVBQTZDLFdBQTdDO0FBQ0EsTUFBTSxDQUFDLE9BQVAsR0FBaUIsV0FBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIndXNlIHN0cmljdCc7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIHByZWZpeDogXCJkYXRhLW5pZGdldFwiLFxyXG4gICAgZWxlbWVudEF0dHJpYnV0ZTogXCJkYXRhLW5pZGdldC1lbGVtZW50XCIsXHJcbiAgICBzcmNBdHRyaWJ1dGU6IFwic3JjXCIsXHJcbiAgICB0ZW1wbGF0ZVNyY0F0dHJpYnV0ZTogXCJ0ZW1wbGF0ZS1zcmNcIixcclxuICAgIG5hbWVBdHRyaWJ1dGU6IFwibmFtZVwiLFxyXG4gICAgaW50ZXJmYWNlQXR0cmlidXRlOiBcImludGVyZmFjZXNcIixcclxuICAgIHRlbXBsYXRlQXR0cmlidXRlOiBcInRlbXBsYXRlLWlkXCIsXHJcbiAgICBpbnRlcmZhY2VEYXRhRmllbGQ6IFwiaW50ZXJmYWNlRGF0YVwiLFxyXG4gICAgbW9kZWxEYXRhRmllbGQ6IFwibW9kZWxEYXRhXCIsXHJcbiAgICBzdHlsZUF0dHJpYnV0ZTogXCJuaWRnZXQtc3R5bGVcIlxyXG59OyIsIid1c2Ugc3RyaWN0JztcclxuY29uc3QgTmlkZ2V0RWxlbWVudCA9IHJlcXVpcmUoXCIuL05pZGdldEVsZW1lbnRcIik7XHJcblxyXG4vKiBnbG9iYWwgVXRpbGl0eSAqL1xyXG5jbGFzcyBGaWxlT3BlcmF0aW9ucyB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIG5ldyBkb20gZWxlbWVudCBmcm9tIGEgZmlsZSAodXJsKS4gIE1hcCB2YXJpYWJsZXMgKCR7Li4ufSkgdG8gXHJcbiAgICAgKiBhIHZhbHVlLlxyXG4gICAgICogQHBhcmFtIHt0eXBlfSB1cmxcclxuICAgICAqIEBwYXJhbSB7dHlwZX0gbWFwXHJcbiAgICAgKiBAcmV0dXJucyB7bm9kZXxGaWxlT3BlcmF0aW9ucy5sb2FkRE9NRWxlbWVudC5kb21FbGVtZW50fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgbG9hZE5pZGdldCh1cmwsIG1hcCl7ICAgICAgICBcclxuICAgICAgICBsZXQgZWxlbWVudCA9IGF3YWl0IEZpbGVPcGVyYXRpb25zLmxvYWRET01FbGVtZW50KHVybCwgbWFwKTtcclxuICAgICAgICByZXR1cm4gbmV3IE5pZGdldEVsZW1lbnQoZWxlbWVudCk7XHJcbiAgICB9ICAgIFxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIG5ldyBkb20gZWxlbWVudCBmcm9tIGEgZmlsZSAodXJsKS4gIE1hcCB2YXJpYWJsZXMgKCR7Li4ufSkgdG8gXHJcbiAgICAgKiBhIHZhbHVlLlxyXG4gICAgICogQHBhcmFtIHt0eXBlfSB1cmxcclxuICAgICAqIEBwYXJhbSB7dHlwZX0gbWFwXHJcbiAgICAgKiBAcmV0dXJucyB7bm9kZXxGaWxlT3BlcmF0aW9ucy5sb2FkRE9NRWxlbWVudC5kb21FbGVtZW50fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgbG9hZERPTUVsZW1lbnQodXJsLCBtYXAgPSBuZXcgTWFwKCkpeyAgICAgICAgXHJcbiAgICAgICAgaWYgKG1hcCBpbnN0YW5jZW9mIE1hcCA9PT0gZmFsc2UpIG1hcCA9IEZpbGVPcGVyYXRpb25zLm9iamVjdFRvTWFwKG1hcCk7ICAgICAgIFxyXG4gICAgICAgIGxldCB0ZXh0ID0gYXdhaXQgRmlsZU9wZXJhdGlvbnMuZ2V0VVJMKHVybCk7XHJcbiAgICAgICAgcmV0dXJuIEZpbGVPcGVyYXRpb25zLnN0cmluZ1RvRE9NRWxlbWVudCh0ZXh0LCBtYXApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgbmV3IGRvbSBlbGVtZW50IGZyb20gdGV4dC5cclxuICAgICAqIEBwYXJhbSB7dHlwZX0gdGV4dFxyXG4gICAgICogQHBhcmFtIHt0eXBlfSBtYXBcclxuICAgICAqIEByZXR1cm5zIHtub2RlfEZpbGVPcGVyYXRpb25zLmxvYWRET01FbGVtZW50LmRvbUVsZW1lbnR9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzdHJpbmdUb0RPTUVsZW1lbnQodGV4dCwgbWFwID0gbmV3IE1hcCgpKXtcclxuICAgICAgICAvKiByZXBsYWNlIHZhcmlhYmxlcyB3aXRoIHZhbHVlcyAqL1xyXG4gICAgICAgIGZvciAobGV0IGtleSBvZiBtYXAua2V5cygpKXsgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IHZhbHVlID0gbWFwLmdldChrZXkpO1xyXG4gICAgICAgICAgICBsZXQgcmVnZXggPSBuZXcgUmVnRXhwKGBbJF1be10/JHtrZXl9W31dYCwgYGdgKTtcclxuICAgICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShyZWdleCwgdmFsdWUpOyAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIHJlcGxhY2UgdW5maWxsZWQgdmFyaWFibGVzIHdpdGggZW1wdHkgKi9cclxuICAgICAgICBsZXQgcmVnZXggPSBuZXcgUmVnRXhwKGBbJF1be11bXn1dKlt9XWAsIGBnYCk7XHJcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShyZWdleCwgXCJcIik7IFxyXG5cclxuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gdGV4dDtcclxuICAgICAgICBsZXQgZG9tRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgY29uc29sZS5sb2coZWxlbWVudCk7XHJcblxyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBvYmplY3RUb01hcChvYmplY3Qpe1xyXG4gICAgICAgIGxldCBtYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgZm9yIChsZXQgZmllbGQgaW4gb2JqZWN0KXsgICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3RbZmllbGRdID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBvYmplY3RbZmllbGRdID09PSBcIm51bWJlclwiKXtcclxuICAgICAgICAgICAgICAgIG1hcC5zZXQoZmllbGQsIG9iamVjdFtmaWVsZF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYXA7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcblxyXG4gICAgLypcclxuICAgICAqIFRyYW5zZmVyIGNvbnRlbnRzIG9mICdmaWxlbmFtZScgZnJvbSBzZXJ2ZXIgdG8gY2xpZW50LlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVuYW1lXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdWNjZXNzQ2FsbGJhY2tcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGVycm9yQ2FsbGJhY2tcclxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IGNvbnRlbnRzIG9mIGZpbGVcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldFVSTCh1cmwpIHtcclxuICAgICAgICBsZXQgY2FsbGJhY2sgPSBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cclxuICAgICAgICAgICAgeGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHhodHRwLnJlYWR5U3RhdGUgPT09IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeGh0dHAuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHR0cC5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHR0cCA6IHhodHRwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzIDogeGh0dHAuc3RhdHVzLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgOiB4aHR0cC5yZXNwb25zZVRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgOiB1cmxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgeGh0dHAub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpO1xyXG4gICAgICAgICAgICB4aHR0cC5zZW5kKG51bGwpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShjYWxsYmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBuZXcgZG9tIGVsZW1lbnQgZnJvbSB0ZXh0LlxyXG4gICAgICogQHBhcmFtIHt0eXBlfSB0ZXh0XHJcbiAgICAgKiBAcGFyYW0ge3R5cGV9IG1hcFxyXG4gICAgICogQHJldHVybnMge25vZGV8RmlsZU9wZXJhdGlvbnMubG9hZERPTUVsZW1lbnQuZG9tRWxlbWVudH1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIGdldEZpbGUodXJsLCBtYXAgPSBuZXcgTWFwKCkpe1xyXG4gICAgICAgIGxldCB0ZXh0ID0gYXdhaXQgRmlsZU9wZXJhdGlvbnMuZ2V0VVJMKHVybCk7XHJcblxyXG4gICAgICAgIC8qIHJlcGxhY2UgdmFyaWFibGVzIHdpdGggdmFsdWVzICovXHJcbiAgICAgICAgZm9yIChsZXQga2V5IG9mIG1hcC5rZXlzKCkpe1xyXG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBtYXAuZ2V0KGtleSk7XHJcbiAgICAgICAgICAgIGxldCByZWdleCA9IG5ldyBSZWdFeHAoYFskXVt7XT8ke2tleX1bfV1gLCBgZ2ApO1xyXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHJlZ2V4LCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiByZXBsYWNlIHVuZmlsbGVkIHZhcmlhYmxlcyB3aXRoIGVtcHR5ICovXHJcbiAgICAgICAgbGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgWyRdW3tdW159XSpbfV1gLCBgZ2ApO1xyXG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UocmVnZXgsIFwiXCIpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGV4dDtcclxuICAgIH1cclxuXHJcbiAgICAvKlxyXG4gICAgICogVHJhbnNmZXIgY29udGVudHMgb2YgJ2ZpbGVuYW1lJyBmcm9tIHNlcnZlciB0byBjbGllbnQgdXNpbmcgY3VycmVudCB3aW5kb3cgbG9jYXRpb24uXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZW5hbWVcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHN1Y2Nlc3NDYWxsYmFja1xyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZXJyb3JDYWxsYmFja1xyXG4gICAgICogQHJldHVybnMge3VuZGVmaW5lZH1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldExvY2FsKGZpbGVuYW1lKSB7XHJcbiAgICAgICAgbGV0IGNhbGxiYWNrID0gZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcclxuICAgICAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmICsgXCIvXCIgKyBmaWxlbmFtZTtcclxuXHJcbiAgICAgICAgICAgIHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh4aHR0cC5yZWFkeVN0YXRlID09PSA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHhodHRwLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeGh0dHAucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoeGh0dHAuc3RhdHVzLCB4aHR0cC5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHhodHRwLm9wZW4oXCJHRVRcIiwgdXJsLCB0cnVlKTtcclxuICAgICAgICAgICAgeGh0dHAuc2VuZChKU09OLnN0cmluZ2lmeShkYXRhKSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGNhbGxiYWNrKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBDYXVzZSAndGV4dCcgdG8gYmUgc2F2ZWQgYXMgJ2ZpbGVuYW1lJyBjbGllbnQgc2lkZS5cclxuICAgICAqIEBwYXJhbSB7dHlwZX0gZmlsZW5hbWUgVGhlIGRlZmF1bHQgZmlsZW5hbWUgdG8gc2F2ZSB0aGUgdGV4dCBhcy5cclxuICAgICAqIEBwYXJhbSB7dHlwZX0gdGV4dCBUaGUgdGV4dCB0byBzYXZlIHRvIGZpbGVuYW1lLlxyXG4gICAgICogQHJldHVybnMge3VuZGVmaW5lZH1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNhdmVUb0ZpbGUodGV4dCwgZmlsZW5hbWUpIHtcclxuICAgICAgICBsZXQgYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgIGxldCBkYXRhID0gXCJ0ZXh0O2NoYXJzZXQ9dXRmLTgsXCIgKyBlbmNvZGVVUklDb21wb25lbnQodGV4dCk7XHJcbiAgICAgICAgYW5jaG9yLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgXCJkYXRhOlwiICsgZGF0YSk7XHJcbiAgICAgICAgYW5jaG9yLnNldEF0dHJpYnV0ZShcImRvd25sb2FkXCIsIGZpbGVuYW1lKTtcclxuICAgICAgICBhbmNob3IuY2xpY2soKTtcclxuICAgIH1cclxufVxyXG5cclxuRmlsZU9wZXJhdGlvbnMuTm9kZVR5cGUgPSB7XHJcbiAgICBFTEVNRU5UIDogMSxcclxuICAgIEFUVFJJQlVURSA6IDIsXHJcbiAgICBURVhUIDogMywgXHJcbiAgICBDREFUQVNFQ1RJT04gOiA0LFxyXG4gICAgRU5USVRZUkVGRVJOQ0UgOiA1LFxyXG4gICAgRU5USVRZIDogNixcclxuICAgIFBST0NFU1NJTkdJTlNUUlVDVElPTiA6IDcsXHJcbiAgICBDT01NRU5UIDogOCxcclxuICAgIERPQ1VNRU5UIDogOSxcclxuICAgIERPQ1VNRU5UVFlQRSA6IDEwLFxyXG4gICAgRE9DVU1FTlRGUkFHTUVOVCA6IDExLFxyXG4gICAgTk9UQVRJT04gOiAxMlxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBGaWxlT3BlcmF0aW9uczsiLCJcInVzZSBzdHJpY3RcIjtcclxuY29uc3QgRmlsZU9wZXJhdGlvbnMgPSByZXF1aXJlKFwiLi9GaWxlT3BlcmF0aW9uc1wiKTtcclxuY29uc3QgTmlkZ2V0ID0gcmVxdWlyZShcIi4vQ29uc3RhbnRzXCIpO1xyXG5cclxuLyoqXHJcbiAqIENhbGxpbmcgbWV0aG9kcyBvbiB0aGUgbmlkZ2V0IHdpbGwgdHJlYXQgc2hhZG93IGNvbnRlbnRzIGFzIHJlZ3VsYXIgY29udGVudHMuXHJcbiAqL1xyXG5jbGFzcyBOaWRnZXRFbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBuZXcgTmlkZ2V0IGFzc29jaWF0ZWQgd2l0aCAnZWxlbWVudCcuICBBbiBlcnJvciB3aWxsIGJlIHRocm93blxyXG4gICAgICogaWYgdGhlICdlbGVtZW50JyBpcyBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCBhIE5pZGdldC5cclxuICAgICAqIFxyXG4gICAgICogRGlzYWJsZWQgY2xhc3MgaW5kaWNhdGVzIHRoaXMgbmlkZ2V0IHdpbGwgaWdub3JlIG1vdXNlIGV2ZW50cy5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHt0eXBlfSBlbGVtZW50IEpRdWVyeSBzZWxlY3RvclxyXG4gICAgICogQHJldHVybiB7bm0kX05pZGdldC5OaWRnZXRFbGVtZW50fVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZUlkKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLm9ic2VydmVycyA9IHt9O1xyXG5cclxuICAgICAgICBpZiAodGVtcGxhdGVJZCl7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlUZW1wbGF0ZSh0ZW1wbGF0ZUlkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAgICBjb25uZWN0ZWRDYWxsYmFjayBpcyBpbnZva2VkIGVhY2ggdGltZSB0aGUgY3VzdG9tIGVsZW1lbnQgaXMgYXBwZW5kZWQgaW50byBhIGRvY3VtZW50LWNvbm5lY3RlZCBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgICAgIHRoaXMuc2hhZG93Q29udGVudHMgPSB0aGlzO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5oYXNBdHRyaWJ1dGUoTmlkZ2V0LnRlbXBsYXRlQXR0cmlidXRlKSl7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwbHlUZW1wbGF0ZSh0aGlzLmdldEF0dHJpYnV0ZShOaWRnZXQudGVtcGxhdGVBdHRyaWJ1dGUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZGV0ZWN0RE9NKCk7XHJcbiAgICAgICAgdGhpcy5yZWFkeSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGRldGVjdERPTSgpe1xyXG4gICAgICAgIHRoaXMuRE9NID0ge307XHJcbiAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMucXVlcnlTZWxlY3RvckFsbChcIltpZF1cIikpe1xyXG4gICAgICAgICAgICB0aGlzLkRPTVt0b0NhbWVsQ2FzZShlbGVtZW50LmlkKV0gPSBlbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIGEgbWFwIG9mIGFsbCBkYXRhIGF0dHJpYnV0ZXNcclxuICAgICAqIEByZXR1cm5zIHtNYXA8YW55LCBhbnk+fVxyXG4gICAgICovXHJcbiAgICBkYXRhQXR0cmlidXRlcygpIHtcclxuICAgICAgICBsZXQgbWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIGZvciAobGV0IGF0dHIgb2YgdGhpcy5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgIGlmIChhdHRyLm5hbWUuc3RhcnRzV2l0aChcImRhdGEtXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IGF0dHIubmFtZS5zdWJzdHIoNSk7XHJcbiAgICAgICAgICAgICAgICBtYXBbbmFtZV0gPSBhdHRyLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYXA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBdHRhY2ggYSBzaGFkb3cgZWxlbWVudCB3aXRoIHRoZSBjb250ZW50cyBvZiB0aGUgdGVtcGxhdGUgbmFtZWQgKHRlbXBsYXRlSUQpLlxyXG4gICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICovXHJcbiAgICBhc3luYyBhcHBseVRlbXBsYXRlKHRlbXBsYXRlSWQpIHtcclxuICAgICAgICBpZiAodGhpcy5zaGFkb3dSb290ICE9PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGVJZCk7XHJcblxyXG4gICAgICAgIGlmICghdGVtcGxhdGUpe1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBcIlRlbXBsYXRlICdcIiArIHRlbXBsYXRlSWQgKyBcIicgbm90IGZvdW5kXFxuXCIgK1xyXG4gICAgICAgICAgICAgICAgXCJIYXMgdGhlIC5lanMgZGlyZWN0aXZlIGJlZW4gYWRkZWQgdG8gdGhlIHNvdXJjZSBmaWxlP1xcblwiICtcclxuICAgICAgICAgICAgICAgIFwiPCUtIGluY2x1ZGUoJy4uL3BhcnRpYWxzL25pZGdldC10ZW1wbGF0ZXMnKTsgJT5cIlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGVtcGxhdGUudGFnTmFtZS50b1VwcGVyQ2FzZSgpICE9PSBcIlRFTVBMQVRFXCIpIHRocm93IG5ldyBFcnJvcihcIkVsZW1lbnQgd2l0aCBpZCAnXCIgKyB0ZW1wbGF0ZUlkICsgXCInIGlzIG5vdCBhIHRlbXBsYXRlLlwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coe21vZGU6ICdvcGVuJ30pLmFwcGVuZENoaWxkKHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZWFkeSgpe31cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgY29udGVudHMgb2YgZmlsZSBpbnRvIHRoaXMgZWxlbWVudC5cclxuICAgICAqIFJlcGxhY2UgYWxsICR7fSB2YXJpYWJsZXMgd2l0aCBjb250ZW50cyBvZiAnbWFwJy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmV0cmlldmVTb3VyY2UobWFwKXtcclxuICAgICAgICBsZXQgc3JjID0gdGhpcy5nZXRBdHRyaWJ1dGUoTmlkZ2V0LnNyY0F0dHJpYnV0ZSk7XHJcbiAgICAgICAgbGV0IHRleHQgPSBhd2FpdCBGaWxlT3BlcmF0aW9ucy5nZXRGaWxlKHNyYywgbWFwKTtcclxuICAgICAgICB0aGlzLmlubmVySFRNTCA9IHRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFzeW5jIGxvYWRUZW1wbGF0ZVNuaXBwZXQoZmlsZW5hbWUsIHRhZ25hbWUpe1xyXG4gICAgICAgIGxldCBpZCA9IGZpbGVuYW1lLnJlcGxhY2UoL1tcXC8vIC4tXSsvZywgXCJfXCIpO1xyXG5cclxuICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lkfWApKXtcclxuICAgICAgICAgICAgbGV0IHRleHQgPSBhd2FpdCBGaWxlT3BlcmF0aW9ucy5nZXRGaWxlKGZpbGVuYW1lKTtcclxuICAgICAgICAgICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSB0ZXh0O1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZCk7XHJcbiAgICAgICAgICAgIGlmICh0YWduYW1lKSB0ZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLW5pZGdldFwiLCB0YWduYW1lKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQodGVtcGxhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aWR9YCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGVsZSBvZiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRhZ25hbWUpKXtcclxuICAgICAgICAgICAgYXdhaXQgZWxlLmluamVjdFRlbXBsYXRlKHRlbXBsYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgJ2hpZGRlbicgY2xhc3MuXHJcbiAgICAgKi9cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZChcInNob3duXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkICdoaWRkZW4nIGNsYXNzLlxyXG4gICAgICovXHJcbiAgICBoaWRlKCkge1xyXG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcInNob3duXCIpO1xyXG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgZGlzYWJsZWQgZmxhZyB0aGF0IGlzIHJlYWQgYnkgbmlkZ2V0IG1vdXNlIGZ1bmN0aW9ucy5cclxuICAgICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAgICovXHJcbiAgICBzZXQgZGlzYWJsZWQodmFsdWUpe1xyXG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKE5pZGdldEVsZW1lbnQuRElTQUJMRURfQVRUUklCVVRFLCB2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGRpc2FibGVkIGZsYWcgdGhhdCBpcyByZWFkIGJ5IG5pZGdldCBtb3VzZSBmdW5jdGlvbnMuXHJcbiAgICAgKiBAcGFyYW0gdmFsdWVcclxuICAgICAqL1xyXG4gICAgZ2V0IGRpc2FibGVkKCl7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhc0F0dHJpYnV0ZShOaWRnZXRFbGVtZW50LkRJU0FCTEVEX0FUVFJJQlVURSkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoTmlkZ2V0RWxlbWVudC5ESVNBQkxFRF9BVFRSSUJVVEUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHRydWUgaWYgdGhpcyBlbGVtZW50IHdhcyB1bmRlciB0aGUgbW91c2UgZm9yIHRoZSBldmVudC5cclxuICAgICAqIEBwYXJhbSB7dHlwZX0gZXZlbnRcclxuICAgICAqIEBwYXJhbSB7dHlwZX0gZWxlbWVudFxyXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgaXNVbmRlck1vdXNlKGV2ZW50KSB7XHJcbiAgICAgICAgbGV0IHggPSBldmVudC5jbGllbnRYO1xyXG4gICAgICAgIGxldCB5ID0gZXZlbnQuY2xpZW50WTtcclxuICAgICAgICBsZXQgY3VycmVudCA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoeCwgeSk7XHJcblxyXG4gICAgICAgIHdoaWxlIChjdXJyZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGVyZm9ybSBhIHF1ZXJ5IHNlbGVjdGlvbiBvbiB0aGUgZWxlbWVudCwgbm90IHRoZSBzaGFkb3cgcm9vdC5cclxuICAgICAqL1xyXG4gICAgb3V0ZXJTZWxlY3RvcihzZWxlY3RvcnMpe1xyXG4gICAgICAgIHJldHVybiBzdXBlci5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQZXJmb3JtIGEgcXVlcnkgc2VsZWN0IGFsbCBvbiB0aGUgZWxlbWVudCwgbm90IHRoZSBzaGFkb3cgcm9vdC5cclxuICAgICAqL1xyXG4gICAgb3V0ZXJTZWxlY3RvckFsbChzZWxlY3RvcnMpe1xyXG4gICAgICAgIHJldHVybiBzdXBlci5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSdW4gdGhlIHF1ZXJ5IHNlbGVjdG9yIG9uIHRoaXMgZWxlbWVudC5cclxuICAgICAqIElmIHRoaXMgZWxlbWVudCBoYXMgYSBzaGFkb3csIHJ1biBpdCBvbiB0aGF0IGluc3RlYWQuXHJcbiAgICAgKiBAcGFyYW0gc2VsZWN0b3JzXHJcbiAgICAgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnRUYWdOYW1lTWFwW0tdfVxyXG4gICAgICovXHJcbiAgIHF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hhZG93Um9vdCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUnVuIHRoZSBxdWVyeSBzZWxlY3RvciBvbiB0aGlzIGVsZW1lbnQuXHJcbiAgICAgKiBJZiB0aGlzIGVsZW1lbnQgaGFzIGEgc2hhZG93LCBydW4gaXQgb24gdGhhdCBpbnN0ZWFkLlxyXG4gICAgICogQHBhcmFtIHNlbGVjdG9yc1xyXG4gICAgICogQHJldHVybnMge0hUTUxFbGVtZW50VGFnTmFtZU1hcFtLXX1cclxuICAgICAqL1xyXG4gICAgcXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMpIHtcclxuICAgICAgICBpZiAodGhpcy5zaGFkb3dSb290KXtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgdGhpcyBlbGVtZW50IGZyb20gaXQncyBwYXJlbnQuXHJcbiAgICAgKi9cclxuICAgIGRldGFjaCgpe1xyXG4gICAgICAgIHRoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEluZGV4IHdpdGhpbiB0aGUgcGFyZW50IGVsZW1lbnQuXHJcbiAgICAgKi9cclxuICAgIGluZGV4KCl7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5wYXJlbnRFbGVtZW50LmNoaWxkcmVuKS5pbmRleE9mKHRoaXMpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB0b0NhbWVsQ2FzZShpbnB1dCl7XHJcbiAgICBjb25zdCBzcGxpdCA9IGlucHV0LnNwbGl0KFwiLVwiKTtcclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc3BsaXQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBzcGxpdFtpXSA9IHNwbGl0W2ldLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3BsaXRbaV0uc2xpY2UoMSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3BsaXQuam9pbignJyk7XHJcbn1cclxuXHJcbk5pZGdldEVsZW1lbnQuRElTQUJMRURfQVRUUklCVVRFID0gXCJuaWRnZXQtZGlzYWJsZWRcIjtcclxuaWYgKCF3aW5kb3cuY3VzdG9tRWxlbWVudHMuZ2V0KCduaWRnZXQtZWxlbWVudCcpKSB7XHJcbiAgICB3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCduaWRnZXQtZWxlbWVudCcsIE5pZGdldEVsZW1lbnQpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE5pZGdldEVsZW1lbnQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmNvbnN0IE5pZGdldEVsZW1lbnQgPSByZXF1aXJlKFwiLi4vTmlkZ2V0RWxlbWVudFwiKTtcclxuXHJcbi8qKlxyXG4gKiBTZXQgdGhlIGZvbnQtc2l6ZSBhcyBhIG11bHRpcGxlIG9mIHRoZSBjc3MgdmFyaWFibGUgLS1maXQtdGV4dC11bml0LlxyXG4gKiBTdHlsZSBleGFtcGxlOiBjYWxjKDQ1ICogdmFyKC0tZml0LXRleHQtdW5pdCkpXHJcbiAqL1xyXG5jbGFzcyBGaXRUZXh0IHtcclxuICAgIGNvbnN0cnVjdG9yKG5pZGdldCl7XHJcbiAgICAgICAgdGhpcy5uaWRnZXQgPSBuaWRnZXQ7XHJcbiAgICAgICAgdGhpcy5wYXJzZUFyZ3VtZW50cygpO1xyXG4gICAgICAgIHRoaXMuY29lZmZpY2llbnQgPSB0aGlzLmV4dHJhY3RVbml0cygpO1xyXG4gICAgICAgIHRoaXMubGFzdENvZWZmaWNpZW50ID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5sYXN0ID0ge1xyXG4gICAgICAgICAgICBoRGlmZjogdGhpcy5uaWRnZXQucGFyZW50RWxlbWVudC5vZmZzZXRIZWlnaHQgLSB0aGlzLm5pZGdldC5zY3JvbGxIZWlnaHQsXHJcbiAgICAgICAgICAgIHdEaWZmOiB0aGlzLm5pZGdldC5wYXJlbnRFbGVtZW50Lm9mZnNldFdpZHRoIC0gdGhpcy5uaWRnZXQuc2Nyb2xsV2lkdGhcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGV4dHJhY3RVbml0cygpe1xyXG4gICAgICAgIGNvbnN0IGZvbnRTaXplID0gdGhpcy5uaWRnZXQuc3R5bGUuZm9udFNpemU7XHJcbiAgICAgICAgaWYgKGZvbnRTaXplID09PSBcIlwiKSByZXR1cm4gMTtcclxuICAgICAgICBpZiAoIWZvbnRTaXplLmVuZHNXaXRoKFwiICogdmFyKC0tZml0LXRleHQtdW5pdCkpXCIpKSByZXR1cm4gMTtcclxuICAgICAgICBpZiAoIWZvbnRTaXplLnN0YXJ0c1dpdGgoXCJjYWxjKFwiKSkgcmV0dXJuIDE7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZUludChmb250U2l6ZS5zdWJzdHIoXCJjYWxjKFwiLmxlbmd0aCkpO1xyXG4gICAgICAgIGlmICghdmFsdWUgfHwgdmFsdWUgPCAxKSByZXR1cm4gMTtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgbm90aWZ5KGNiKXtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IDA7XHJcbiAgICAgICAgc2V0SW1tZWRpYXRlKCgpPT50aGlzLm9uUmVzaXplKGNiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSB0aGUgc2V0dGluZ3MgZnJvbSBjc3NcclxuICAgICAqL1xyXG4gICAgcGFyc2VBcmd1bWVudHMoKXtcclxuICAgICAgICBsZXQgYXJncyA9IGdldENvbXB1dGVkU3R5bGUodGhpcy5uaWRnZXQpLmdldFByb3BlcnR5VmFsdWUoXCItLW5pZGdldC1maXQtdGV4dFwiKTtcclxuXHJcbiAgICAgICAgaWYgKCFhcmdzIHx8IGFyZ3MgPT09IGZhbHNlKXtcclxuICAgICAgICAgICAgdGhpcy5oVmFsdWUgPSAxO1xyXG4gICAgICAgICAgICB0aGlzLndWYWx1ZSA9IDE7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YoYXJncykgPT0gXCJzdHJpbmdcIil7XHJcbiAgICAgICAgICAgIGlmIChhcmdzLnNlYXJjaChcImhlaWdodFwiKSAhPT0gLTEpIHRoaXMuaFZhbHVlID0gMTtcclxuICAgICAgICAgICAgaWYgKGFyZ3Muc2VhcmNoKFwid2lkdGhcIikgIT09IC0xKSB0aGlzLndWYWx1ZSA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRml0IHRoZSB0ZXh0IGVsZW1lbnQgdG8gaXQncyBwYXJlbnQgZWxlbWVudC5cclxuICAgICAqIEBwYXJhbSBoVmFsdWUgdHJ1ZSwgZml0IHRoZSBoZWlnaHRcclxuICAgICAqIEBwYXJhbSB3VmFsdWUgdHJ1ZSwgZml0IHRoZSB3aWR0aFxyXG4gICAgICovXHJcbiAgICBvblJlc2l6ZShjYil7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMudGltZW91dDtcclxuICAgICAgICBjYiA9IGNiID8/IGZ1bmN0aW9uKCl7fTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubmlkZ2V0LnRleHRDb250ZW50ID09PSBcIlwiKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHRoaXMubmlkZ2V0LnBhcmVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0ID09PSAwKSByZXR1cm47XHJcbiAgICAgICAgaWYgKHRoaXMubmlkZ2V0LnBhcmVudEVsZW1lbnQub2Zmc2V0V2lkdGggPT09IDApIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5uaWRnZXQuc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIpIHJldHVybjtcclxuICAgICAgICBpZiAoIXRoaXMuaFZhbHVlICYmICF0aGlzLndWYWx1ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBoRGlmZiBncm93dGggZGlyZWN0aW9uIGR1ZSB0byBoZWlnaHRcclxuICAgICAgICAvLyB3RGlmZiBncm93dGggZGlyZWN0aW9uIGR1ZSB0byB3aWR0aFxyXG4gICAgICAgIGxldCBoRGlmZiA9IHRoaXMubmlkZ2V0LnBhcmVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0IC0gdGhpcy5uaWRnZXQuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgICAgIGxldCB3RGlmZiA9IHRoaXMubmlkZ2V0LnBhcmVudEVsZW1lbnQub2Zmc2V0V2lkdGggLSB0aGlzLm5pZGdldC5zY3JvbGxXaWR0aDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubGFzdC5oRGlmZiA9PT0gaERpZmYgJiYgdGhpcy5sYXN0LndEaWZmID09PSB3RGlmZikge1xyXG4gICAgICAgICAgICBjYih0aGlzLm5pZGdldC5zdHlsZS5mb250U2l6ZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5oVmFsdWUpIGhEaWZmID0gMDtcclxuICAgICAgICBpZiAoIXRoaXMud1ZhbHVlKSB3RGlmZiA9IDA7XHJcblxyXG4gICAgICAgIGxldCBkaXIgPSBNYXRoLnNpZ24oaERpZmYgfCB3RGlmZik7IC8vIHdpbGwgcHJlZmVyIHRvIHNocmlua1xyXG4gICAgICAgIGNvbnN0IG5ld0NvZWZmaWNpZW50ID0gdGhpcy5jb2VmZmljaWVudCArIGRpcjtcclxuXHJcbiAgICAgICAgY29uc3QgZm9udFNpemUgPSBgY2FsYygke25ld0NvZWZmaWNpZW50fSAqIHZhcigtLWZpdC10ZXh0LXVuaXQpKWA7XHJcbiAgICAgICAgaWYgKG5ld0NvZWZmaWNpZW50ICE9PSB0aGlzLmNvZWZmaWNpZW50ICYmIG5ld0NvZWZmaWNpZW50ICE9PSB0aGlzLmxhc3RDb2VmZmljaWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLm5pZGdldC5zdHlsZS5vcGFjaXR5ID0gMC4wO1xyXG4gICAgICAgICAgICB0aGlzLm5pZGdldC5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RDb2VmZmljaWVudCA9IHRoaXMuY29lZmZpY2llbnQ7XHJcbiAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnQgPSBuZXdDb2VmZmljaWVudDtcclxuICAgICAgICAgICAgdGhpcy50aW1lb3V0ID0gc2V0SW1tZWRpYXRlKCgpPT50aGlzLm9uUmVzaXplKGNiKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5uaWRnZXQuc3R5bGUub3BhY2l0eSA9IDEuMDtcclxuICAgICAgICAgICAgdGhpcy5sYXN0Q29lZmZpY2llbnQgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3QgPSB7aERpZmY6IGhEaWZmLCB3RGlmZjogd0RpZmZ9O1xyXG4gICAgICAgICAgICBjYihmb250U2l6ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQSBuaWRnZXQgZWxlbWVudCBmb3IgZGlzcGxheWluZyB0ZXh0LlxyXG4gKiBwdXQgJy0tbmlkZ2V0LWZpdC10ZXh0OiAxLjA7JyBpbnRvIGNzcyBmb3IgdGhpcyBlbGVtZW50IHRvIGVuYWJsZSBzY2FsaW5nLlxyXG4gKiBzZWU6IE5pZGdldFN0eWxlLmpzXHJcbiAqL1xyXG5jbGFzcyBOaWRnZXRUZXh0IGV4dGVuZHMgTmlkZ2V0RWxlbWVudCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmUoKXtcclxuICAgICAgICBzdXBlci5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZml0VGV4dCgpe1xyXG4gICAgICAgIGlmICghdGhpcy5fZml0VGV4dCkgdGhpcy5fZml0VGV4dCA9IG5ldyBGaXRUZXh0KHRoaXMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maXRUZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xyXG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHRleHQodmFsdWUpe1xyXG4gICAgICAgIHRoaXMuaW5uZXJUZXh0ID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHRleHQoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbm5lclRleHQ7XHJcbiAgICB9XHJcbn1cclxuO1xyXG5cclxuaWYgKCF3aW5kb3cuY3VzdG9tRWxlbWVudHMuZ2V0KCduaWRnZXQtdGV4dCcpKSB7XHJcbiAgICB3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCduaWRnZXQtdGV4dCcsIE5pZGdldFRleHQpO1xyXG59XHJcbm1vZHVsZS5leHBvcnRzID0gTmlkZ2V0VGV4dDsiLCIndXNlIHN0cmljdCc7XHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgTmlkZ2V0RWxlbWVudCA6IHJlcXVpcmUoXCIuL05pZGdldEVsZW1lbnRcIiksXHJcbiAgICBOaWRnZXRUZXh0IDogcmVxdWlyZShcIi4vbmlkZ2V0LWNvbXBvbmVudHMvTmlkZ2V0VGV4dFwiKSxcclxuICAgIENvbnN0YW50czogcmVxdWlyZShcIi4vQ29uc3RhbnRzXCIpLFxyXG59OyIsImZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikge1xuICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIHNlbGY7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2Fzc2VydFRoaXNJbml0aWFsaXplZDtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7XG4gIHRyeSB7XG4gICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpO1xuICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVqZWN0KGVycm9yKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaW5mby5kb25lKSB7XG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cbiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJuZXh0XCIsIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwidGhyb3dcIiwgZXJyKTtcbiAgICAgIH1cblxuICAgICAgX25leHQodW5kZWZpbmVkKTtcbiAgICB9KTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXN5bmNUb0dlbmVyYXRvcjtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jbGFzc0NhbGxDaGVjaztcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJ2YXIgc2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKFwiLi9zZXRQcm90b3R5cGVPZi5qc1wiKTtcblxudmFyIGlzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IHJlcXVpcmUoXCIuL2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdC5qc1wiKTtcblxuZnVuY3Rpb24gX2NvbnN0cnVjdChQYXJlbnQsIGFyZ3MsIENsYXNzKSB7XG4gIGlmIChpc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSkge1xuICAgIG1vZHVsZS5leHBvcnRzID0gX2NvbnN0cnVjdCA9IFJlZmxlY3QuY29uc3RydWN0O1xuICAgIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IF9jb25zdHJ1Y3QgPSBmdW5jdGlvbiBfY29uc3RydWN0KFBhcmVudCwgYXJncywgQ2xhc3MpIHtcbiAgICAgIHZhciBhID0gW251bGxdO1xuICAgICAgYS5wdXNoLmFwcGx5KGEsIGFyZ3MpO1xuICAgICAgdmFyIENvbnN0cnVjdG9yID0gRnVuY3Rpb24uYmluZC5hcHBseShQYXJlbnQsIGEpO1xuICAgICAgdmFyIGluc3RhbmNlID0gbmV3IENvbnN0cnVjdG9yKCk7XG4gICAgICBpZiAoQ2xhc3MpIHNldFByb3RvdHlwZU9mKGluc3RhbmNlLCBDbGFzcy5wcm90b3R5cGUpO1xuICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH07XG5cbiAgICBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG4gIH1cblxuICByZXR1cm4gX2NvbnN0cnVjdC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jb25zdHJ1Y3Q7XG5tb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jcmVhdGVDbGFzcztcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJ2YXIgc3VwZXJQcm9wQmFzZSA9IHJlcXVpcmUoXCIuL3N1cGVyUHJvcEJhc2UuanNcIik7XG5cbmZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHtcbiAgaWYgKHR5cGVvZiBSZWZsZWN0ICE9PSBcInVuZGVmaW5lZFwiICYmIFJlZmxlY3QuZ2V0KSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBfZ2V0ID0gUmVmbGVjdC5nZXQ7XG4gICAgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIG1vZHVsZS5leHBvcnRzID0gX2dldCA9IGZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHtcbiAgICAgIHZhciBiYXNlID0gc3VwZXJQcm9wQmFzZSh0YXJnZXQsIHByb3BlcnR5KTtcbiAgICAgIGlmICghYmFzZSkgcmV0dXJuO1xuICAgICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGJhc2UsIHByb3BlcnR5KTtcblxuICAgICAgaWYgKGRlc2MuZ2V0KSB7XG4gICAgICAgIHJldHVybiBkZXNjLmdldC5jYWxsKHJlY2VpdmVyKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRlc2MudmFsdWU7XG4gICAgfTtcblxuICAgIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBfZ2V0KHRhcmdldCwgcHJvcGVydHksIHJlY2VpdmVyIHx8IHRhcmdldCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2dldDtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2Yobykge1xuICBtb2R1bGUuZXhwb3J0cyA9IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtcbiAgfTtcbiAgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9nZXRQcm90b3R5cGVPZjtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJ2YXIgc2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKFwiLi9zZXRQcm90b3R5cGVPZi5qc1wiKTtcblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7XG4gIH1cblxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuICBpZiAoc3VwZXJDbGFzcykgc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9pbmhlcml0cztcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDoge1xuICAgIFwiZGVmYXVsdFwiOiBvYmpcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0O1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsImZ1bmN0aW9uIF9pc05hdGl2ZUZ1bmN0aW9uKGZuKSB7XG4gIHJldHVybiBGdW5jdGlvbi50b1N0cmluZy5jYWxsKGZuKS5pbmRleE9mKFwiW25hdGl2ZSBjb2RlXVwiKSAhPT0gLTE7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2lzTmF0aXZlRnVuY3Rpb247XG5tb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwiZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHtcbiAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlO1xuICBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlO1xuICBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlO1xuXG4gIHRyeSB7XG4gICAgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdDtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJ2YXIgX3R5cGVvZiA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3R5cGVvZlwiKVtcImRlZmF1bHRcIl07XG5cbnZhciBhc3NlcnRUaGlzSW5pdGlhbGl6ZWQgPSByZXF1aXJlKFwiLi9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQuanNcIik7XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcbiAgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHtcbiAgICByZXR1cm4gY2FsbDtcbiAgfVxuXG4gIHJldHVybiBhc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm47XG5tb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwiZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgICBvLl9fcHJvdG9fXyA9IHA7XG4gICAgcmV0dXJuIG87XG4gIH07XG5cbiAgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9zZXRQcm90b3R5cGVPZjtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJ2YXIgZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKFwiLi9nZXRQcm90b3R5cGVPZi5qc1wiKTtcblxuZnVuY3Rpb24gX3N1cGVyUHJvcEJhc2Uob2JqZWN0LCBwcm9wZXJ0eSkge1xuICB3aGlsZSAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSkge1xuICAgIG9iamVjdCA9IGdldFByb3RvdHlwZU9mKG9iamVjdCk7XG4gICAgaWYgKG9iamVjdCA9PT0gbnVsbCkgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gb2JqZWN0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9zdXBlclByb3BCYXNlO1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gIFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjtcblxuICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICAgICAgcmV0dXJuIHR5cGVvZiBvYmo7XG4gICAgfTtcblxuICAgIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XG4gICAgfTtcblxuICAgIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBfdHlwZW9mKG9iaik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3R5cGVvZjtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJ2YXIgZ2V0UHJvdG90eXBlT2YgPSByZXF1aXJlKFwiLi9nZXRQcm90b3R5cGVPZi5qc1wiKTtcblxudmFyIHNldFByb3RvdHlwZU9mID0gcmVxdWlyZShcIi4vc2V0UHJvdG90eXBlT2YuanNcIik7XG5cbnZhciBpc05hdGl2ZUZ1bmN0aW9uID0gcmVxdWlyZShcIi4vaXNOYXRpdmVGdW5jdGlvbi5qc1wiKTtcblxudmFyIGNvbnN0cnVjdCA9IHJlcXVpcmUoXCIuL2NvbnN0cnVjdC5qc1wiKTtcblxuZnVuY3Rpb24gX3dyYXBOYXRpdmVTdXBlcihDbGFzcykge1xuICB2YXIgX2NhY2hlID0gdHlwZW9mIE1hcCA9PT0gXCJmdW5jdGlvblwiID8gbmV3IE1hcCgpIDogdW5kZWZpbmVkO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gX3dyYXBOYXRpdmVTdXBlciA9IGZ1bmN0aW9uIF93cmFwTmF0aXZlU3VwZXIoQ2xhc3MpIHtcbiAgICBpZiAoQ2xhc3MgPT09IG51bGwgfHwgIWlzTmF0aXZlRnVuY3Rpb24oQ2xhc3MpKSByZXR1cm4gQ2xhc3M7XG5cbiAgICBpZiAodHlwZW9mIENsYXNzICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIF9jYWNoZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgaWYgKF9jYWNoZS5oYXMoQ2xhc3MpKSByZXR1cm4gX2NhY2hlLmdldChDbGFzcyk7XG5cbiAgICAgIF9jYWNoZS5zZXQoQ2xhc3MsIFdyYXBwZXIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFdyYXBwZXIoKSB7XG4gICAgICByZXR1cm4gY29uc3RydWN0KENsYXNzLCBhcmd1bWVudHMsIGdldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yKTtcbiAgICB9XG5cbiAgICBXcmFwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogV3JhcHBlcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gc2V0UHJvdG90eXBlT2YoV3JhcHBlciwgQ2xhc3MpO1xuICB9O1xuXG4gIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbiAgcmV0dXJuIF93cmFwTmF0aXZlU3VwZXIoQ2xhc3MpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF93cmFwTmF0aXZlU3VwZXI7XG5tb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicmVnZW5lcmF0b3ItcnVudGltZVwiKTtcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbnZhciBydW50aW1lID0gKGZ1bmN0aW9uIChleHBvcnRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBPcCA9IE9iamVjdC5wcm90b3R5cGU7XG4gIHZhciBoYXNPd24gPSBPcC5oYXNPd25Qcm9wZXJ0eTtcbiAgdmFyIHVuZGVmaW5lZDsgLy8gTW9yZSBjb21wcmVzc2libGUgdGhhbiB2b2lkIDAuXG4gIHZhciAkU3ltYm9sID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiID8gU3ltYm9sIDoge307XG4gIHZhciBpdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuaXRlcmF0b3IgfHwgXCJAQGl0ZXJhdG9yXCI7XG4gIHZhciBhc3luY0l0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCI7XG4gIHZhciB0b1N0cmluZ1RhZ1N5bWJvbCA9ICRTeW1ib2wudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG5cbiAgZnVuY3Rpb24gZGVmaW5lKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIG9ialtrZXldO1xuICB9XG4gIHRyeSB7XG4gICAgLy8gSUUgOCBoYXMgYSBicm9rZW4gT2JqZWN0LmRlZmluZVByb3BlcnR5IHRoYXQgb25seSB3b3JrcyBvbiBET00gb2JqZWN0cy5cbiAgICBkZWZpbmUoe30sIFwiXCIpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBkZWZpbmUgPSBmdW5jdGlvbihvYmosIGtleSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiBvYmpba2V5XSA9IHZhbHVlO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCBhbmQgb3V0ZXJGbi5wcm90b3R5cGUgaXMgYSBHZW5lcmF0b3IsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuXG4gICAgdmFyIHByb3RvR2VuZXJhdG9yID0gb3V0ZXJGbiAmJiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvciA/IG91dGVyRm4gOiBHZW5lcmF0b3I7XG4gICAgdmFyIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKTtcbiAgICB2YXIgY29udGV4dCA9IG5ldyBDb250ZXh0KHRyeUxvY3NMaXN0IHx8IFtdKTtcblxuICAgIC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuXG4gICAgZ2VuZXJhdG9yLl9pbnZva2UgPSBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuXG4gICAgcmV0dXJuIGdlbmVyYXRvcjtcbiAgfVxuICBleHBvcnRzLndyYXAgPSB3cmFwO1xuXG4gIC8vIFRyeS9jYXRjaCBoZWxwZXIgdG8gbWluaW1pemUgZGVvcHRpbWl6YXRpb25zLiBSZXR1cm5zIGEgY29tcGxldGlvblxuICAvLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGRcbiAgLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlXG4gIC8vIGludm9rZWQgd2l0aG91dCBhcmd1bWVudHMsIGJ1dCBpbiBhbGwgdGhlIGNhc2VzIHdlIGNhcmUgYWJvdXQgd2VcbiAgLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZFxuICAvLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nXG4gIC8vIHRoZSBtZXRob2QgdGFrZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIHNpbmNlIHRoYXQgaGFwcGVucyB0byBiZSB0cnVlXG4gIC8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZVxuICAvLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoXG4gIC8vIGhhcyBhIHN0YWJsZSBzaGFwZSBhbmQgc28gaG9wZWZ1bGx5IHNob3VsZCBiZSBjaGVhcCB0byBhbGxvY2F0ZS5cbiAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwibm9ybWFsXCIsIGFyZzogZm4uY2FsbChvYmosIGFyZykgfTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwidGhyb3dcIiwgYXJnOiBlcnIgfTtcbiAgICB9XG4gIH1cblxuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRTdGFydCA9IFwic3VzcGVuZGVkU3RhcnRcIjtcbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSBcInN1c3BlbmRlZFlpZWxkXCI7XG4gIHZhciBHZW5TdGF0ZUV4ZWN1dGluZyA9IFwiZXhlY3V0aW5nXCI7XG4gIHZhciBHZW5TdGF0ZUNvbXBsZXRlZCA9IFwiY29tcGxldGVkXCI7XG5cbiAgLy8gUmV0dXJuaW5nIHRoaXMgb2JqZWN0IGZyb20gdGhlIGlubmVyRm4gaGFzIHRoZSBzYW1lIGVmZmVjdCBhc1xuICAvLyBicmVha2luZyBvdXQgb2YgdGhlIGRpc3BhdGNoIHN3aXRjaCBzdGF0ZW1lbnQuXG4gIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307XG5cbiAgLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kXG4gIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvclxuICAvLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91clxuICAvLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLlxuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cblxuICAvLyBUaGlzIGlzIGEgcG9seWZpbGwgZm9yICVJdGVyYXRvclByb3RvdHlwZSUgZm9yIGVudmlyb25tZW50cyB0aGF0XG4gIC8vIGRvbid0IG5hdGl2ZWx5IHN1cHBvcnQgaXQuXG4gIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuICBJdGVyYXRvclByb3RvdHlwZVtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICB2YXIgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90byAmJiBnZXRQcm90byhnZXRQcm90byh2YWx1ZXMoW10pKSk7XG4gIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJlxuICAgICAgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmXG4gICAgICBoYXNPd24uY2FsbChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wpKSB7XG4gICAgLy8gVGhpcyBlbnZpcm9ubWVudCBoYXMgYSBuYXRpdmUgJUl0ZXJhdG9yUHJvdG90eXBlJTsgdXNlIGl0IGluc3RlYWRcbiAgICAvLyBvZiB0aGUgcG9seWZpbGwuXG4gICAgSXRlcmF0b3JQcm90b3R5cGUgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTtcbiAgfVxuXG4gIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9XG4gICAgR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUpO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHcC5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9IGRlZmluZShcbiAgICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSxcbiAgICB0b1N0cmluZ1RhZ1N5bWJvbCxcbiAgICBcIkdlbmVyYXRvckZ1bmN0aW9uXCJcbiAgKTtcblxuICAvLyBIZWxwZXIgZm9yIGRlZmluaW5nIHRoZSAubmV4dCwgLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzIG9mIHRoZVxuICAvLyBJdGVyYXRvciBpbnRlcmZhY2UgaW4gdGVybXMgb2YgYSBzaW5nbGUgLl9pbnZva2UgbWV0aG9kLlxuICBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMocHJvdG90eXBlKSB7XG4gICAgW1wibmV4dFwiLCBcInRocm93XCIsIFwicmV0dXJuXCJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICBkZWZpbmUocHJvdG90eXBlLCBtZXRob2QsIGZ1bmN0aW9uKGFyZykge1xuICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKG1ldGhvZCwgYXJnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgdmFyIGN0b3IgPSB0eXBlb2YgZ2VuRnVuID09PSBcImZ1bmN0aW9uXCIgJiYgZ2VuRnVuLmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiBjdG9yXG4gICAgICA/IGN0b3IgPT09IEdlbmVyYXRvckZ1bmN0aW9uIHx8XG4gICAgICAgIC8vIEZvciB0aGUgbmF0aXZlIEdlbmVyYXRvckZ1bmN0aW9uIGNvbnN0cnVjdG9yLCB0aGUgYmVzdCB3ZSBjYW5cbiAgICAgICAgLy8gZG8gaXMgdG8gY2hlY2sgaXRzIC5uYW1lIHByb3BlcnR5LlxuICAgICAgICAoY3Rvci5kaXNwbGF5TmFtZSB8fCBjdG9yLm5hbWUpID09PSBcIkdlbmVyYXRvckZ1bmN0aW9uXCJcbiAgICAgIDogZmFsc2U7XG4gIH07XG5cbiAgZXhwb3J0cy5tYXJrID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGdlbkZ1biwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZW5GdW4uX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gICAgICBkZWZpbmUoZ2VuRnVuLCB0b1N0cmluZ1RhZ1N5bWJvbCwgXCJHZW5lcmF0b3JGdW5jdGlvblwiKTtcbiAgICB9XG4gICAgZ2VuRnVuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoR3ApO1xuICAgIHJldHVybiBnZW5GdW47XG4gIH07XG5cbiAgLy8gV2l0aGluIHRoZSBib2R5IG9mIGFueSBhc3luYyBmdW5jdGlvbiwgYGF3YWl0IHhgIGlzIHRyYW5zZm9ybWVkIHRvXG4gIC8vIGB5aWVsZCByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoeClgLCBzbyB0aGF0IHRoZSBydW50aW1lIGNhbiB0ZXN0XG4gIC8vIGBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpYCB0byBkZXRlcm1pbmUgaWYgdGhlIHlpZWxkZWQgdmFsdWUgaXNcbiAgLy8gbWVhbnQgdG8gYmUgYXdhaXRlZC5cbiAgZXhwb3J0cy5hd3JhcCA9IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiB7IF9fYXdhaXQ6IGFyZyB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIEFzeW5jSXRlcmF0b3IoZ2VuZXJhdG9yLCBQcm9taXNlSW1wbCkge1xuICAgIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goZ2VuZXJhdG9yW21ldGhvZF0sIGdlbmVyYXRvciwgYXJnKTtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHJlamVjdChyZWNvcmQuYXJnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQgPSByZWNvcmQuYXJnO1xuICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUuX19hd2FpdCkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaW52b2tlKFwibmV4dFwiLCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGludm9rZShcInRocm93XCIsIGVyciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uKHVud3JhcHBlZCkge1xuICAgICAgICAgIC8vIFdoZW4gYSB5aWVsZGVkIFByb21pc2UgaXMgcmVzb2x2ZWQsIGl0cyBmaW5hbCB2YWx1ZSBiZWNvbWVzXG4gICAgICAgICAgLy8gdGhlIC52YWx1ZSBvZiB0aGUgUHJvbWlzZTx7dmFsdWUsZG9uZX0+IHJlc3VsdCBmb3IgdGhlXG4gICAgICAgICAgLy8gY3VycmVudCBpdGVyYXRpb24uXG4gICAgICAgICAgcmVzdWx0LnZhbHVlID0gdW53cmFwcGVkO1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAvLyBJZiBhIHJlamVjdGVkIFByb21pc2Ugd2FzIHlpZWxkZWQsIHRocm93IHRoZSByZWplY3Rpb24gYmFja1xuICAgICAgICAgIC8vIGludG8gdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBzbyBpdCBjYW4gYmUgaGFuZGxlZCB0aGVyZS5cbiAgICAgICAgICByZXR1cm4gaW52b2tlKFwidGhyb3dcIiwgZXJyb3IsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBwcmV2aW91c1Byb21pc2U7XG5cbiAgICBmdW5jdGlvbiBlbnF1ZXVlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlSW1wbChmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJldmlvdXNQcm9taXNlID1cbiAgICAgICAgLy8gSWYgZW5xdWV1ZSBoYXMgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIHdlIHdhbnQgdG8gd2FpdCB1bnRpbFxuICAgICAgICAvLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSxcbiAgICAgICAgLy8gc28gdGhhdCByZXN1bHRzIGFyZSBhbHdheXMgZGVsaXZlcmVkIGluIHRoZSBjb3JyZWN0IG9yZGVyLiBJZlxuICAgICAgICAvLyBlbnF1ZXVlIGhhcyBub3QgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIGl0IGlzIGltcG9ydGFudCB0b1xuICAgICAgICAvLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSxcbiAgICAgICAgLy8gc28gdGhhdCB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhcyB0aGUgb3Bwb3J0dW5pdHkgdG8gZG9cbiAgICAgICAgLy8gYW55IG5lY2Vzc2FyeSBzZXR1cCBpbiBhIHByZWRpY3RhYmxlIHdheS4gVGhpcyBwcmVkaWN0YWJpbGl0eVxuICAgICAgICAvLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0c1xuICAgICAgICAvLyBleGVjdXRvciBjYWxsYmFjaywgYW5kIHdoeSBhc3luYyBmdW5jdGlvbnMgc3luY2hyb25vdXNseVxuICAgICAgICAvLyBleGVjdXRlIGNvZGUgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdC4gU2luY2Ugd2UgaW1wbGVtZW50IHNpbXBsZVxuICAgICAgICAvLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseVxuICAgICAgICAvLyBpbXBvcnRhbnQgdG8gZ2V0IHRoaXMgcmlnaHQsIGV2ZW4gdGhvdWdoIGl0IHJlcXVpcmVzIGNhcmUuXG4gICAgICAgIHByZXZpb3VzUHJvbWlzZSA/IHByZXZpb3VzUHJvbWlzZS50aGVuKFxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLFxuICAgICAgICAgIC8vIEF2b2lkIHByb3BhZ2F0aW5nIGZhaWx1cmVzIHRvIFByb21pc2VzIHJldHVybmVkIGJ5IGxhdGVyXG4gICAgICAgICAgLy8gaW52b2NhdGlvbnMgb2YgdGhlIGl0ZXJhdG9yLlxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnXG4gICAgICAgICkgOiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpO1xuICAgIH1cblxuICAgIC8vIERlZmluZSB0aGUgdW5pZmllZCBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbXBsZW1lbnQgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiAoc2VlIGRlZmluZUl0ZXJhdG9yTWV0aG9kcykuXG4gICAgdGhpcy5faW52b2tlID0gZW5xdWV1ZTtcbiAgfVxuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSk7XG4gIEFzeW5jSXRlcmF0b3IucHJvdG90eXBlW2FzeW5jSXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBleHBvcnRzLkFzeW5jSXRlcmF0b3IgPSBBc3luY0l0ZXJhdG9yO1xuXG4gIC8vIE5vdGUgdGhhdCBzaW1wbGUgYXN5bmMgZnVuY3Rpb25zIGFyZSBpbXBsZW1lbnRlZCBvbiB0b3Agb2ZcbiAgLy8gQXN5bmNJdGVyYXRvciBvYmplY3RzOyB0aGV5IGp1c3QgcmV0dXJuIGEgUHJvbWlzZSBmb3IgdGhlIHZhbHVlIG9mXG4gIC8vIHRoZSBmaW5hbCByZXN1bHQgcHJvZHVjZWQgYnkgdGhlIGl0ZXJhdG9yLlxuICBleHBvcnRzLmFzeW5jID0gZnVuY3Rpb24oaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QsIFByb21pc2VJbXBsKSB7XG4gICAgaWYgKFByb21pc2VJbXBsID09PSB2b2lkIDApIFByb21pc2VJbXBsID0gUHJvbWlzZTtcblxuICAgIHZhciBpdGVyID0gbmV3IEFzeW5jSXRlcmF0b3IoXG4gICAgICB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSxcbiAgICAgIFByb21pc2VJbXBsXG4gICAgKTtcblxuICAgIHJldHVybiBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24ob3V0ZXJGbilcbiAgICAgID8gaXRlciAvLyBJZiBvdXRlckZuIGlzIGEgZ2VuZXJhdG9yLCByZXR1cm4gdGhlIGZ1bGwgaXRlcmF0b3IuXG4gICAgICA6IGl0ZXIubmV4dCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC5kb25lID8gcmVzdWx0LnZhbHVlIDogaXRlci5uZXh0KCk7XG4gICAgICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCkge1xuICAgIHZhciBzdGF0ZSA9IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQ7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlRXhlY3V0aW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmdcIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVDb21wbGV0ZWQpIHtcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgdGhyb3cgYXJnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQmUgZm9yZ2l2aW5nLCBwZXIgMjUuMy4zLjMuMyBvZiB0aGUgc3BlYzpcbiAgICAgICAgLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWdlbmVyYXRvcnJlc3VtZVxuICAgICAgICByZXR1cm4gZG9uZVJlc3VsdCgpO1xuICAgICAgfVxuXG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgIGNvbnRleHQuYXJnID0gYXJnO1xuXG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICB2YXIgZGVsZWdhdGUgPSBjb250ZXh0LmRlbGVnYXRlO1xuICAgICAgICBpZiAoZGVsZWdhdGUpIHtcbiAgICAgICAgICB2YXIgZGVsZWdhdGVSZXN1bHQgPSBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcbiAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCA9PT0gQ29udGludWVTZW50aW5lbCkgY29udGludWU7XG4gICAgICAgICAgICByZXR1cm4gZGVsZWdhdGVSZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAgIC8vIFNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICAgICAgY29udGV4dC5zZW50ID0gY29udGV4dC5fc2VudCA9IGNvbnRleHQuYXJnO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydCkge1xuICAgICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuYXJnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgICBjb250ZXh0LmFicnVwdChcInJldHVyblwiLCBjb250ZXh0LmFyZyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZSA9IEdlblN0YXRlRXhlY3V0aW5nO1xuXG4gICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcbiAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiKSB7XG4gICAgICAgICAgLy8gSWYgYW4gZXhjZXB0aW9uIGlzIHRocm93biBmcm9tIGlubmVyRm4sIHdlIGxlYXZlIHN0YXRlID09PVxuICAgICAgICAgIC8vIEdlblN0YXRlRXhlY3V0aW5nIGFuZCBsb29wIGJhY2sgZm9yIGFub3RoZXIgaW52b2NhdGlvbi5cbiAgICAgICAgICBzdGF0ZSA9IGNvbnRleHQuZG9uZVxuICAgICAgICAgICAgPyBHZW5TdGF0ZUNvbXBsZXRlZFxuICAgICAgICAgICAgOiBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkO1xuXG4gICAgICAgICAgaWYgKHJlY29yZC5hcmcgPT09IENvbnRpbnVlU2VudGluZWwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogcmVjb3JkLmFyZyxcbiAgICAgICAgICAgIGRvbmU6IGNvbnRleHQuZG9uZVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAvLyBEaXNwYXRjaCB0aGUgZXhjZXB0aW9uIGJ5IGxvb3BpbmcgYmFjayBhcm91bmQgdG8gdGhlXG4gICAgICAgICAgLy8gY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZykgY2FsbCBhYm92ZS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gQ2FsbCBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF0oY29udGV4dC5hcmcpIGFuZCBoYW5kbGUgdGhlXG4gIC8vIHJlc3VsdCwgZWl0aGVyIGJ5IHJldHVybmluZyBhIHsgdmFsdWUsIGRvbmUgfSByZXN1bHQgZnJvbSB0aGVcbiAgLy8gZGVsZWdhdGUgaXRlcmF0b3IsIG9yIGJ5IG1vZGlmeWluZyBjb250ZXh0Lm1ldGhvZCBhbmQgY29udGV4dC5hcmcsXG4gIC8vIHNldHRpbmcgY29udGV4dC5kZWxlZ2F0ZSB0byBudWxsLCBhbmQgcmV0dXJuaW5nIHRoZSBDb250aW51ZVNlbnRpbmVsLlxuICBmdW5jdGlvbiBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KSB7XG4gICAgdmFyIG1ldGhvZCA9IGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXTtcbiAgICBpZiAobWV0aG9kID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIEEgLnRocm93IG9yIC5yZXR1cm4gd2hlbiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIG5vIC50aHJvd1xuICAgICAgLy8gbWV0aG9kIGFsd2F5cyB0ZXJtaW5hdGVzIHRoZSB5aWVsZCogbG9vcC5cbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAvLyBOb3RlOiBbXCJyZXR1cm5cIl0gbXVzdCBiZSB1c2VkIGZvciBFUzMgcGFyc2luZyBjb21wYXRpYmlsaXR5LlxuICAgICAgICBpZiAoZGVsZWdhdGUuaXRlcmF0b3JbXCJyZXR1cm5cIl0pIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIGEgcmV0dXJuIG1ldGhvZCwgZ2l2ZSBpdCBhXG4gICAgICAgICAgLy8gY2hhbmNlIHRvIGNsZWFuIHVwLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcblxuICAgICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAvLyBJZiBtYXliZUludm9rZURlbGVnYXRlKGNvbnRleHQpIGNoYW5nZWQgY29udGV4dC5tZXRob2QgZnJvbVxuICAgICAgICAgICAgLy8gXCJyZXR1cm5cIiB0byBcInRocm93XCIsIGxldCB0aGF0IG92ZXJyaWRlIHRoZSBUeXBlRXJyb3IgYmVsb3cuXG4gICAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgIFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAndGhyb3cnIG1ldGhvZFwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKG1ldGhvZCwgZGVsZWdhdGUuaXRlcmF0b3IsIGNvbnRleHQuYXJnKTtcblxuICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIGluZm8gPSByZWNvcmQuYXJnO1xuXG4gICAgaWYgKCEgaW5mbykge1xuICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdFwiKTtcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgaWYgKGluZm8uZG9uZSkge1xuICAgICAgLy8gQXNzaWduIHRoZSByZXN1bHQgb2YgdGhlIGZpbmlzaGVkIGRlbGVnYXRlIHRvIHRoZSB0ZW1wb3JhcnlcbiAgICAgIC8vIHZhcmlhYmxlIHNwZWNpZmllZCBieSBkZWxlZ2F0ZS5yZXN1bHROYW1lIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0W2RlbGVnYXRlLnJlc3VsdE5hbWVdID0gaW5mby52YWx1ZTtcblxuICAgICAgLy8gUmVzdW1lIGV4ZWN1dGlvbiBhdCB0aGUgZGVzaXJlZCBsb2NhdGlvbiAoc2VlIGRlbGVnYXRlWWllbGQpLlxuICAgICAgY29udGV4dC5uZXh0ID0gZGVsZWdhdGUubmV4dExvYztcblxuICAgICAgLy8gSWYgY29udGV4dC5tZXRob2Qgd2FzIFwidGhyb3dcIiBidXQgdGhlIGRlbGVnYXRlIGhhbmRsZWQgdGhlXG4gICAgICAvLyBleGNlcHRpb24sIGxldCB0aGUgb3V0ZXIgZ2VuZXJhdG9yIHByb2NlZWQgbm9ybWFsbHkuIElmXG4gICAgICAvLyBjb250ZXh0Lm1ldGhvZCB3YXMgXCJuZXh0XCIsIGZvcmdldCBjb250ZXh0LmFyZyBzaW5jZSBpdCBoYXMgYmVlblxuICAgICAgLy8gXCJjb25zdW1lZFwiIGJ5IHRoZSBkZWxlZ2F0ZSBpdGVyYXRvci4gSWYgY29udGV4dC5tZXRob2Qgd2FzXG4gICAgICAvLyBcInJldHVyblwiLCBhbGxvdyB0aGUgb3JpZ2luYWwgLnJldHVybiBjYWxsIHRvIGNvbnRpbnVlIGluIHRoZVxuICAgICAgLy8gb3V0ZXIgZ2VuZXJhdG9yLlxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kICE9PSBcInJldHVyblwiKSB7XG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlLXlpZWxkIHRoZSByZXN1bHQgcmV0dXJuZWQgYnkgdGhlIGRlbGVnYXRlIG1ldGhvZC5cbiAgICAgIHJldHVybiBpbmZvO1xuICAgIH1cblxuICAgIC8vIFRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBpcyBmaW5pc2hlZCwgc28gZm9yZ2V0IGl0IGFuZCBjb250aW51ZSB3aXRoXG4gICAgLy8gdGhlIG91dGVyIGdlbmVyYXRvci5cbiAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgfVxuXG4gIC8vIERlZmluZSBHZW5lcmF0b3IucHJvdG90eXBlLntuZXh0LHRocm93LHJldHVybn0gaW4gdGVybXMgb2YgdGhlXG4gIC8vIHVuaWZpZWQgLl9pbnZva2UgaGVscGVyIG1ldGhvZC5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEdwKTtcblxuICBkZWZpbmUoR3AsIHRvU3RyaW5nVGFnU3ltYm9sLCBcIkdlbmVyYXRvclwiKTtcblxuICAvLyBBIEdlbmVyYXRvciBzaG91bGQgYWx3YXlzIHJldHVybiBpdHNlbGYgYXMgdGhlIGl0ZXJhdG9yIG9iamVjdCB3aGVuIHRoZVxuICAvLyBAQGl0ZXJhdG9yIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBpdC4gU29tZSBicm93c2VycycgaW1wbGVtZW50YXRpb25zIG9mIHRoZVxuICAvLyBpdGVyYXRvciBwcm90b3R5cGUgY2hhaW4gaW5jb3JyZWN0bHkgaW1wbGVtZW50IHRoaXMsIGNhdXNpbmcgdGhlIEdlbmVyYXRvclxuICAvLyBvYmplY3QgdG8gbm90IGJlIHJldHVybmVkIGZyb20gdGhpcyBjYWxsLiBUaGlzIGVuc3VyZXMgdGhhdCBkb2Vzbid0IGhhcHBlbi5cbiAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9pc3N1ZXMvMjc0IGZvciBtb3JlIGRldGFpbHMuXG4gIEdwW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIEdwLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBHZW5lcmF0b3JdXCI7XG4gIH07XG5cbiAgZnVuY3Rpb24gcHVzaFRyeUVudHJ5KGxvY3MpIHtcbiAgICB2YXIgZW50cnkgPSB7IHRyeUxvYzogbG9jc1swXSB9O1xuXG4gICAgaWYgKDEgaW4gbG9jcykge1xuICAgICAgZW50cnkuY2F0Y2hMb2MgPSBsb2NzWzFdO1xuICAgIH1cblxuICAgIGlmICgyIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmZpbmFsbHlMb2MgPSBsb2NzWzJdO1xuICAgICAgZW50cnkuYWZ0ZXJMb2MgPSBsb2NzWzNdO1xuICAgIH1cblxuICAgIHRoaXMudHJ5RW50cmllcy5wdXNoKGVudHJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpIHtcbiAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbiB8fCB7fTtcbiAgICByZWNvcmQudHlwZSA9IFwibm9ybWFsXCI7XG4gICAgZGVsZXRlIHJlY29yZC5hcmc7XG4gICAgZW50cnkuY29tcGxldGlvbiA9IHJlY29yZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIENvbnRleHQodHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBUaGUgcm9vdCBlbnRyeSBvYmplY3QgKGVmZmVjdGl2ZWx5IGEgdHJ5IHN0YXRlbWVudCB3aXRob3V0IGEgY2F0Y2hcbiAgICAvLyBvciBhIGZpbmFsbHkgYmxvY2spIGdpdmVzIHVzIGEgcGxhY2UgdG8gc3RvcmUgdmFsdWVzIHRocm93biBmcm9tXG4gICAgLy8gbG9jYXRpb25zIHdoZXJlIHRoZXJlIGlzIG5vIGVuY2xvc2luZyB0cnkgc3RhdGVtZW50LlxuICAgIHRoaXMudHJ5RW50cmllcyA9IFt7IHRyeUxvYzogXCJyb290XCIgfV07XG4gICAgdHJ5TG9jc0xpc3QuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpO1xuICAgIHRoaXMucmVzZXQodHJ1ZSk7XG4gIH1cblxuICBleHBvcnRzLmtleXMgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgICBrZXlzLnJldmVyc2UoKTtcblxuICAgIC8vIFJhdGhlciB0aGFuIHJldHVybmluZyBhbiBvYmplY3Qgd2l0aCBhIG5leHQgbWV0aG9kLCB3ZSBrZWVwXG4gICAgLy8gdGhpbmdzIHNpbXBsZSBhbmQgcmV0dXJuIHRoZSBuZXh0IGZ1bmN0aW9uIGl0c2VsZi5cbiAgICByZXR1cm4gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0ga2V5cy5wb3AoKTtcbiAgICAgICAgaWYgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICBuZXh0LnZhbHVlID0ga2V5O1xuICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRvIGF2b2lkIGNyZWF0aW5nIGFuIGFkZGl0aW9uYWwgb2JqZWN0LCB3ZSBqdXN0IGhhbmcgdGhlIC52YWx1ZVxuICAgICAgLy8gYW5kIC5kb25lIHByb3BlcnRpZXMgb2ZmIHRoZSBuZXh0IGZ1bmN0aW9uIG9iamVjdCBpdHNlbGYuIFRoaXNcbiAgICAgIC8vIGFsc28gZW5zdXJlcyB0aGF0IHRoZSBtaW5pZmllciB3aWxsIG5vdCBhbm9ueW1pemUgdGhlIGZ1bmN0aW9uLlxuICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gdmFsdWVzKGl0ZXJhYmxlKSB7XG4gICAgaWYgKGl0ZXJhYmxlKSB7XG4gICAgICB2YXIgaXRlcmF0b3JNZXRob2QgPSBpdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07XG4gICAgICBpZiAoaXRlcmF0b3JNZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yTWV0aG9kLmNhbGwoaXRlcmFibGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGl0ZXJhYmxlLm5leHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gaXRlcmFibGU7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNOYU4oaXRlcmFibGUubGVuZ3RoKSkge1xuICAgICAgICB2YXIgaSA9IC0xLCBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgICB3aGlsZSAoKytpIDwgaXRlcmFibGUubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoaXRlcmFibGUsIGkpKSB7XG4gICAgICAgICAgICAgIG5leHQudmFsdWUgPSBpdGVyYWJsZVtpXTtcbiAgICAgICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG5leHQudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcblxuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiBhbiBpdGVyYXRvciB3aXRoIG5vIHZhbHVlcy5cbiAgICByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07XG4gIH1cbiAgZXhwb3J0cy52YWx1ZXMgPSB2YWx1ZXM7XG5cbiAgZnVuY3Rpb24gZG9uZVJlc3VsdCgpIHtcbiAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIH1cblxuICBDb250ZXh0LnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCxcblxuICAgIHJlc2V0OiBmdW5jdGlvbihza2lwVGVtcFJlc2V0KSB7XG4gICAgICB0aGlzLnByZXYgPSAwO1xuICAgICAgdGhpcy5uZXh0ID0gMDtcbiAgICAgIC8vIFJlc2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgdGhpcy5zZW50ID0gdGhpcy5fc2VudCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcblxuICAgICAgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSk7XG5cbiAgICAgIGlmICghc2tpcFRlbXBSZXNldCkge1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMpIHtcbiAgICAgICAgICAvLyBOb3Qgc3VyZSBhYm91dCB0aGUgb3B0aW1hbCBvcmRlciBvZiB0aGVzZSBjb25kaXRpb25zOlxuICAgICAgICAgIGlmIChuYW1lLmNoYXJBdCgwKSA9PT0gXCJ0XCIgJiZcbiAgICAgICAgICAgICAgaGFzT3duLmNhbGwodGhpcywgbmFtZSkgJiZcbiAgICAgICAgICAgICAgIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSkge1xuICAgICAgICAgICAgdGhpc1tuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuXG4gICAgICB2YXIgcm9vdEVudHJ5ID0gdGhpcy50cnlFbnRyaWVzWzBdO1xuICAgICAgdmFyIHJvb3RSZWNvcmQgPSByb290RW50cnkuY29tcGxldGlvbjtcbiAgICAgIGlmIChyb290UmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByb290UmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMucnZhbDtcbiAgICB9LFxuXG4gICAgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uKGV4Y2VwdGlvbikge1xuICAgICAgaWYgKHRoaXMuZG9uZSkge1xuICAgICAgICB0aHJvdyBleGNlcHRpb247XG4gICAgICB9XG5cbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZShsb2MsIGNhdWdodCkge1xuICAgICAgICByZWNvcmQudHlwZSA9IFwidGhyb3dcIjtcbiAgICAgICAgcmVjb3JkLmFyZyA9IGV4Y2VwdGlvbjtcbiAgICAgICAgY29udGV4dC5uZXh0ID0gbG9jO1xuXG4gICAgICAgIGlmIChjYXVnaHQpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGlzcGF0Y2hlZCBleGNlcHRpb24gd2FzIGNhdWdodCBieSBhIGNhdGNoIGJsb2NrLFxuICAgICAgICAgIC8vIHRoZW4gbGV0IHRoYXQgY2F0Y2ggYmxvY2sgaGFuZGxlIHRoZSBleGNlcHRpb24gbm9ybWFsbHkuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhISBjYXVnaHQ7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSBcInJvb3RcIikge1xuICAgICAgICAgIC8vIEV4Y2VwdGlvbiB0aHJvd24gb3V0c2lkZSBvZiBhbnkgdHJ5IGJsb2NrIHRoYXQgY291bGQgaGFuZGxlXG4gICAgICAgICAgLy8gaXQsIHNvIHNldCB0aGUgY29tcGxldGlvbiB2YWx1ZSBvZiB0aGUgZW50aXJlIGZ1bmN0aW9uIHRvXG4gICAgICAgICAgLy8gdGhyb3cgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAgICByZXR1cm4gaGFuZGxlKFwiZW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYpIHtcbiAgICAgICAgICB2YXIgaGFzQ2F0Y2ggPSBoYXNPd24uY2FsbChlbnRyeSwgXCJjYXRjaExvY1wiKTtcbiAgICAgICAgICB2YXIgaGFzRmluYWxseSA9IGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIik7XG5cbiAgICAgICAgICBpZiAoaGFzQ2F0Y2ggJiYgaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0NhdGNoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFicnVwdDogZnVuY3Rpb24odHlwZSwgYXJnKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIikgJiZcbiAgICAgICAgICAgIHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB2YXIgZmluYWxseUVudHJ5ID0gZW50cnk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSAmJlxuICAgICAgICAgICh0eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICAgdHlwZSA9PT0gXCJjb250aW51ZVwiKSAmJlxuICAgICAgICAgIGZpbmFsbHlFbnRyeS50cnlMb2MgPD0gYXJnICYmXG4gICAgICAgICAgYXJnIDw9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgIC8vIElnbm9yZSB0aGUgZmluYWxseSBlbnRyeSBpZiBjb250cm9sIGlzIG5vdCBqdW1waW5nIHRvIGFcbiAgICAgICAgLy8gbG9jYXRpb24gb3V0c2lkZSB0aGUgdHJ5L2NhdGNoIGJsb2NrLlxuICAgICAgICBmaW5hbGx5RW50cnkgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVjb3JkID0gZmluYWxseUVudHJ5ID8gZmluYWxseUVudHJ5LmNvbXBsZXRpb24gOiB7fTtcbiAgICAgIHJlY29yZC50eXBlID0gdHlwZTtcbiAgICAgIHJlY29yZC5hcmcgPSBhcmc7XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkpIHtcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2M7XG4gICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZShyZWNvcmQpO1xuICAgIH0sXG5cbiAgICBjb21wbGV0ZTogZnVuY3Rpb24ocmVjb3JkLCBhZnRlckxvYykge1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICByZWNvcmQudHlwZSA9PT0gXCJjb250aW51ZVwiKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IHJlY29yZC5hcmc7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInJldHVyblwiKSB7XG4gICAgICAgIHRoaXMucnZhbCA9IHRoaXMuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICB0aGlzLm5leHQgPSBcImVuZFwiO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIiAmJiBhZnRlckxvYykge1xuICAgICAgICB0aGlzLm5leHQgPSBhZnRlckxvYztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfSxcblxuICAgIGZpbmlzaDogZnVuY3Rpb24oZmluYWxseUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS5maW5hbGx5TG9jID09PSBmaW5hbGx5TG9jKSB7XG4gICAgICAgICAgdGhpcy5jb21wbGV0ZShlbnRyeS5jb21wbGV0aW9uLCBlbnRyeS5hZnRlckxvYyk7XG4gICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgXCJjYXRjaFwiOiBmdW5jdGlvbih0cnlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSB0cnlMb2MpIHtcbiAgICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcbiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgdmFyIHRocm93biA9IHJlY29yZC5hcmc7XG4gICAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRocm93bjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUaGUgY29udGV4dC5jYXRjaCBtZXRob2QgbXVzdCBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgbG9jYXRpb25cbiAgICAgIC8vIGFyZ3VtZW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBrbm93biBjYXRjaCBibG9jay5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdFwiKTtcbiAgICB9LFxuXG4gICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24oaXRlcmFibGUsIHJlc3VsdE5hbWUsIG5leHRMb2MpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSB7XG4gICAgICAgIGl0ZXJhdG9yOiB2YWx1ZXMoaXRlcmFibGUpLFxuICAgICAgICByZXN1bHROYW1lOiByZXN1bHROYW1lLFxuICAgICAgICBuZXh0TG9jOiBuZXh0TG9jXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgIC8vIERlbGliZXJhdGVseSBmb3JnZXQgdGhlIGxhc3Qgc2VudCB2YWx1ZSBzbyB0aGF0IHdlIGRvbid0XG4gICAgICAgIC8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS5cbiAgICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlXG4gIC8vIG9yIG5vdCwgcmV0dXJuIHRoZSBydW50aW1lIG9iamVjdCBzbyB0aGF0IHdlIGNhbiBkZWNsYXJlIHRoZSB2YXJpYWJsZVxuICAvLyByZWdlbmVyYXRvclJ1bnRpbWUgaW4gdGhlIG91dGVyIHNjb3BlLCB3aGljaCBhbGxvd3MgdGhpcyBtb2R1bGUgdG8gYmVcbiAgLy8gaW5qZWN0ZWQgZWFzaWx5IGJ5IGBiaW4vcmVnZW5lcmF0b3IgLS1pbmNsdWRlLXJ1bnRpbWUgc2NyaXB0LmpzYC5cbiAgcmV0dXJuIGV4cG9ydHM7XG5cbn0oXG4gIC8vIElmIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZSwgdXNlIG1vZHVsZS5leHBvcnRzXG4gIC8vIGFzIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgbmFtZXNwYWNlLiBPdGhlcndpc2UgY3JlYXRlIGEgbmV3IGVtcHR5XG4gIC8vIG9iamVjdC4gRWl0aGVyIHdheSwgdGhlIHJlc3VsdGluZyBvYmplY3Qgd2lsbCBiZSB1c2VkIHRvIGluaXRpYWxpemVcbiAgLy8gdGhlIHJlZ2VuZXJhdG9yUnVudGltZSB2YXJpYWJsZSBhdCB0aGUgdG9wIG9mIHRoaXMgZmlsZS5cbiAgdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiA/IG1vZHVsZS5leHBvcnRzIDoge31cbikpO1xuXG50cnkge1xuICByZWdlbmVyYXRvclJ1bnRpbWUgPSBydW50aW1lO1xufSBjYXRjaCAoYWNjaWRlbnRhbFN0cmljdE1vZGUpIHtcbiAgLy8gVGhpcyBtb2R1bGUgc2hvdWxkIG5vdCBiZSBydW5uaW5nIGluIHN0cmljdCBtb2RlLCBzbyB0aGUgYWJvdmVcbiAgLy8gYXNzaWdubWVudCBzaG91bGQgYWx3YXlzIHdvcmsgdW5sZXNzIHNvbWV0aGluZyBpcyBtaXNjb25maWd1cmVkLiBKdXN0XG4gIC8vIGluIGNhc2UgcnVudGltZS5qcyBhY2NpZGVudGFsbHkgcnVucyBpbiBzdHJpY3QgbW9kZSwgd2UgY2FuIGVzY2FwZVxuICAvLyBzdHJpY3QgbW9kZSB1c2luZyBhIGdsb2JhbCBGdW5jdGlvbiBjYWxsLiBUaGlzIGNvdWxkIGNvbmNlaXZhYmx5IGZhaWxcbiAgLy8gaWYgYSBDb250ZW50IFNlY3VyaXR5IFBvbGljeSBmb3JiaWRzIHVzaW5nIEZ1bmN0aW9uLCBidXQgaW4gdGhhdCBjYXNlXG4gIC8vIHRoZSBwcm9wZXIgc29sdXRpb24gaXMgdG8gZml4IHRoZSBhY2NpZGVudGFsIHN0cmljdCBtb2RlIHByb2JsZW0uIElmXG4gIC8vIHlvdSd2ZSBtaXNjb25maWd1cmVkIHlvdXIgYnVuZGxlciB0byBmb3JjZSBzdHJpY3QgbW9kZSBhbmQgYXBwbGllZCBhXG4gIC8vIENTUCB0byBmb3JiaWQgRnVuY3Rpb24sIGFuZCB5b3UncmUgbm90IHdpbGxpbmcgdG8gZml4IGVpdGhlciBvZiB0aG9zZVxuICAvLyBwcm9ibGVtcywgcGxlYXNlIGRldGFpbCB5b3VyIHVuaXF1ZSBwcmVkaWNhbWVudCBpbiBhIEdpdEh1YiBpc3N1ZS5cbiAgRnVuY3Rpb24oXCJyXCIsIFwicmVnZW5lcmF0b3JSdW50aW1lID0gclwiKShydW50aW1lKTtcbn1cbiIsInZhciBuZXh0VGljayA9IHJlcXVpcmUoJ3Byb2Nlc3MvYnJvd3Nlci5qcycpLm5leHRUaWNrO1xudmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xudmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xudmFyIGltbWVkaWF0ZUlkcyA9IHt9O1xudmFyIG5leHRJbW1lZGlhdGVJZCA9IDA7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcbn07XG5leHBvcnRzLmNsZWFyVGltZW91dCA9XG5leHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7IHRpbWVvdXQuY2xvc2UoKTsgfTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTtcbn07XG5cbi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG59O1xuXG5leHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cbiAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcbiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG4vLyBUaGF0J3Mgbm90IGhvdyBub2RlLmpzIGltcGxlbWVudHMgaXQgYnV0IHRoZSBleHBvc2VkIGFwaSBpcyB0aGUgc2FtZS5cbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gdHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gXCJmdW5jdGlvblwiID8gc2V0SW1tZWRpYXRlIDogZnVuY3Rpb24oZm4pIHtcbiAgdmFyIGlkID0gbmV4dEltbWVkaWF0ZUlkKys7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA8IDIgPyBmYWxzZSA6IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICBpbW1lZGlhdGVJZHNbaWRdID0gdHJ1ZTtcblxuICBuZXh0VGljayhmdW5jdGlvbiBvbk5leHRUaWNrKCkge1xuICAgIGlmIChpbW1lZGlhdGVJZHNbaWRdKSB7XG4gICAgICAvLyBmbi5jYWxsKCkgaXMgZmFzdGVyIHNvIHdlIG9wdGltaXplIGZvciB0aGUgY29tbW9uIHVzZS1jYXNlXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9qc3BlcmYuY29tL2NhbGwtYXBwbHktc2VndVxuICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmbi5jYWxsKG51bGwpO1xuICAgICAgfVxuICAgICAgLy8gUHJldmVudCBpZHMgZnJvbSBsZWFraW5nXG4gICAgICBleHBvcnRzLmNsZWFySW1tZWRpYXRlKGlkKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBpZDtcbn07XG5cbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSB0eXBlb2YgY2xlYXJJbW1lZGlhdGUgPT09IFwiZnVuY3Rpb25cIiA/IGNsZWFySW1tZWRpYXRlIDogZnVuY3Rpb24oaWQpIHtcbiAgZGVsZXRlIGltbWVkaWF0ZUlkc1tpZF07XG59OyIsImNsYXNzIEFic3RyYWN0VmlldyBleHRlbmRzIEV2ZW50VGFyZ2V0e1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLkRPTSA9IHt9O1xyXG5cclxuICAgICAgICB0aGlzLkRPTS5nYW1lQm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZ2FtZS1ib2FyZFwiKTtcclxuICAgICAgICB0aGlzLkRPTS5xdWVzdGlvblBhbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3F1ZXN0aW9uLXBhbmVcIik7XHJcbiAgICAgICAgdGhpcy5ET00ubXVsdGlwbGVDaG9pY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI211bHRpcGxlLWNob2ljZS1wcmVzZW50XCIpO1xyXG5cclxuICAgICAgICB0aGlzLkRPTS5wbGF5aW5nX2luZGljYXRvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxheWluZ1wiKTtcclxuICAgICAgICB0aGlzLkRPTS50aW1lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJ0cml2aWEtdGltZXJcIik7XHJcblxyXG4gICAgICAgIHRoaXMuRE9NLm1lbnVJbmRpY2F0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21lbnUtaW5kaWNhdG9yXCIpO1xyXG4gICAgICAgIHRoaXMuRE9NLm1lbnVBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtZW51LWFyZWFcIik7XHJcbiAgICAgICAgdGhpcy5ET00ubWVudUxvZ291dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWVudS1sb2dvdXRcIik7XHJcblxyXG4gICAgICAgIHRoaXMuRE9NLnBsYXllckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxheWVyLWNvbnRhaW5lci1sZWZ0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0VGltZXIodXBkYXRlKXtcclxuICAgICAgICB0aGlzLkRPTS50aW1lci5zaG93KHVwZGF0ZS50aW1lKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVUaW1lcih1cGRhdGUpe1xyXG4gICAgICAgIGlmICh0aGlzLmxhc3RVcGRhdGUubW9kZWwucGxheWVycy5sZW5ndGggPD0gMCkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuRE9NLnRpbWVyLnNob3coKTtcclxuICAgICAgICB0aGlzLkRPTS50aW1lci5zZXQodXBkYXRlLnRpbWUpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5sYXN0VXBkYXRlLnN0YXRlID09PSA2IHx8IHRoaXMubGFzdFVwZGF0ZS5zdGF0ZSA9PT0gOCkge1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudE5hbWUgPSB0aGlzLmxhc3RVcGRhdGUubW9kZWwucGxheWVyc1swXS5uYW1lO1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudFBhbmVsID0gdGhpcy5ET00ucGxheWVyQ29udGFpbmVyLnRvcFBsYXllcigpO1xyXG4gICAgICAgICAgICBjdXJyZW50UGFuZWwuc2V0VGltZXIodXBkYXRlLnByb2dyZXNzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlTW9kZWwodXBkYXRlKXtcclxuICAgICAgICB0aGlzLmZpbGxQbGF5ZXJzKHVwZGF0ZSk7XHJcbiAgICAgICAgdGhpcy5sYXN0VXBkYXRlID0gdXBkYXRlO1xyXG5cclxuICAgICAgICB0aGlzLkRPTS5tdWx0aXBsZUNob2ljZS5oaWRlKCk7XHJcblxyXG4gICAgICAgIHN3aXRjaCAodXBkYXRlLnN0YXRlKXtcclxuICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLm11bHRpcGxlQ2hvaWNlLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLmdhbWVCb2FyZC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5xdWVzdGlvblBhbmUuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ucXVlc3Rpb25QYW5lLnNldFRleHQodXBkYXRlLm1vZGVsLnJvdW5kLnF1ZXN0aW9uKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnRpbWVyLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5xdWVzdGlvblBhbmUuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ubXVsdGlwbGVDaG9pY2Uuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ubXVsdGlwbGVDaG9pY2Uuc2V0TW9kZShcInNob3dcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5tdWx0aXBsZUNob2ljZS5xdWVyeVNlbGVjdG9yKFwiLmlubmVyLnRvdGFsXCIpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLm11bHRpcGxlQ2hvaWNlLnF1ZXJ5U2VsZWN0b3IoXCIuaW5uZXIuYm9udXMgPiAuYW1vdW50XCIpLnRleHQgPSB1cGRhdGUubW9kZWwucm91bmQuYm9udXM7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRE9NLm11bHRpcGxlQ2hvaWNlLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWluZGV4PVwiJHtpfVwiXSBjaGVjay1ib3hgKS5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ET00ubXVsdGlwbGVDaG9pY2Uuc2V0QW5zd2VyVGV4dChpLCB1cGRhdGUubW9kZWwucm91bmQuYW5zd2Vyc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ET00ubXVsdGlwbGVDaG9pY2UucXVlcnlTZWxlY3RvcihgW2RhdGEtaW5kZXg9XCIke2l9XCJdIGNoZWNrLWJveGApLmxvY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnF1ZXN0aW9uUGFuZS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5tdWx0aXBsZUNob2ljZS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5tdWx0aXBsZUNob2ljZS5zZXRNb2RlKFwic2hvd1wiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRE9NLm11bHRpcGxlQ2hvaWNlLnNldEFuc3dlclRleHQoaSwgdXBkYXRlLm1vZGVsLnJvdW5kLmFuc3dlcnNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRE9NLm11bHRpcGxlQ2hvaWNlLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWluZGV4PVwiJHtpfVwiXSBjaGVjay1ib3hgKS5jaGVja2VkID0gdXBkYXRlLm1vZGVsLnJvdW5kLnZhbHVlc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkRPTS5tdWx0aXBsZUNob2ljZS5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pbmRleD1cIiR7aX1cIl0gY2hlY2stYm94YCkubG9ja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5nYW1lQm9hcmQuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maWxsSmVvcGFyZHlDYXRlZ29yaWVzKHVwZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGxKZW9wYXJkeUNlbGxzKHVwZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS50aW1lci5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00uZ2FtZUJvYXJkLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnF1ZXN0aW9uUGFuZS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5xdWVzdGlvblBhbmUuc2V0VGV4dCh1cGRhdGUubW9kZWwucm91bmQucXVlc3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00udGltZXIuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLmdhbWVCb2FyZC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5xdWVzdGlvblBhbmUuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ucXVlc3Rpb25QYW5lLnNldFRleHQodXBkYXRlLm1vZGVsLnJvdW5kLnF1ZXN0aW9uKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnBsYXllckNvbnRhaW5lci5tb3ZlVG9Ub3AodXBkYXRlLm1vZGVsLnJvdW5kLmN1cnJlbnRfcGxheWVyKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5nYW1lQm9hcmQuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ucXVlc3Rpb25QYW5lLnNob3coKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnF1ZXN0aW9uUGFuZS5zZXRUZXh0KHVwZGF0ZS5tb2RlbC5yb3VuZC5xdWVzdGlvbik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00uZ2FtZUJvYXJkLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnF1ZXN0aW9uUGFuZS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5xdWVzdGlvblBhbmUuc2V0VGV4dCh1cGRhdGUubW9kZWwucm91bmQucXVlc3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ucGxheWVyQ29udGFpbmVyLm1vdmVUb1RvcCh1cGRhdGUubW9kZWwucm91bmQuY3VycmVudF9wbGF5ZXIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLmdhbWVCb2FyZC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5xdWVzdGlvblBhbmUuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ucXVlc3Rpb25QYW5lLnNldFRleHQodXBkYXRlLm1vZGVsLnJvdW5kLmFuc3dlcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS50aW1lci5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAxMDpcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLmdhbWVCb2FyZC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5xdWVzdGlvblBhbmUuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ucXVlc3Rpb25QYW5lLnNldFRleHQoXCJHQU1FIE9WRVJcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS50aW1lci5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmaWxsUGxheWVycyh1cGRhdGUpe1xyXG4gICAgICAgIHRoaXMuRE9NLnBsYXllckNvbnRhaW5lci5jbGVhcigpO1xyXG4gICAgICAgIGlmICh1cGRhdGUubW9kZWwucGxheWVycy5sZW5ndGggPD0gMCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBwbGF5ZXIgb2YgdXBkYXRlLm1vZGVsLnBsYXllcnMpe1xyXG4gICAgICAgICAgICB0aGlzLkRPTS5wbGF5ZXJDb250YWluZXIuYWRkUGxheWVyKHBsYXllci5uYW1lLCBwbGF5ZXIuc2NvcmUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHVwZGF0ZS5tb2RlbC5yb3VuZCAmJiB1cGRhdGUubW9kZWwucm91bmQuc3R5bGUgPT09ICdqJykgeyAvLyBUT0RPIHJlbW92ZSBtYWdpYyBzdHJpbmdcclxuICAgICAgICAgICAgICAgIGlmICh1cGRhdGUubW9kZWwucm91bmQuY3VycmVudF9wbGF5ZXIgPT09IHBsYXllci5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ET00ucGxheWVyQ29udGFpbmVyLmdldFBsYXllcihwbGF5ZXIubmFtZSkuaGlnaGxpZ2h0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkRPTS5wbGF5ZXJDb250YWluZXIuZ2V0UGxheWVyKHBsYXllci5uYW1lKS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh1cGRhdGUubW9kZWwucm91bmQuc3BlbnRQbGF5ZXJzLmluZGV4T2YocGxheWVyLm5hbWUpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRE9NLnBsYXllckNvbnRhaW5lci5nZXRQbGF5ZXIocGxheWVyLm5hbWUpLmRpbSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnggPSB0aGlzLkRPTS5wbGF5ZXJDb250YWluZXIuZ2V0UGxheWVyKHBsYXllci5uYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmaWxsSmVvcGFyZHlDYXRlZ29yaWVzKHVwZGF0ZSl7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspe1xyXG4gICAgICAgICAgICBsZXQgY2F0ZWdvcnkgPSB1cGRhdGUubW9kZWwucm91bmQuY2F0ZWdvcmllc1tpXTtcclxuICAgICAgICAgICAgdGhpcy5ET00uZ2FtZUJvYXJkLnNldEhlYWRlcihpLCBjYXRlZ29yeVtcInRleHRcIl0sIGNhdGVnb3J5W1wiZm9udC1zaXplXCJdLCB0cnVlKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmaWxsSmVvcGFyZHlDZWxscyh1cGRhdGUpe1xyXG4gICAgICAgIGxldCByb3VuZCA9IHVwZGF0ZS5tb2RlbC5yb3VuZDtcclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IDY7IGMrKyl7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgNTsgcisrKXtcclxuICAgICAgICAgICAgICAgIGlmIChyb3VuZC5zcGVudFtjXVtyXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ET00uZ2FtZUJvYXJkLnNldENlbGwociwgYywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRE9NLmdhbWVCb2FyZC5zZXRDZWxsKHIsIGMsIHJvdW5kLnZhbHVlc1tjXVtyXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQWJzdHJhY3RWaWV3OyIsImltcG9ydCBBYnN0cmFjdFZpZXcgZnJvbSBcIi4vQWJzdHJhY3RWaWV3LmpzXCI7XHJcbmltcG9ydCBWaWV3RXZlbnQgZnJvbSBcIi4vVmlld0V2ZW50LmpzXCI7XHJcblxyXG5jbGFzcyBDb250ZXN0YW50UG9ydGFsVmlldyBleHRlbmRzIEFic3RyYWN0VmlldyB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuRE9NLmJ1enpCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2J1enpcIik7XHJcbiAgICAgICAgdGhpcy5ET00uc2VsZlBhbmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzZWxmLXBhbmVsXCIpO1xyXG5cclxuICAgICAgICB0aGlzLkRPTS5idXp6QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVmlld0V2ZW50KFwiYnV6elwiKSkpO1xyXG4gICAgICAgIHRoaXMuRE9NLmdhbWVCb2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2VsbC1zZWxlY3RcIiwgZSA9PiB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFZpZXdFdmVudChcInNlbGVjdFwiLCBlLmRldGFpbCkpKTtcclxuICAgICAgICB0aGlzLkRPTS5tdWx0aXBsZUNob2ljZS5hZGRFdmVudExpc3RlbmVyKFwidmFsdWUtdXBkYXRlXCIsIGUgPT4gdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBWaWV3RXZlbnQoXCJ1cGRhdGVcIiwgZS5kZXRhaWwpKSk7XHJcblxyXG4gICAgICAgIHRoaXMuRE9NLnNlbGZQYW5lbC5oaWRlQ2xvY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXROYW1lKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuRE9NLnNlbGZQYW5lbC5uYW1lID0gXCJTY29yZVwiO1xyXG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVNb2RlbCh1cGRhdGUpIHtcclxuICAgICAgICBzdXBlci51cGRhdGVNb2RlbCh1cGRhdGUpO1xyXG4gICAgICAgIHRoaXMuRE9NLmJ1enpCdXR0b24uaGlkZSgpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBwbGF5ZXIgb2YgdXBkYXRlLm1vZGVsLnBsYXllcnMpIHtcclxuICAgICAgICAgICAgaWYgKHBsYXllci5uYW1lID09PSB0aGlzLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLnNlbGZQYW5lbC5zY29yZSA9IHBsYXllci5zY29yZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2ggKHVwZGF0ZS5zdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5tdWx0aXBsZUNob2ljZS5zZXRNb2RlKFwiZGF0YS1lbnRlclwiKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ET00ubXVsdGlwbGVDaG9pY2Uuc2V0QW5zd2VyVGV4dChpLCB1cGRhdGUubW9kZWwucm91bmQuYW5zd2Vyc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5ET00ubXVsdGlwbGVDaG9pY2Uuc2V0TW9kZShcImRhdGEtZW50ZXJcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTS5tdWx0aXBsZUNob2ljZS5xdWVyeVNlbGVjdG9yKFwiLmlubmVyLnRvdGFsXCIpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NLm11bHRpcGxlQ2hvaWNlLnF1ZXJ5U2VsZWN0b3IoXCIuaW5uZXIudG90YWwgPiAuYW1vdW50XCIpLnRleHQgPSB1cGRhdGUuYmV0c1t0aGlzLm5hbWVdLnRvdGFsO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh1cGRhdGUuYmV0c1t0aGlzLm5hbWVdLmJvbnVzID09PSBcInRydWVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRE9NLm11bHRpcGxlQ2hvaWNlLnF1ZXJ5U2VsZWN0b3IoXCIuaW5uZXIuYm9udXMgPiAuYW1vdW50XCIpLnRleHQgPSB1cGRhdGUubW9kZWwucm91bmQuYm9udXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkRPTS5tdWx0aXBsZUNob2ljZS5xdWVyeVNlbGVjdG9yKFwiLmlubmVyLmJvbnVzID4gLmFtb3VudFwiKS50ZXh0ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB3YWdlckVsZW1lbnQgPSB0aGlzLkRPTS5tdWx0aXBsZUNob2ljZS5xdWVyeVNlbGVjdG9yKGBbZGF0YS1pbmRleD1cIiR7aX1cIl0gLndhZ2VyYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gdXBkYXRlLmJldHNbdGhpcy5uYW1lXS5iZXRzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IFwiXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWdlckVsZW1lbnQuY29udGVudCA9IHBhcnNlSW50KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhZ2VyRWxlbWVudC5jb250ZW50ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgbGV0IGNoZWNrID0gdXBkYXRlLm1vZGVsLnJvdW5kLnNwZW50UGxheWVycy5pbmRleE9mKHRoaXMubmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodXBkYXRlLm1vZGVsLnJvdW5kLnNwZW50UGxheWVycy5pbmRleE9mKHRoaXMubmFtZSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ET00uYnV6ekJ1dHRvbi5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENvbnRlc3RhbnRQb3J0YWxWaWV3OyIsIlxyXG5jbGFzcyBQb3J0YWxDb250cm9sbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHdzLCB2aWV3KSB7XHJcbiAgICAgICAgdGhpcy53cyA9IHdzO1xyXG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gXCJcIjtcclxuXHJcbiAgICAgICAgdGhpcy53cy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGV2ZW50KSA9PiB0aGlzLnByb2Nlc3MoSlNPTi5wYXJzZShldmVudC5kYXRhKSkpO1xyXG4gICAgICAgIHRoaXMud3MuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCAoZXZlbnQpID0+IHRoaXMub25DbG9zZShldmVudCkpO1xyXG5cclxuICAgICAgICB0aGlzLnZpZXcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpPT50aGlzLnNlbmQoZXZlbnQuZGV0YWlsKSk7XHJcbiAgICAgICAgdGhpcy52aWV3LmFkZEV2ZW50TGlzdGVuZXIoJ2NlbGwtc2VsZWN0JywgKGV2ZW50KT0+dGhpcy5zZW5kKGV2ZW50LmRldGFpbCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5jb21pbmcgbWVzc2FnZXMgZ2V0IHByb2Nlc3NlZCBoZXJlLlxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcclxuICAgICAqL1xyXG4gICAgcHJvY2VzcyhtZXNzYWdlKXtcclxuICAgICAgICBpZiAobWVzc2FnZS5hY3Rpb24gIT09IFwicGluZ1wiICYmIG1lc3NhZ2UuYWN0aW9uICE9PSBcInVwZGF0ZV90aW1lclwiKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sYXN0TWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UuYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJjb25uZWN0aW9uX2VzdGFibGlzaGVkXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hbWUgPSBtZXNzYWdlLmRhdGEubmFtZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZXcuc2V0TmFtZSkgdGhpcy52aWV3LnNldE5hbWUobWVzc2FnZS5kYXRhLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwcm92aWRlX2Fuc3dlclwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnVwZGF0ZUFuc3dlcihtZXNzYWdlLmRhdGEuYW5zd2VyKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwidXBkYXRlX21vZGVsXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcudXBkYXRlTW9kZWwobWVzc2FnZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwic3RhcnRfdGltZXJcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMudmlldy5zdGFydFRpbWVyKG1lc3NhZ2UuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInVwZGF0ZV90aW1lclwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnVwZGF0ZVRpbWVyKG1lc3NhZ2UuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInN0b3BfdGltZXJcIjpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKGV2ZW50KXtcclxuICAgICAgICBpZiAodGhpcy5uYW1lID09PSBcIkBIT1NUXCIpe1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSBcImhvc3QuZWpzXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gXCJjb250ZXN0YW50X2pvaW4uZWpzXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNlbmQobXNnKXtcclxuICAgICAgICBjb25zb2xlLmxvZyhgc2VuZDogJHtKU09OLnN0cmluZ2lmeShtc2cpfWApO1xyXG4gICAgICAgIHRoaXMud3Muc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9ydGFsQ29udHJvbGxlcjsiLCJjbGFzcyBWaWV3RXZlbnQgZXh0ZW5kcyBDdXN0b21FdmVudHtcclxuICAgIGNvbnN0cnVjdG9yKGFjdGlvbiwgZGF0YSA9IG51bGwpIHtcclxuICAgICAgICBzdXBlcignY2xpY2snLFxyXG4gICAgICAgICAgICB7ZGV0YWlsIDoge2FjdGlvbiA6IGFjdGlvbiwgZGF0YSA6IGRhdGF9fVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFZpZXdFdmVudDsiLCJmdW5jdGlvbiBjb25uZWN0V2Vic29ja2V0KCl7XHJcbiAgICBsZXQgdXJsID0gd2luZG93Lm9yaWdpbjtcclxuICAgIGlmICh1cmwuc3RhcnRzV2l0aChcImh0dHA6XCIpKXtcclxuICAgICAgICB1cmwgPSBcIndzXCIgKyB1cmwuc3Vic3RyKDQpICsgXCIvZ2FtZS1zZXJ2aWNlLndzXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHVybCA9IFwid3NzXCIgKyB1cmwuc3Vic3RyKDUpICsgXCIvZ2FtZS1zZXJ2aWNlLndzXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT57XHJcbiAgICAgICAgbGV0IHNvY2tldCA9IG5ldyBXZWJTb2NrZXQodXJsKTtcclxuICAgICAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXZlbnQpID0+IHJlamVjdChldmVudCkpO1xyXG4gICAgICAgIHNvY2tldC5hZGRFdmVudExpc3RlbmVyKCdvcGVuJywgKGV2ZW50KSA9PiByZXNvbHZlKHNvY2tldCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3RXZWJzb2NrZXQ7IiwiaW1wb3J0IENvbnRlc3RhbnRQb3J0YWxWaWV3IGZyb20gXCIuL0NvbnRlc3RhbnRQb3J0YWxWaWV3LmpzXCI7XHJcbmltcG9ydCBQb3J0YWxDb250cm9sbGVyIGZyb20gXCIuL1BvcnRhbENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IGNvbm5lY3RXZWJzb2NrZXQgZnJvbSBcIi4vY29ubmVjdFdlYnNvY2tldC5qc1wiO1xyXG5pbXBvcnQgc2V0dXBTaXplTGlzdGVuZXIgZnJvbSBcIi4vbW9kdWxlcy9TZXR1cFNpemVMaXN0ZW5lclwiO1xyXG5cclxud2luZG93Lm9ubG9hZCA9IGFzeW5jICgpID0+IHtcclxuICAgIGxldCBzdGFydCA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgc2V0dXBTaXplTGlzdGVuZXIoKTtcclxuICAgIHdpbmRvdy52aWV3ID0gbmV3IENvbnRlc3RhbnRQb3J0YWxWaWV3KCk7XHJcbiAgICBsZXQgd3MgPSBhd2FpdCBjb25uZWN0V2Vic29ja2V0KCk7XHJcbiAgICBuZXcgUG9ydGFsQ29udHJvbGxlcih3cywgd2luZG93LnZpZXcpO1xyXG4gICAgbGV0IGVuZCA9IG5ldyBEYXRlKCk7XHJcbiAgICBsZXQgdGltZSA9IGVuZCAtIHN0YXJ0O1xyXG4gICAgY29uc29sZS5sb2coXCJMb2FkIFRpbWUgXCIgKyB0aW1lICsgXCIgbXNcIik7XHJcbn1cclxuXHJcbiIsImZ1bmN0aW9uIHNldHVwU2l6ZUxpc3RlbmVyKCl7XHJcbiAgICBmdW5jdGlvbiByZXBvcnRXaW5kb3dTaXplKCkge1xyXG4gICAgICAgIGNvbnN0IHBhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BhZ2UtY29udGFpbmVyXCIpO1xyXG4gICAgICAgIGNvbnN0IHJhdGlvID0gd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmIChyYXRpbyA+PSAxNi85KXtcclxuICAgICAgICAgICAgcGFnZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiYXNwZWN0LWZpdFwiKTtcclxuICAgICAgICAgICAgcGFnZUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwic2hyaW5rLWhvcnpcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGFnZUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiYXNwZWN0LWZpdFwiKTtcclxuICAgICAgICAgICAgcGFnZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwic2hyaW5rLWhvcnpcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGU9PnJlcG9ydFdpbmRvd1NpemUoKSk7XHJcbiAgICByZXBvcnRXaW5kb3dTaXplKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHNldHVwU2l6ZUxpc3RlbmVyOyIsImNvbnN0IE5pZGdldEVsZW1lbnQgPSByZXF1aXJlKFwiQHRoYWVyaW91cy9uaWRnZXRcIikuTmlkZ2V0RWxlbWVudDtcclxuXHJcbmNsYXNzIFZhbHVlVXBkYXRlIGV4dGVuZHMgIEN1c3RvbUV2ZW50e1xyXG4gICAgY29uc3RydWN0b3IodmFsdWUpIHtcclxuICAgICAgICBzdXBlcigndmFsdWUtdXBkYXRlJyxcclxuICAgICAgICAgICAge2RldGFpbCA6IHt2YWx1ZSA6IHZhbHVlfX1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBDaGVja0JveCBleHRlbmRzIE5pZGdldEVsZW1lbnQge1xyXG4gICAgYXN5bmMgY29ubmVjdGVkQ2FsbGJhY2soKXtcclxuICAgICAgICBhd2FpdCBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHR5cGVvZih0aGlzLmxvY2tlZCkpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5sb2NrZWQpIHJldHVybjtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGUoZGlzcGF0Y2ggPSB0cnVlKXtcclxuICAgICAgICBpZiAodGhpcy5jaGVja2VkID09PSAndHJ1ZScpIHRoaXMuc2V0Q2hlY2tlZCgnZmFsc2UnLCBkaXNwYXRjaCk7XHJcbiAgICAgICAgZWxzZSB0aGlzLnNldENoZWNrZWQoJ3RydWUnLCBkaXNwYXRjaCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNoZWNrZWQoKXtcclxuICAgICAgICBpZiAoIXRoaXMuaGFzQXR0cmlidXRlKENoZWNrQm94LkNIRUNLRURfQVRUUklCVVRFKSl7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKENoZWNrQm94LkNIRUNLRURfQVRUUklCVVRFLCAnZmFsc2UnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKENoZWNrQm94LkNIRUNLRURfQVRUUklCVVRFKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgY2hlY2tlZCh2YWx1ZSl7XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSB0aGlzLmNoZWNrZWQpIHJldHVybjtcclxuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShDaGVja0JveC5DSEVDS0VEX0FUVFJJQlVURSwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVmFsdWVVcGRhdGUodmFsdWUpKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRDaGVja2VkKHZhbHVlLCBkaXNwYXRjaCA9IHRydWUpe1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5jaGVja2VkKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoQ2hlY2tCb3guQ0hFQ0tFRF9BVFRSSUJVVEUsIHZhbHVlKTtcclxuICAgICAgICBpZiAoZGlzcGF0Y2gpIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVmFsdWVVcGRhdGUodmFsdWUpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgbG9ja2VkIGF0dHJpYnV0ZS5cclxuICAgICAqIElmIHRydWUgcHJldmVudHMgY2hhbmdpbmcgdmFsdWUuXHJcbiAgICAgKiBAcGFyYW0gdmFsdWVcclxuICAgICAqL1xyXG4gICAgc2V0IGxvY2tlZCh2YWx1ZSl7XHJcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoQ2hlY2tCb3guTE9DS0VEX0FUVFJJQlVURSwgdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmUgdGhlIGxvY2tlZCBhdHRyaWJ1dGUuXHJcbiAgICAgKi9cclxuICAgIGdldCBsb2NrZWQoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoQ2hlY2tCb3guTE9DS0VEX0FUVFJJQlVURSkgPT09IFwidHJ1ZVwiO1xyXG4gICAgfVxyXG59XHJcblxyXG5DaGVja0JveC5DSEVDS0VEX0FUVFJJQlVURSA9IFwiY2hlY2tlZFwiO1xyXG5DaGVja0JveC5MT0NLRURfQVRUUklCVVRFID0gXCJsb2NrZWRcIjtcclxud2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnY2hlY2stYm94JywgQ2hlY2tCb3gpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IENoZWNrQm94OyIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuLyoqIFZpZXctQ29udHJvbGxlciBmb3IgdGhlIEhUTUwgZ2FtZSBib2FyZCBlbGVtZW50XHJcbiAgICBUaGlzIGlzIHRoZSBjbGFzc2ljYWwgXCJKZW9wYXJkeVwiIHR5cGUgYm9hcmRcclxuICAgIFRoaXMgaXMgbW9kZWwgYWdub3N0aWMsIHNlZSBFZGl0b3JQYW5lLmpzIGZvciBtb2RlbCBtZXRob2RzXHJcbiAgICBnZW5lcmF0ZXMgdGhlIGZvbGxvd2luZyBldmVudHM6XHJcbiAgICAgICAgY2VsbC1zZWxlY3QgKHJvdywgY29sKTogd2hlbiBhIHVzZXIgY2xpY2tzIGEgY2VsbFxyXG4gICAgICAgIGhlYWRlci11cGRhdGUgKHZhbHVlLCBjb2wsIGZvbnRzaXplKSA6IHdoZW4gdGhlIGhlYWRlciB0ZXh0IGNoYW5nZXMgKGFuZCBibHVycylcclxuICoqL1xyXG5cclxuY29uc3QgTmlkZ2V0RWxlbWVudCA9IHJlcXVpcmUoXCJAdGhhZXJpb3VzL25pZGdldFwiKS5OaWRnZXRFbGVtZW50O1xyXG5cclxuY2xhc3MgQ2VsbFNlbGVjdEV2ZW50IGV4dGVuZHMgQ3VzdG9tRXZlbnR7XHJcbiAgICBjb25zdHJ1Y3Rvcihyb3csIGNvbCkge1xyXG4gICAgICAgIHN1cGVyKCdjZWxsLXNlbGVjdCcsXHJcbiAgICAgICAgICAgICAge2RldGFpbCA6IHtyb3cgOiByb3csIGNvbCA6IGNvbCB9fVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEhlYWRlclVwZGF0ZUV2ZW50IGV4dGVuZHMgIEN1c3RvbUV2ZW50e1xyXG4gICAgY29uc3RydWN0b3IoY29sLCB2YWx1ZSwgZm9udFNpemUpIHtcclxuICAgICAgICBzdXBlcignaGVhZGVyLXVwZGF0ZScsXHJcbiAgICAgICAgICAgIHtkZXRhaWwgOiB7dmFsdWUgOiB2YWx1ZSwgY29sIDogY29sLCBmb250U2l6ZSA6IGZvbnRTaXplfX1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBHYW1lQm9hcmQgZXh0ZW5kcyBOaWRnZXRFbGVtZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwiZ2FtZS1ib2FyZC10ZW1wbGF0ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZWFkeSgpe1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLnJlYWR5KCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGVsZW1lbnQgb2YgdGhpcy5xdWVyeVNlbGVjdG9yQWxsKFwiLnRleHQtYnVmZmVyXCIpKXtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudmFsdWVcIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT57XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuaW5uZXJIVE1MID09PSBcIlwiKSB2YWx1ZS5pbm5lckhUTUwgPSBcIiBcIjsgLy8gbWFrZXMgdGhlIGN1cnNvciBzaG93IHVwIHdoZW4gZm9jdXNlZFxyXG4gICAgICAgICAgICAgICAgdmFsdWUuZm9jdXMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCA2OyBjb2wrKykge1xyXG4gICAgICAgICAgICB0aGlzLmdldEhlYWRlcihjb2wpLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZlbnQpPT57XHJcbiAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuZml0VGV4dC5ub3RpZnkoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmdldEhlYWRlcihjb2wpLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIChldmVudCk9PntcclxuICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5pbm5lckhUTUwgPSBldmVudC50YXJnZXQudGV4dC50cmltKCk7XHJcbiAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuZml0VGV4dC5ub3RpZnkoZm9udFNpemU9PntcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEhlYWRlclVwZGF0ZUV2ZW50KGNvbCwgdGhpcy5nZXRIZWFkZXIoY29sKS50ZXh0LCBmb250U2l6ZSkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgNTsgcm93KyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q2VsbChyb3csIGNvbCkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IENlbGxTZWxlY3RFdmVudChyb3csIGNvbCkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGNhdGVnb3J5IHRleHQuXHJcbiAgICAgKiBAcGFyYW0gaW5kZXggVGhlIGNvbHVtbiB0byBzZXRcclxuICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgdGV4dCB0byBzZXQgaXQgdG8uXHJcbiAgICAgKiBAcGFyYW0gZm9udFNpemVcclxuICAgICAqIEBwYXJhbSBsb2NrIHR1cm4gb2ZmIGNvbnRlbnQtZWRpdGFibGUsIGRlZmF1bHQgZmFsc2UgKG9uKS5cclxuICAgICAqL1xyXG4gICAgc2V0SGVhZGVyKGluZGV4LCB2YWx1ZSwgZm9udFNpemUsIGxvY2sgPSBmYWxzZSl7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuZ2V0SGVhZGVyKGluZGV4KTtcclxuICAgICAgICBlbGVtZW50LnRleHQgPSB2YWx1ZTtcclxuICAgICAgICBlbGVtZW50LnN0eWxlLmZvbnRTaXplID0gZm9udFNpemU7XHJcblxyXG4gICAgICAgIGlmIChsb2NrKXtcclxuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjb250ZW50RWRpdGFibGVcIiwgXCJmYWxzZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSB0aGUgaGVhZGVyIGh0bWwgZWxlbWVudFxyXG4gICAgICogQHBhcmFtIGluZGV4XHJcbiAgICAgKiBAcGFyYW0gdmFsdWVcclxuICAgICAqL1xyXG4gICAgZ2V0SGVhZGVyKGluZGV4KXtcclxuICAgICAgICBpZiAodHlwZW9mIGluZGV4ICE9PSBcIm51bWJlclwiIHx8IGluZGV4IDwgMCB8fCBpbmRleCA+IDYpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW5kZXg6IFwiICsgaW5kZXgpO1xyXG4gICAgICAgIGxldCBzZWxlY3RvciA9IGBbZGF0YS1yb3c9J2gnXVtkYXRhLWNvbD0nJHtpbmRleH0nXSAudmFsdWVgO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSB2YWx1ZSBvZiBhIG5vbi1jYXRlZ29yeSBjZWxsLlxyXG4gICAgICogQHBhcmFtIHJvd1xyXG4gICAgICogQHBhcmFtIGNvbFxyXG4gICAgICogQHBhcmFtIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIHNldENlbGwocm93LCBjb2wsIHZhbHVlID0gXCJcIil7XHJcbiAgICAgICAgdGhpcy5nZXRDZWxsKHJvdywgY29sKS50ZXh0Q29udGVudCA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENlbGwocm93LCBjb2wpe1xyXG4gICAgICAgIGxldCBzZWxlY3RvciA9IGBbZGF0YS1yb3c9XCIke3Jvd31cIl1bZGF0YS1jb2w9XCIke2NvbH1cIl0gLnZhbHVlYDtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRDb21wbGV0ZShyb3csIGNvbCwgdmFsdWUpe1xyXG4gICAgICAgIGlmICh0eXBlb2Ygcm93ICE9PSBcIm51bWJlclwiIHx8IHJvdyA8IDAgfHwgcm93ID4gNikgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCByb3c6IFwiICsgcm93KTtcclxuICAgICAgICBpZiAodHlwZW9mIGNvbCAhPT0gXCJudW1iZXJcIiB8fCBjb2wgPCAwIHx8IGNvbCA+IDUpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY29sOiBcIiArIGNvbCk7XHJcbiAgICAgICAgdGhpcy5nZXRDZWxsKHJvdywgY29sKS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbXBsZXRlXCIsIHZhbHVlKTtcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnZ2FtZS1ib2FyZCcsIEdhbWVCb2FyZCk7XHJcbm1vZHVsZS5leHBvcnRzID0gR2FtZUJvYXJkOyIsImNvbnN0IE5pZGdldEVsZW1lbnQgPSByZXF1aXJlKFwiQHRoYWVyaW91cy9uaWRnZXRcIikuTmlkZ2V0RWxlbWVudDtcclxuXHJcbmNsYXNzIE1lbnVDb250YWluZXIgZXh0ZW5kcyBOaWRnZXRFbGVtZW50e1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIoXCJtZW51LWNvbnRhaW5lci10ZW1wbGF0ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZWFkeSgpIHtcclxuICAgICAgICBhd2FpdCBzdXBlci5yZWFkeSgpO1xyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIiNtZW51LWljb25cIikuc2V0QXR0cmlidXRlKFwic3JjXCIsICB0aGlzLmdldEF0dHJpYnV0ZShcImltYWdlLXNyY1wiKSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5vdXRlclNlbGVjdG9yQWxsKFwibWVudS1pdGVtXCIpKXtcclxuICAgICAgICAgICAgaXRlbS5kZXRhY2goKTtcclxuICAgICAgICAgICAgdGhpcy5tZW51QXJlYS5hcHBlbmQoaXRlbSk7XHJcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCk9PntcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoaXRlbS5nZXRBdHRyaWJ1dGUoXCJldmVudC1uYW1lXCIpLCB7YnViYmxlczogdHJ1ZSwgY29tcG9zZWQ6IHRydWV9KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbk1lbnUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5tZW51QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+dGhpcy50b2dnbGVNZW51KCkpO1xyXG4gICAgICAgIHRoaXMubWVudUFyZWEuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgKCk9PiB0aGlzLm1vdXNlTGVhdmUoKSk7XHJcbiAgICAgICAgdGhpcy5tZW51QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsICgpPT4gdGhpcy5tb3VzZUxlYXZlKCkpO1xyXG4gICAgICAgIHRoaXMubWVudUFyZWEuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgKCk9PiB0aGlzLm1vdXNlRW50ZXIoKSk7XHJcbiAgICAgICAgdGhpcy5tZW51QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsICgpPT4gdGhpcy5tb3VzZUVudGVyKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQobWVudVNlbGVjdG9yKXtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtYXV0b2Nsb3NlPSd0cnVlJ11cIikuZm9yRWFjaCgoZWxlKT0+IHtcclxuICAgICAgICAgICAgZWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+dGhpcy5jbG9zZSgpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zdWItbWVudVwiKS5mb3JFYWNoKChlbGUpPT57XHJcbiAgICAgICAgICAgIGVsZS5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtbGFiZWxcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZU1lbnUoZWxlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCl7XHJcbiAgICAgICAgdGhpcy5tZW51QXJlYS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnN1Yi1tZW51ID4gLm1lbnUtYXJlYVwiKS5mb3JFYWNoKChlbGUpPT57XHJcbiAgICAgICAgICAgIGVsZS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKXtcclxuICAgICAgICB0aGlzLm1lbnVBcmVhLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbk1lbnUoKTtcclxuICAgIH1cclxuXHJcbiAgICBtb3VzZUxlYXZlKCl7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZW91dCkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVvdXQgPSBudWxsO1xyXG4gICAgICAgIH0sIDUwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgbW91c2VFbnRlcigpe1xyXG4gICAgICAgIGlmICghdGhpcy50aW1lb3V0KSByZXR1cm47XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XHJcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBzaG93TWVudSgpe1xyXG4gICAgICAgIHRoaXMubWVudUFyZWEuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uTWVudSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVNZW51KCl7XHJcbiAgICAgICAgdGhpcy5tZW51QXJlYS5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzTWVudUhpZGRlbigpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1lbnVBcmVhLmNsYXNzTGlzdC5jb250YWlucyhcImhpZGRlblwiKTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVNZW51KCl7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNNZW51SGlkZGVuKCkpIHRoaXMuc2hvd01lbnUoKTtcclxuICAgICAgICBlbHNlIHRoaXMuaGlkZU1lbnUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwb3NpdGlvbk1lbnUoKXtcclxuICAgICAgICBjb25zdCBsZWZ0ID0gdGhpcy5tZW51QnV0dG9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgICAgICAgY29uc3QgYldpZHRoID0gdGhpcy5tZW51QnV0dG9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gICAgICAgIGNvbnN0IG1XaWR0aCA9IHRoaXMubWVudUFyZWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcblxyXG4gICAgICAgIGlmICgobGVmdCArIGJXaWR0aCArIG1XaWR0aCArIDIpID4gd2luZG93LmlubmVyV2lkdGgpe1xyXG4gICAgICAgICAgICB0aGlzLnNldE1lbnVMZWZ0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRNZW51UmlnaHQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TWVudUxlZnQoKXtcclxuICAgICAgICBjb25zdCBsZWZ0ID0gdGhpcy5tZW51QnV0dG9uLm9mZnNldExlZnQ7XHJcbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLm1lbnVBcmVhLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIHRoaXMubWVudUFyZWEuc3R5bGUubGVmdCA9IChsZWZ0IC0gd2lkdGggLSAyKSArIFwicHhcIjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRNZW51UmlnaHQoKXtcclxuICAgICAgICBjb25zdCBsZWZ0ID0gdGhpcy5tZW51QnV0dG9uLm9mZnNldExlZnQ7XHJcbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLm1lbnVCdXR0b24ub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgdGhpcy5tZW51QXJlYS5zdHlsZS5sZWZ0ID0gKGxlZnQgKyB3aWR0aCArIDIpICsgXCJweFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBtZW51QnV0dG9uKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIiNtZW51LWljb25cIik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG1lbnVBcmVhKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIiNvdXRlclwiKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgTWVudUl0ZW0gZXh0ZW5kcyBOaWRnZXRFbGVtZW50e1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZWFkeSgpIHtcclxuICAgICAgICBhd2FpdCBzdXBlci5yZWFkeSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG53aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdtZW51LWl0ZW0nLCBNZW51SXRlbSk7XHJcbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ21lbnUtY29udGFpbmVyJywgTWVudUNvbnRhaW5lcik7XHJcbm1vZHVsZS5leHBvcnRzID0gTWVudUNvbnRhaW5lcjsiLCJjb25zdCBOaWRnZXRFbGVtZW50ID0gcmVxdWlyZShcIkB0aGFlcmlvdXMvbmlkZ2V0XCIpLk5pZGdldEVsZW1lbnQ7XHJcbnJlcXVpcmUoXCIuL0NoZWNrQm94LmpzXCIpO1xyXG5cclxuY2xhc3MgVmFsdWVVcGRhdGUgZXh0ZW5kcyBDdXN0b21FdmVudCB7XHJcbiAgICBjb25zdHJ1Y3RvcihpbmRleCwgdmFsdWUsIGNoZWNrZWQpIHtcclxuICAgICAgICBzdXBlcigndmFsdWUtdXBkYXRlJyxcclxuICAgICAgICAgICAge2RldGFpbDoge2luZGV4OiBpbmRleCwgdmFsdWU6IHZhbHVlLCBjaGVja2VkOiBjaGVja2VkfX1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBNdWx0aXBsZUNob2ljZVByZXNlbnQgZXh0ZW5kcyBOaWRnZXRFbGVtZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwibXVsdGlwbGUtY2hvaWNlLXByZXNlbnQtdGVtcGxhdGVcIik7XHJcbiAgICAgICAgdGhpcy50aW1lb3V0cyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFRpbWVvdXQoaW5kZXgsIHZhbHVlKXtcclxuICAgICAgICBpZiAodGhpcy50aW1lb3V0c1tpbmRleF0pIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRzW2luZGV4XSk7XHJcbiAgICAgICAgdGhpcy50aW1lb3V0c1tpbmRleF0gPSBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IFZhbHVlVXBkYXRlKGluZGV4LCB2YWx1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMudGltZW91dHNbaW5kZXhdID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0sIDMwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVhZHkoKSB7XHJcbiAgICAgICAgYXdhaXQgc3VwZXIucmVhZHkoKTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMucXVlcnlTZWxlY3RvckFsbChcImNoZWNrLWJveFwiKSl7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZhbHVlLXVwZGF0ZVwiLCBldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGVsZW1lbnQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tlZCA9IGV2ZW50LmRldGFpbC52YWx1ZSA9PT0gXCJ0cnVlXCI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLndhZ2VyXCIpLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi53YWdlclwiKS5kaXNhYmxlZCA9ICFjaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBWYWx1ZVVwZGF0ZShpbmRleCwgcGFyc2VJbnQodmFsdWUpLCBjaGVja2VkKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMucXVlcnlTZWxlY3RvckFsbChcIi53YWdlclwiKSl7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50PT57XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNvbnRlbnQgPSBcIlwiO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidGV4dC11cGRhdGVcIiwgZXZlbnQ9PntcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtaW5kZXhcIik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGV2ZW50LmRldGFpbC5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBWYWx1ZVVwZGF0ZShpbmRleCwgcGFyc2VJbnQodmFsdWUpLCB0cnVlKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRNb2RlKG1vZGUpIHtcclxuICAgICAgICBzd2l0Y2ggKG1vZGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcInNob3dcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZChcInNob3ctbW9kZVwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZGF0YS1lbnRlclwiOlxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy1tb2RlXCIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldEFuc3dlclRleHQoaW5kZXgsIHRleHQpIHtcclxuICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoYC5pbm5lcltkYXRhLWluZGV4PVwiJHtpbmRleH1cIl0gLmFuc3dlcmApLnRleHQgPSB0ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHNldENoZWNrZWQoaW5kZXgsIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKGAuaW5uZXJbZGF0YS1pbmRleD1cIiR7aW5kZXh9XCJdIGNoZWNrLWJveGApLmNoZWNrZWQgPSB2YWx1ZTtcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnbXVsdGlwbGUtY2hvaWNlLXByZXNlbnQnLCBNdWx0aXBsZUNob2ljZVByZXNlbnQpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IE11bHRpcGxlQ2hvaWNlUHJlc2VudDsiLCJjb25zdCBOaWRnZXRFbGVtZW50ID0gcmVxdWlyZShcIkB0aGFlcmlvdXMvbmlkZ2V0XCIpLk5pZGdldEVsZW1lbnQ7XHJcblxyXG5jbGFzcyBOaWRnZXRCdXR0b24gZXh0ZW5kcyAgTmlkZ2V0RWxlbWVudHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwibmlkZ2V0LWJ1dHRvbi10ZW1wbGF0ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZWFkeSgpe1xyXG4gICAgICAgYXdhaXQgc3VwZXIucmVhZHkoKTtcclxuICAgICAgIHRoaXMuRE9NLnRleHQuaW5uZXJIVE1MID0gdGhpcy5pbm5lckhUTUw7XHJcbiAgICAgICB0aGlzLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzYWJsZSgpe1xyXG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZSgpe1xyXG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGVkXCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG53aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCduaWRnZXQtYnV0dG9uJywgTmlkZ2V0QnV0dG9uKTtcclxubW9kdWxlLmV4cG9ydHMgPSBOaWRnZXRCdXR0b247IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5jb25zdCBOaWRnZXRFbGVtZW50ID0gcmVxdWlyZShcIkB0aGFlcmlvdXMvbmlkZ2V0XCIpLk5pZGdldEVsZW1lbnQ7XHJcbmltcG9ydCBQbGF5ZXJQYW5lbCBmcm9tIFwiLi9QbGF5ZXJQYW5lbC5qc1wiO1xyXG5cclxuY2xhc3MgUGxheWVyQ29udGFpbmVyIGV4dGVuZHMgTmlkZ2V0RWxlbWVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZUlkID0gXCJwbGF5ZXItY29udGFpbmVyLXRlbXBsYXRlXCIpIHtcclxuICAgICAgICBzdXBlcih0ZW1wbGF0ZUlkKTtcclxuICAgICAgICB0aGlzLmV4dHJhUGxheWVyc0hpZGRlbiA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVhZHkoKXtcclxuICAgICAgICBhd2FpdCBzdXBlci5yZWFkeSgpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5leHRyYVBsYXllcnNIaWRkZW4pIHJldHVybjtcclxuICAgICAgICAgICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIi5vdXRlclwiKS5jbGFzc0xpc3QuYWRkKFwiaGlkZS1leHRyYVwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIiNleHBhbmQtYnV0dG9uIC50ZXh0XCIpLmlubmVySFRNTCA9IFwiJiM5NjU0O1wiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leHRyYVBsYXllcnNIaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKFwiI2V4cGFuZC1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZXh0cmFQbGF5ZXJzSGlkZGVuKXtcclxuICAgICAgICAgICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIi5vdXRlclwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZS1leHRyYVwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIiNleHBhbmQtYnV0dG9uIC50ZXh0XCIpLmlubmVySFRNTCA9IFwiJiM5NjY0O1wiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leHRyYVBsYXllcnNIaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkUGxheWVyKG5hbWUsIHNjb3JlID0gMCl7XHJcbiAgICAgICAgbGV0IG91dGVyID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiLm91dGVyXCIpO1xyXG4gICAgICAgIGxldCBleHBhbmRCdXR0b24gPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIjZXhwYW5kLWJ1dHRvblwiKTtcclxuXHJcbiAgICAgICAgbGV0IHBsYXllclBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBsYXllci1wYW5lbFwiKTtcclxuICAgICAgICBwbGF5ZXJQYW5lbC5uYW1lID0gbmFtZTtcclxuICAgICAgICBwbGF5ZXJQYW5lbC5zY29yZSA9IHNjb3JlO1xyXG5cclxuICAgICAgICB0aGlzLmFkZFBsYXllclBhbmVsKHBsYXllclBhbmVsKTtcclxuICAgICAgICB3aW5kb3cubGFzdFBhbmVsID0gcGxheWVyUGFuZWw7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNpemUgPiA2KSBleHBhbmRCdXR0b24uc2hvdygpO1xyXG4gICAgICAgIHJldHVybiBwbGF5ZXJQYW5lbDtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJbm5lcigpe1xyXG4gICAgICAgIGNvbnN0IG91dGVyID0gdGhpcy5xdWVyeVNlbGVjdG9yKFwiLm91dGVyXCIpO1xyXG4gICAgICAgIGNvbnN0IG5leHRJbmRleCA9IHRoaXMucXVlcnlTZWxlY3RvckFsbChcIi5pbm5lclwiKS5sZW5ndGg7XHJcblxyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibmlkZ2V0LWVsZW1lbnRcIik7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW5uZXJcIik7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZXh0cmFcIik7XHJcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBgLS1pbmRleDogJHtuZXh0SW5kZXh9YCk7XHJcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIsIG5leHRJbmRleCk7XHJcbiAgICAgICAgb3V0ZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldElubmVyKGluZGV4KXtcclxuICAgICAgICB3aGlsZSAodGhpcy5xdWVyeVNlbGVjdG9yQWxsKFwiLmlubmVyXCIpLmxlbmd0aCA8PSBpbmRleCl7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkSW5uZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHNlbGVjdG9yID0gYC5pbm5lcltkYXRhLWluZGV4PScke2luZGV4fSddYFxyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoYC5pbm5lcltkYXRhLWluZGV4PScke2luZGV4fSddYCk7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkUGxheWVyUGFuZWwoZWxlbWVudCl7XHJcbiAgICAgICAgY29uc3QgaW5uZXJJbmRleCA9IE1hdGgudHJ1bmMoKHRoaXMuc2l6ZSkgLyA2KTtcclxuICAgICAgICBjb25zdCBpbm5lckVsZW1lbnQgPSB0aGlzLmdldElubmVyKGlubmVySW5kZXgpO1xyXG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgYC0taW5kZXg6ICR7dGhpcy5zaXplICUgNn1gKTtcclxuICAgICAgICBpbm5lckVsZW1lbnQuYXBwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzaXplKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvckFsbChcInBsYXllci1wYW5lbFwiKS5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgdG9wUGxheWVyKCl7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRJbm5lciA9IHRoaXMucXVlcnlTZWxlY3RvcihcIi5pbm5lci5maXJzdFwiKTtcclxuICAgICAgICByZXR1cm4gY3VycmVudElubmVyLnF1ZXJ5U2VsZWN0b3IoXCJwbGF5ZXItcGFuZWxcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UGxheWVyKG5hbWUpe1xyXG4gICAgICAgIGZvciAobGV0IHBhbmVsIG9mIHRoaXMucXVlcnlTZWxlY3RvckFsbChcInBsYXllci1wYW5lbFwiKSl7XHJcbiAgICAgICAgICAgIGlmIChwYW5lbC5uYW1lID09PSBuYW1lKSByZXR1cm4gcGFuZWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdmVUb1RvcChuYW1lKXtcclxuICAgICAgICBjb25zdCBjb21wb25lbnRzID0gW107XHJcbiAgICAgICAgaWYgKCF0aGlzLmdldFBsYXllcihuYW1lKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb21wb25lbnRzLnB1c2godGhpcy5nZXRQbGF5ZXIobmFtZSkpO1xyXG4gICAgICAgIHRoaXMuZ2V0UGxheWVyKG5hbWUpLmRldGFjaCgpO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdGhpcy5xdWVyeVNlbGVjdG9yQWxsKFwicGxheWVyLXBhbmVsXCIpKXtcclxuICAgICAgICAgICAgY29tcG9uZW50cy5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmRldGFjaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgY29tcG9uZW50IG9mIGNvbXBvbmVudHMpe1xyXG4gICAgICAgICAgICB0aGlzLmFkZFBsYXllclBhbmVsKGNvbXBvbmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY29tcG9uZW50c1swXTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpe1xyXG4gICAgICAgIGZvciAobGV0IGlubmVyIG9mIHRoaXMucXVlcnlTZWxlY3RvckFsbChcIi5leHRyYVwiKSl7XHJcbiAgICAgICAgICAgIGlubmVyLmRldGFjaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKFwiLmlubmVyXCIpLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgncGxheWVyLWNvbnRhaW5lcicsIFBsYXllckNvbnRhaW5lcik7XHJcbm1vZHVsZS5leHBvcnRzID0gUGxheWVyQ29udGFpbmVyOyIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuY29uc3QgTmlkZ2V0RWxlbWVudCA9IHJlcXVpcmUoXCJAdGhhZXJpb3VzL25pZGdldFwiKS5OaWRnZXRFbGVtZW50O1xyXG5pbXBvcnQgXCIuL1BsYXllclBhbmVsLmpzXCI7XHJcblxyXG5jbGFzcyBQbGF5ZXJQYW5lbCBleHRlbmRzIE5pZGdldEVsZW1lbnQge1xyXG4gICAgY29uc3RydWN0b3IodGVtcGxhdGVJZCA9IFwicGxheWVyLXBhbmVsLXRlbXBsYXRlXCIpIHtcclxuICAgICAgICBzdXBlcih0ZW1wbGF0ZUlkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZWFkeSgpe1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLnJlYWR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IG5hbWUodmFsdWUpe1xyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpLmlubmVySFRNTCA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzY29yZSh2YWx1ZSl7XHJcbiAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKFwiI3Njb3JlXCIpLmlubmVySFRNTCA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBuYW1lKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpLmlubmVySFRNTDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2NvcmUoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiI3Njb3JlXCIpLmlubmVySFRNTDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgZGltKHZhbHVlKXtcclxuICAgICAgICBpZiAodmFsdWUpIHRoaXMucXVlcnlTZWxlY3RvcihcIi5vdXRlclwiKS5jbGFzc0xpc3QuYWRkKFwiZGltXCIpO1xyXG4gICAgICAgIGVsc2UgdGhpcy5xdWVyeVNlbGVjdG9yKFwiLm91dGVyXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJkaW1cIik7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGhpZ2hsaWdodCh2YWx1ZSl7XHJcbiAgICAgICAgaWYgKHZhbHVlKSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIub3V0ZXJcIikuY2xhc3NMaXN0LmFkZChcImhpZ2hsaWdodFwiKTtcclxuICAgICAgICBlbHNlIHRoaXMucXVlcnlTZWxlY3RvcihcIi5vdXRlclwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiaGlnaGxpZ2h0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBhY3RpdmUodmFsdWUpe1xyXG4gICAgICAgIGlmICh2YWx1ZSkgdGhpcy5xdWVyeVNlbGVjdG9yKFwiI2J1enotbGlnaHRcIikuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgICAgICBlbHNlIHRoaXMucXVlcnlTZWxlY3RvcihcIiNidXp6LWxpZ2h0XCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZUNsb2NrKCl7XHJcbiAgICAgICAgdGhpcy5ET00uY2xvY2suY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBidXp6KCl7XHJcbiAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKFwiI2J1enotbGlnaHRcIikuY2xhc3NMaXN0LmFkZChcInN3ZWVwLXJpZ2h0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCl7XHJcbiAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKFwiI2J1enotbGlnaHRcIikuY2xhc3NMaXN0LnJlbW92ZShcInN3ZWVwLXJpZ2h0XCIpO1xyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKFwiI3Njb3JlXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yQWxsKFwiLmNsb2NrLXRpY2tcIikuZm9yRWFjaChlID0+IGUuY2xhc3NMaXN0LnJlbW92ZShcInNwZW50XCIpKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUaW1lcihwZXJjZW50KXtcclxuICAgICAgICBpZiAocGVyY2VudCA8PSA4MCkgdGhpcy5xdWVyeVNlbGVjdG9yKFwiLmNsb2NrLXRpY2tbZGF0YS1pbmRleD0nNCddXCIpLmNsYXNzTGlzdC5hZGQoXCJzcGVudFwiKTtcclxuICAgICAgICBpZiAocGVyY2VudCA8PSA2MCkgdGhpcy5xdWVyeVNlbGVjdG9yKFwiLmNsb2NrLXRpY2tbZGF0YS1pbmRleD0nMyddXCIpLmNsYXNzTGlzdC5hZGQoXCJzcGVudFwiKTtcclxuICAgICAgICBpZiAocGVyY2VudCA8PSA0MCkgdGhpcy5xdWVyeVNlbGVjdG9yKFwiLmNsb2NrLXRpY2tbZGF0YS1pbmRleD0nMiddXCIpLmNsYXNzTGlzdC5hZGQoXCJzcGVudFwiKTtcclxuICAgICAgICBpZiAocGVyY2VudCA8PSAyMCkgdGhpcy5xdWVyeVNlbGVjdG9yKFwiLmNsb2NrLXRpY2tbZGF0YS1pbmRleD0nMSddXCIpLmNsYXNzTGlzdC5hZGQoXCJzcGVudFwiKTtcclxuICAgICAgICBpZiAocGVyY2VudCA8PSAwKSAgdGhpcy5xdWVyeVNlbGVjdG9yKFwiLmNsb2NrLXRpY2tbZGF0YS1pbmRleD0nMCddXCIpLmNsYXNzTGlzdC5hZGQoXCJzcGVudFwiKTtcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgncGxheWVyLXBhbmVsJywgUGxheWVyUGFuZWwpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IFBsYXllclBhbmVsOyIsImNvbnN0IE5pZGdldEVsZW1lbnQgPSByZXF1aXJlKFwiQHRoYWVyaW91cy9uaWRnZXRcIikuTmlkZ2V0RWxlbWVudDtcclxuXHJcbmNsYXNzIFRleHRVcGRhdGUgZXh0ZW5kcyBDdXN0b21FdmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoJ3RleHQtdXBkYXRlJyxcclxuICAgICAgICAgICAge2RldGFpbDoge3RleHQ6IHRleHR9fVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFF1ZXN0aW9uUGFuZSBleHRlbmRzIE5pZGdldEVsZW1lbnQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJxdWVzdGlvbi1wYW5lLXRlbXBsYXRlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJlYWR5KCkge1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLnJlYWR5KCk7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiLnRleHQtY29udGVudHNcIikuZm9jdXMoKSk7XHJcblxyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIiN0ZXh0LWNvbnRlbnRzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IHRleHQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIudGV4dC1jb250ZW50c1wiKS50ZXh0O1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFRleHRVcGRhdGUodGV4dC50cmltKCkpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIudGV4dC1jb250ZW50c1wiKS50ZXh0ID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUZXh0KHRleHQpIHtcclxuICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIudGV4dC1jb250ZW50c1wiKS50ZXh0ID0gdGV4dDtcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgncXVlc3Rpb24tcGFuZScsIFF1ZXN0aW9uUGFuZSk7XHJcbm1vZHVsZS5leHBvcnRzID0gUXVlc3Rpb25QYW5lO1xyXG5cclxuXHJcblxyXG4iLCJjb25zdCBOaWRnZXRFbGVtZW50ID0gcmVxdWlyZShcIkB0aGFlcmlvdXMvbmlkZ2V0XCIpLk5pZGdldEVsZW1lbnQ7XHJcblxyXG5jbGFzcyBUZXh0SW5wdXQgZXh0ZW5kcyBOaWRnZXRFbGVtZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwidGV4dC1pbnB1dC10ZW1wbGF0ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgICAgICB0aGlzLnNvdXJjZUlubmVySFRNTCA9IHRoaXMuaW5uZXJIVE1MO1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcmVhZHkoKSB7XHJcbiAgICAgICAgYXdhaXQgc3VwZXIucmVhZHkoKTtcclxuXHJcbiAgICAgICAgdGhpcy5maWx0ZXIgPSB0aGlzLmdldEF0dHJpYnV0ZShUZXh0SW5wdXQuRklMVEVSKSA/PyBcIi4qXCI7XHJcbiAgICAgICAgY29uc3QgaGludCA9IHRoaXMuZ2V0QXR0cmlidXRlKFRleHRJbnB1dC5ISU5UX0FUVFJJQlVURSk7XHJcbiAgICAgICAgdGhpcy5ET01bJ2hpbnQnXS5pbm5lckhUTUwgPSBoaW50O1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRlbnQgPSB0aGlzLnNvdXJjZUlubmVySFRNTDtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgKCk9PntcclxuICAgICAgICAgICAgdGhpcy5ET01bJ2NvbnRlbnQnXS5mb2N1cygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLkRPTVsnY29udGVudCddLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xyXG4gICAgICAgICAgICB0aGlzLkRPTVsnaGludCddLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuRE9NWydjb250ZW50J10uYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgKCk9PntcclxuICAgICAgICAgICAgaWYgKHRoaXMuRE9NWydjb250ZW50J10uaW5uZXJIVE1MLnRyaW0oKSA9PT0gXCJcIil7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTVsnaGludCddLmlubmVySFRNTCA9IGhpbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5ET01bJ2NvbnRlbnQnXS5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgKGV2ZW50KT0+dGhpcy5vbktleXByZXNzKGV2ZW50KSk7XHJcbiAgICAgICAgdGhpcy5ET01bJ2NvbnRlbnQnXS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2ZW50KT0+dGhpcy5vbklucHV0KGV2ZW50KSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGNvbnRlbnQoKXtcclxuICAgICAgICBjb25zdCBzdHJpbmcgPSB0aGlzLkRPTVsnY29udGVudCddLmlubmVySFRNTDtcclxuICAgICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2VBbGwoXCImbmJzcDtcIiwgXCIgXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBjb250ZW50KHZhbHVlKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5ET01bJ2NvbnRlbnQnXS50ZXh0ID0gdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2FyZXQoaW5kZXgpIHtcclxuICAgICAgICBsZXQgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpXHJcbiAgICAgICAgbGV0IHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKVxyXG5cclxuICAgICAgICByYW5nZS5zZXRTdGFydCh0aGlzLkRPTVsnY29udGVudCddLmNoaWxkTm9kZXNbMF0sIGluZGV4KTtcclxuICAgICAgICByYW5nZS5jb2xsYXBzZSh0cnVlKVxyXG5cclxuICAgICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKClcclxuICAgICAgICBzZWwuYWRkUmFuZ2UocmFuZ2UpXHJcbiAgICB9XHJcblxyXG4gICAgb25JbnB1dChldmVudCl7XHJcbiAgICAgICAgaWYgKHRoaXMuZmlsdGVyID09PSBcIlwiKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgY2hlY2sgPSB0aGlzLmNvbnRlbnQudHJpbSgpO1xyXG4gICAgICAgIGxldCByID0gY2hlY2subWF0Y2goXCJeXCIgKyB0aGlzLmZpbHRlciArIFwiJFwiKTtcclxuICAgICAgICBpZiAoIWNoZWNrLm1hdGNoKFwiXlwiICsgdGhpcy5maWx0ZXIgKyBcIiRcIikpe1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSB0aGlzLnByZXZDb250ZW50O1xyXG4gICAgICAgICAgICB0aGlzLnNldENhcmV0KHRoaXMucHJldkNhcmV0KTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcclxuICAgICAgICAgICAgICAgIFwidGV4dC11cGRhdGVcIixcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBidWJibGVzIDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBjb21wb3NlZCA6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsIDoge2NvbnRlbnQgOiB0aGlzLmNvbnRlbnR9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbktleXByZXNzKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAxMyl7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFxyXG4gICAgICAgICAgICAgICAgXCJ0ZXh0LWVudGVyXCIsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnViYmxlcyA6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9zZWQgOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbCA6IHtjb250ZW50IDogdGhpcy5jb250ZW50fVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucHJldkNvbnRlbnQgPSB0aGlzLmNvbnRlbnQ7XHJcbiAgICAgICAgdGhpcy5wcmV2Q2FyZXQgPSB0aGlzLnNoYWRvd1Jvb3QuZ2V0U2VsZWN0aW9uKCkuYW5jaG9yT2Zmc2V0O1xyXG4gICAgfVxyXG59XHJcblxyXG5UZXh0SW5wdXQuRklMVEVSID0gXCJmaWx0ZXJcIjtcclxuVGV4dElucHV0LkhJTlRfQVRUUklCVVRFID0gXCJoaW50XCI7XHJcbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3RleHQtaW5wdXQnLCBUZXh0SW5wdXQpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IFRleHRJbnB1dDsiLCJjb25zdCBOaWRnZXRFbGVtZW50ID0gcmVxdWlyZShcIkB0aGFlcmlvdXMvbmlkZ2V0XCIpLk5pZGdldEVsZW1lbnQ7XHJcblxyXG5jbGFzcyBUcml2aWFUaW1lciBleHRlbmRzIE5pZGdldEVsZW1lbnR7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJ0cml2aWEtdGltZXItdGVtcGxhdGVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnQodmFsdWUpe1xyXG4gICAgICAgIGlmICh2YWx1ZSkgdGhpcy5zZXQodmFsdWUpO1xyXG4gICAgICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQoKCk9PnRoaXMuc3RlcCgpLCA1MDApO1xyXG4gICAgICAgIHRoaXMucnVubmluZyA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgc3RvcCgpe1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVvdXQpe1xyXG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNob3codmFsdWUpe1xyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIi5vdXRlclwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiY3ljbGVcIik7XHJcbiAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIiNjdXJyZW50LXRpY2sgLnRleHRcIikuaW5uZXJIVE1MID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1cGVyLnNob3coKTtcclxuICAgIH1cclxuXHJcbiAgICBzcGluKCl7XHJcbiAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKFwiLm91dGVyXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJjeWNsZVwiKTtcclxuICAgICAgICBzZXRUaW1lb3V0KFxyXG4gICAgICAgICAgICAoKT0+dGhpcy5xdWVyeVNlbGVjdG9yKFwiLm91dGVyXCIpLmNsYXNzTGlzdC5hZGQoXCJjeWNsZVwiKSxcclxuICAgICAgICAgICAgMTBcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KFxyXG4gICAgICAgICAgICAoKT0+dGhpcy5xdWVyeVNlbGVjdG9yKFwiI2N1cnJlbnQtdGljayAudGV4dFwiKS5pbm5lckhUTUwgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIjcHJldi10aWNrXCIpLmlubmVySFRNTCxcclxuICAgICAgICAgICAgNTAwXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGVwKCl7XHJcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgPiAwICYmIHRoaXMucnVubmluZykge1xyXG4gICAgICAgICAgICB0aGlzLnRpY2soKTtcclxuICAgICAgICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dCgoKT0+dGhpcy5zdGVwKCksIDEwMDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXQodmFsdWUpe1xyXG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcihcIiNwcmV2LXRpY2sgLnRleHRcIikuaW5uZXJIVE1MID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5zcGluKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGljayhuZXh0VmFsdWUpe1xyXG4gICAgICAgIG5leHRWYWx1ZSA9IG5leHRWYWx1ZSA/PyAtLXRoaXMudmFsdWU7XHJcbiAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKFwiI3ByZXYtdGlja1wiKS5pbm5lckhUTUwgPSBuZXh0VmFsdWU7XHJcbiAgICAgICAgdGhpcy5xdWVyeVNlbGVjdG9yKFwiLm91dGVyXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJjeWNsZVwiKTtcclxuXHJcbiAgICAgICAgc2V0VGltZW91dChcclxuICAgICAgICAgICAgKCk9PnRoaXMucXVlcnlTZWxlY3RvcihcIi5vdXRlclwiKS5jbGFzc0xpc3QuYWRkKFwiY3ljbGVcIiksXHJcbiAgICAgICAgICAgIDUwMFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoXHJcbiAgICAgICAgICAgICgpPT50aGlzLnF1ZXJ5U2VsZWN0b3IoXCIjY3VycmVudC10aWNrIC50ZXh0XCIpLmlubmVySFRNTCA9IG5leHRWYWx1ZSxcclxuICAgICAgICAgICAgOTAwXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgndHJpdmlhLXRpbWVyJywgVHJpdmlhVGltZXIpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IFRyaXZpYVRpbWVyOyJdfQ==
